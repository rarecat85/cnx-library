const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D4meORf1.js","./entry.yfGVSS21.css"])))=>i.map(i=>d[i]);
import{F as bt,N as ft,a as _t,r as b,k as S,o as Oe,e as pt,_ as ee,Y as kt,O as F,L as i,g as w,H as u,K as l,P as o,I as a,J as v,Q as q,G as m,M as r,R as W,U as x,S as he,Z as yt,T as ht,W as we}from"./D4meORf1.js";import{_ as wt}from"./DovEHTV2.js";import{g as gt,C as Ct,_ as Rt,c as He}from"./BQA3864d.js";import{u as xt,_ as Dt}from"./CXBglKcO.js";import{u as Nt,h as ge,_ as Vt}from"./BF39NsgA.js";import{f as Ce}from"./C4Xq6-4w.js";import{u as Bt}from"./CSLLkWyk.js";import{u as Lt}from"./BnmRTHMY.js";import"./BKoeciCV.js";import"./C-xtXPWq.js";const St={class:"books-page"},Et={class:"center-header mb-6"},It={class:"center-header-inner"},qt={class:"page-title mb-0"},At={class:"registered-books-section"},Pt={class:"registered-books-header mb-0"},Mt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},Tt={class:"text-body-1"},$t={class:"d-flex align-center registered-search-group"},zt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mt-4"},Gt={class:"text-body-2 text-medium-emphasis"},Ut={key:0,class:"text-center py-8 mt-6"},Ot={key:1,class:"registered-books-grid mt-6"},Ht={key:0,class:"pagination-section"},Ft={key:2,class:"text-center py-8 mt-6 text-medium-emphasis empty-state"},Wt={key:0},jt={key:1},Qt={key:0,class:"sticky-rent-bar"},Xt={class:"sticky-rent-info"},Jt={class:"selected-count"},Kt={class:"rent-status"},Yt={class:"drawer-content"},Zt={key:0,class:"rent-book-card mb-4"},eo={class:"rent-book-card-inner"},to=["src","alt"],oo={key:1,class:"rent-book-thumbnail-placeholder"},so={class:"rent-book-meta"},ao={class:"rent-book-title"},lo={key:0,class:"rent-book-author"},no={key:1,class:"rent-book-publisher"},io={class:"label-select-list"},ro={class:"label-select-header mb-2"},uo=["onClick"],co={class:"label-info"},vo={class:"label-number"},mo={class:"label-location"},bo={class:"location-text"},fo={key:0,class:"rent-book-card"},_o={class:"rent-book-card-inner"},po=["src","alt"],ko={key:1,class:"rent-book-thumbnail-placeholder"},yo={class:"rent-book-meta"},ho={class:"rent-book-title"},wo={key:0,class:"rent-book-author"},go={key:1,class:"rent-book-publisher"},Co={class:"rent-book-details"},Ro={class:"detail-item"},xo={class:"detail-item location-item"},Do={class:"location-text"},No={class:"rent-confirm-info mb-4"},Vo={key:0,class:"text-caption text-grey mt-1"},Bo={class:"multi-rent-book-list"},Lo={class:"rent-book-card-inner"},So=["src","alt"],Eo={key:1,class:"rent-book-thumbnail-placeholder"},Io={class:"rent-book-meta"},qo={class:"rent-book-title"},Ao={key:0,class:"rent-book-author"},Po={key:1,class:"rent-book-publisher"},Mo={class:"rent-book-details"},To={class:"detail-item"},$o={class:"detail-item location-item"},zo={class:"location-text"},Re=10,G=5,Go={__name:"index",setup(Uo){const{user:k}=Bt(),{getBooksByCenter:Fe,calculateBookStatus:j,rentBook:xe,requestRent:De,checkAlreadyRentedSameIsbn:Ne}=Nt(),{confirm:Ve,alert:h}=ft(),{$firebaseFirestore:We}=_t(),B=We,{drawer:Q,drawerWidth:Be}=xt(),Le=[...Ct],_=b(""),ne=b(""),te=b([]),ie=b(!1),E=b(""),U=b("date"),je=[{title:"등록일순",value:"date"},{title:"제목순",value:"title"}],X=b(1),y=b([]),A=b(!1),P=b(0),oe=b([]),M=b(!1),p=b(null),g=b(""),L=b(""),C=b(null),J=b(!1),O=b(!1),K=b(!1),se=b(!1),Y=b(!1),ae=b([]),re=b(null),Qe=S(()=>ge(_.value));Oe(()=>{const t=()=>{Be.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),pt(()=>{window.removeEventListener("resize",t)})});const Xe=async()=>{if(!k.value||!B)return"";try{const{doc:t,getDoc:e}=await ee(async()=>{const{doc:n,getDoc:R}=await import("./D4meORf1.js").then(V=>V.b2);return{doc:n,getDoc:R}},__vite__mapDeps([0,1]),import.meta.url),c=t(B,"users",k.value.uid),d=await e(c);if(d.exists())return d.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Oe(async()=>{const t=await Xe();ne.value=t,_.value=t?gt(t):Le[0],await Promise.all([H(),ue(),Se()])});const Se=async()=>{if(!(!k.value||!B))try{const{collection:t,query:e,where:c,getDocs:d}=await ee(async()=>{const{collection:N,query:I,where:f,getDocs:$}=await import("./D4meORf1.js").then(z=>z.b2);return{collection:N,query:I,where:f,getDocs:$}},__vite__mapDeps([0,1]),import.meta.url),n=t(B,"returnNotifySubscriptions"),R=e(n,c("userId","==",k.value.uid),c("center","==",_.value),c("notified","==",!1)),V=await d(R),D=[];V.forEach(N=>{D.push(N.data().isbn)}),ae.value=D}catch(t){console.error("반납 알림 구독 목록 로드 오류:",t),ae.value=[]}},Je=t=>ae.value.includes(t),Ke=async t=>{if(!(!k.value||!B||!t))try{re.value=t.isbn;const{collection:e,addDoc:c,serverTimestamp:d}=await ee(async()=>{const{collection:R,addDoc:V,serverTimestamp:D}=await import("./D4meORf1.js").then(N=>N.b2);return{collection:R,addDoc:V,serverTimestamp:D}},__vite__mapDeps([0,1]),import.meta.url),n=e(B,"returnNotifySubscriptions");await c(n,{userId:k.value.uid,userEmail:k.value.email,isbn:t.isbn,title:t.title,center:_.value,notified:!1,createdAt:d()}),ae.value.push(t.isbn),await h(`반납 알림이 신청되었습니다.
도서가 반납되면 알림을 받으실 수 있습니다.`,{type:"success"})}catch(e){console.error("반납 알림 구독 오류:",e),await h("반납 알림 신청에 실패했습니다.",{type:"error"})}finally{re.value=null}},ue=async()=>{if(!k.value||!B){P.value=0,oe.value=[];return}try{const{collection:t,query:e,where:c,getDocs:d}=await ee(async()=>{const{collection:I,query:f,where:$,getDocs:z}=await import("./D4meORf1.js").then(me=>me.b2);return{collection:I,query:f,where:$,getDocs:z}},__vite__mapDeps([0,1]),import.meta.url),n=t(B,"books"),R=e(n,c("rentedBy","==",k.value.uid)),V=await d(R);let D=0;const N=[];V.forEach(I=>{const f=I.data();(f.status==="rented"||f.status==="overdue")&&(D++,f.isbn&&N.push(f.isbn))}),P.value=D,oe.value=N}catch(t){console.error("대여중인 도서 수 로드 오류:",t),P.value=0,oe.value=[]}},le=S(()=>P.value<G),T=S(()=>G-P.value),Ye=async()=>{y.value=[],await Promise.all([H(),Se()])},H=async()=>{try{ie.value=!0;const t=await Fe(_.value);te.value=t}catch(t){console.error("등록된 도서 로드 오류:",t),te.value=[]}finally{ie.value=!1}},Ze=()=>{},Ee=S(()=>{const t=new Map;for(const e of te.value){const c=e.isbn13||e.isbn||e.id;t.has(c)||t.set(c,{isbn:c,title:e.title,author:e.author,publisher:e.publisher,image:e.image,copies:[],totalCount:0,availableCount:0,locations:[]});const d=t.get(c);d.copies.push(e),d.totalCount++,j(e)||(d.availableCount++,e.location&&!d.locations.includes(e.location)&&d.locations.push(e.location))}for(const e of t.values())e.copies.sort((c,d)=>{const n=c.labelNumber||"",R=d.labelNumber||"";return n.localeCompare(R,"ko")});return Array.from(t.values())}),ce=S(()=>{let t=[...Ee.value];if(E.value.trim()){const e=E.value.toLowerCase();t=t.filter(c=>{const d=(c.title||"").toLowerCase(),n=(c.author||"").toLowerCase(),R=(c.publisher||"").toLowerCase();return d.includes(e)||n.includes(e)||R.includes(e)})}return U.value==="title"?t.sort((e,c)=>{const d=(e.title||"").toLowerCase(),n=(c.title||"").toLowerCase();return d.localeCompare(n,"ko")}):U.value==="date"&&t.sort((e,c)=>{const d=e.copies[0]?.registeredAt?.toDate?.()||new Date(0);return(c.copies[0]?.registeredAt?.toDate?.()||new Date(0))-d}),t}),Ie=S(()=>Math.ceil(ce.value.length/Re)),et=S(()=>{const t=(X.value-1)*Re,e=t+Re;return ce.value.slice(t,e)});kt([E,U],()=>{X.value=1});const tt=S(()=>te.value.length),ot=S(()=>Ee.value.length),qe=t=>t.copies[0]||{title:t.title,author:t.author,publisher:t.publisher,image:t.image,isbn:t.isbn},st=t=>t.availableCount===0?t.copies.some(c=>j(c)==="requested")?"requested":"rented":null,Ae=t=>t.availableCount===0,at=t=>oe.value.includes(t),Pe=t=>y.value.some(e=>e.isbn===t.isbn),Me=S(()=>p.value?p.value.copies.filter(t=>!j(t)):[]),lt=async t=>{if(Pe(t)){y.value=y.value.filter(n=>n.isbn!==t.isbn);return}if(!le.value){await h(`${G}권을 대여중입니다. 대여중인 도서를 반납 후 대여해주세요.`,{type:"warning"});return}if(y.value.length>=T.value){await h(`현재 ${T.value}권까지 추가 대여 가능합니다.`,{type:"warning"});return}if(t.availableCount===0){await h("현재 대여 가능한 도서가 없습니다.",{type:"warning"});return}const e=await Ne(k.value.uid,t.isbn,_.value);if(e){await h(`이미 같은 도서를 대여중입니다.
(라벨번호: ${e.labelNumber||"-"})`,{type:"warning"});return}if(await $e(t.isbn)&&!await Ve(`이미 읽은 책입니다.
정말로 대여하시겠습니까?`))return;const d=t.copies.filter(n=>!j(n));if(d.length===1){const n=d[0];y.value.push({isbn:t.isbn,labelNumber:n.labelNumber,location:n.location,book:n})}else p.value=t,g.value="",L.value="",J.value=!0,M.value=!0},nt=t=>{g.value=t.labelNumber,L.value=t.location,C.value=t},Te=()=>{M.value=!1,p.value=null,g.value="",L.value="",C.value=null,J.value=!1},it=()=>{!p.value||!g.value||(J.value?(y.value.push({isbn:p.value.isbn,labelNumber:g.value,location:L.value,book:C.value}),Te()):(M.value=!1,O.value=!0))},$e=async t=>{if(!k.value||!B||!t)return null;try{const{collection:e,query:c,where:d,getDocs:n}=await ee(async()=>{const{collection:N,query:I,where:f,getDocs:$}=await import("./D4meORf1.js").then(z=>z.b2);return{collection:N,query:I,where:f,getDocs:$}},__vite__mapDeps([0,1]),import.meta.url),R=e(B,"rentalHistory"),V=c(R,d("userId","==",k.value.uid),d("isbn13","==",t)),D=await n(V);return D.empty?null:D.docs[0].data()}catch(e){return console.error("읽은 책 목록 확인 오류:",e),null}},rt=async t=>{if(!k.value||!t)return;if(!le.value){await h(`${G}권을 대여중입니다. 대여중인 도서를 반납 후 대여해주세요.`,{type:"warning"});return}if(t.availableCount===0){await h("현재 대여 가능한 도서가 없습니다.",{type:"warning"});return}const e=await Ne(k.value.uid,t.isbn,_.value);if(e){await h(`이미 같은 도서를 대여중입니다.
(라벨번호: ${e.labelNumber||"-"})`,{type:"warning"});return}if(await $e(t.isbn)&&!await Ve(`이미 읽은 책입니다.
정말로 대여하시겠습니까?`))return;const d=t.copies.filter(n=>!j(n));if(d.length===1){const n=d[0];p.value=t,g.value=n.labelNumber,L.value=n.location,C.value=n,J.value=!1,O.value=!0}else p.value=t,g.value="",L.value="",C.value=null,J.value=!1,M.value=!0},de=()=>{O.value=!1,p.value=null,g.value="",L.value="",C.value=null},ut=()=>{Y.value=!0},ze=t=>{L.value=t,Y.value=!0},ct=async()=>{if(!p.value||!g.value||!C.value)return;const t=He(ne.value,_.value);try{A.value=!0,t?(await xe(g.value,_.value,k.value.uid,p.value.isbn),await Promise.all([H(),ue()]),de(),await h("도서 대여가 완료되었습니다.",{type:"success"})):(await De(g.value,_.value,k.value.uid,p.value.isbn),await H(),de(),await h(`도서 대여가 신청되었습니다.
관리자 승인 후 대여가 완료됩니다.`,{type:"success"}))}catch(e){console.error("대여 처리 오류:",e),await h(e.message||"대여 처리에 실패했습니다.",{type:"error"})}finally{A.value=!1}},Ge=async()=>{if(y.value.length===0||!k.value)return;const t=He(ne.value,_.value);if(t){if(!le.value){await h(`${G}권을 대여중입니다. 대여중인 도서를 반납 후 대여해주세요.`,{type:"warning"});return}if(y.value.length>T.value){await h(`현재 ${T.value}권까지 추가 대여 가능합니다.`,{type:"warning"});return}}se.value=t,K.value=!0},ve=()=>{K.value=!1},dt=async()=>{try{A.value=!0;const t=y.value.length;if(se.value){for(const e of y.value)await xe(e.labelNumber,_.value,k.value.uid,e.isbn);await Promise.all([H(),ue()]),ve(),await h(`${t}권의 도서 대여가 완료되었습니다.`,{type:"success"})}else{for(const e of y.value)await De(e.labelNumber,_.value,k.value.uid,e.isbn);await H(),ve(),await h(`${t}권의 도서 대여가 신청되었습니다.
관리자 승인 후 대여가 완료됩니다.`,{type:"success"})}y.value=[]}catch(t){console.error("대여 신청 오류:",t),await h(t.message||"대여 신청에 실패했습니다.",{type:"error"})}finally{A.value=!1}};return Lt({title:"도서 대여 - CNX Library",meta:[{name:"description",content:"센터별 도서 대여 신청"}]}),(t,e)=>{const c=w("v-select"),d=w("v-text-field"),n=w("v-btn"),R=w("v-progress-circular"),V=wt,D=w("v-col"),N=w("v-row"),I=w("v-pagination"),f=w("v-icon"),$=Rt,z=Dt,me=w("v-navigation-drawer"),be=w("v-card-title"),fe=w("v-card-text"),_e=w("v-spacer"),pe=w("v-card-actions"),ke=w("v-card"),ye=w("v-dialog"),Ue=w("v-alert"),vt=Vt,mt=w("v-app");return u(),F(mt,null,{default:i(()=>[l($,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[4]||(e[4]=s=>Q.value=!o(Q))},{default:i(()=>[a("div",St,[a("div",Et,[a("div",It,[a("h1",qt,v(o(_))+" 도서 대여 ",1),l(c,{modelValue:o(_),"onUpdate:modelValue":[e[0]||(e[0]=s=>q(_)?_.value=s:null),Ye],items:Le,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),a("div",At,[a("div",Pt,[a("div",Mt,[a("div",Tt,[e[10]||(e[10]=r(" 총 ",-1)),a("strong",null,v(o(tt)),1),r("권 ("+v(o(ot))+"종) ",1)])]),a("div",$t,[l(d,{modelValue:o(E),"onUpdate:modelValue":[e[1]||(e[1]=s=>q(E)?E.value=s:null),Ze],label:"도서 검색",placeholder:"도서명 또는 ISBN-13으로 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"registered-search-input"},null,8,["modelValue"]),l(c,{modelValue:o(U),"onUpdate:modelValue":e[2]||(e[2]=s=>q(U)?U.value=s:null),items:je,label:"정렬",variant:"outlined",density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),a("div",zt,[a("div",Gt,[o(P)>=G?(u(),m(W,{key:0},[r(v(G)+"권 대여중 (반납 후 대여 가능) ")],64)):o(y).length>0?(u(),m(W,{key:1},[r(v(o(y).length)+"권 선택됨 ("+v(o(P))+"권 대여중, "+v(o(T))+"권 추가 가능) ",1)],64)):(u(),m(W,{key:2},[r(" 대여할 도서를 선택하세요 ("+v(o(P))+"권 대여중, "+v(o(T))+"권 추가 가능) ",1)],64))]),l(n,{class:"rent-request-btn",variant:"flat",size:"small",disabled:o(y).length===0||!o(le),loading:o(A),onClick:Ge},{default:i(()=>[...e[11]||(e[11]=[r(" 대여 신청 ",-1)])]),_:1},8,["disabled","loading"])])]),o(ie)?(u(),m("div",Ut,[l(R,{indeterminate:"",color:"primary"})])):o(ce).length>0?(u(),m("div",Ot,[l(N,{class:"book-list-row"},{default:i(()=>[(u(!0),m(W,null,he(o(et),(s,Z)=>(u(),F(D,{key:`group-${Z}`,cols:"12",sm:"6",class:"book-list-col"},{default:i(()=>[l(V,{book:qe(s),center:o(_),"registered-books":[qe(s)],"is-registered":!0,"show-action":!1,selectable:!Ae(s),selected:Pe(s),status:st(s),"show-status-flags":!0,disabled:!1,"hide-overdue-status":!0,"show-rent-button":!0,"show-quantity":s.totalCount>1,"available-count":s.availableCount,"total-count":s.totalCount,"show-return-notify-button":Ae(s)&&!at(s.isbn),"is-subscribed-to-return":Je(s.isbn),"return-notify-loading":o(re)===s.isbn,onSelect:()=>lt(s),onRent:()=>rt(s),onSubscribeReturnNotify:()=>Ke(s)},null,8,["book","center","registered-books","selectable","selected","status","show-quantity","available-count","total-count","show-return-notify-button","is-subscribed-to-return","return-notify-loading","onSelect","onRent","onSubscribeReturnNotify"])]),_:2},1024))),128))]),_:1}),o(Ie)>1?(u(),m("div",Ht,[l(I,{modelValue:o(X),"onUpdate:modelValue":e[3]||(e[3]=s=>q(X)?X.value=s:null),length:o(Ie),"total-visible":5,density:"compact",size:"small",class:"pagination"},null,8,["modelValue","length"])])):x("",!0)])):(u(),m("div",Ft,[l(f,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:i(()=>[r(v(o(E)?"mdi-book-search-outline":"mdi-book-off-outline"),1)]),_:1}),o(E)?(u(),m("p",Wt,[e[12]||(e[12]=r(" '",-1)),a("strong",null,v(o(E)),1),e[13]||(e[13]=r("'에 대한 검색 결과가 없습니다. ",-1))])):(u(),m("p",jt," 등록된 도서가 없습니다. "))]))])]),l(yt,{name:"slide-up"},{default:i(()=>[o(y).length>0?(u(),m("div",Qt,[a("div",Xt,[a("span",Jt,v(o(y).length)+"권 선택",1),a("span",Kt,"("+v(o(T))+"권 추가 가능)",1)]),l(n,{class:"sticky-rent-btn",variant:"flat",loading:o(A),onClick:Ge},{default:i(()=>[...e[14]||(e[14]=[r(" 대여 신청 ",-1)])]),_:1},8,["loading"])])):x("",!0)]),_:1})]),_:1}),l(me,{modelValue:o(Q),"onUpdate:modelValue":e[5]||(e[5]=s=>q(Q)?Q.value=s:null),location:"right",temporary:"",width:o(Be),class:"side-navigation"},{default:i(()=>[a("div",Yt,[l(z)])]),_:1},8,["modelValue","width"]),l(ye,{modelValue:o(M),"onUpdate:modelValue":e[6]||(e[6]=s=>q(M)?M.value=s:null),"max-width":"450"},{default:i(()=>[l(ke,{class:"label-select-card"},{default:i(()=>[l(be,{class:"label-select-title"},{default:i(()=>[...e[15]||(e[15]=[r(" 대여할 도서 선택 ",-1)])]),_:1}),l(fe,{class:"label-select-content"},{default:i(()=>[o(p)?(u(),m("div",Zt,[a("div",eo,[o(p).image?(u(),m("img",{key:0,src:o(p).image,alt:o(p).title,class:"rent-book-thumbnail"},null,8,to)):(u(),m("div",oo,[...e[16]||(e[16]=[a("span",null,"NO IMAGE",-1)])])),a("div",so,[a("div",ao,v(o(p).title),1),o(p).author?(u(),m("div",lo,[e[17]||(e[17]=a("strong",null,"저자:",-1)),r(" "+v(o(p).author),1)])):x("",!0),o(p).publisher?(u(),m("div",no,[e[18]||(e[18]=a("strong",null,"출판사:",-1)),r(" "+v(o(p).publisher),1)])):x("",!0)])])])):x("",!0),a("div",io,[a("div",ro," 대여 가능한 도서 ("+v(o(Me).length)+"권) ",1),(u(!0),m(W,null,he(o(Me),s=>(u(),m("div",{key:s.id,class:ht(["label-option",{selected:o(g)===s.labelNumber}]),onClick:Z=>nt(s)},[a("div",co,[a("div",vo,[l(f,{size:"small",class:"mr-1"},{default:i(()=>[...e[19]||(e[19]=[r(" mdi-label ",-1)])]),_:1}),r(" "+v(s.labelNumber||"라벨없음"),1)]),a("div",mo,[l(f,{size:"small",class:"mr-1"},{default:i(()=>[...e[20]||(e[20]=[r(" mdi-map-marker ",-1)])]),_:1}),a("span",bo,v(o(Ce)(s.location)||"위치없음"),1),o(ge)(o(_),s.location)?(u(),F(f,{key:0,size:"small",class:"ml-1 location-info-icon",onClick:we(Z=>ze(s.location),["stop"])},{default:i(()=>[...e[21]||(e[21]=[r(" mdi-information-outline ",-1)])]),_:1},8,["onClick"])):x("",!0)])]),o(g)===s.labelNumber?(u(),F(f,{key:0,color:"primary"},{default:i(()=>[...e[22]||(e[22]=[r(" mdi-check-circle ",-1)])]),_:1})):x("",!0)],10,uo))),128))])]),_:1}),l(pe,{class:"label-select-actions"},{default:i(()=>[l(_e),l(n,{variant:"text",onClick:Te},{default:i(()=>[...e[23]||(e[23]=[r(" 취소 ",-1)])]),_:1}),l(n,{color:"primary",variant:"flat",disabled:!o(g),onClick:it},{default:i(()=>[...e[24]||(e[24]=[r(" 선택 완료 ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ye,{modelValue:o(O),"onUpdate:modelValue":e[7]||(e[7]=s=>q(O)?O.value=s:null),"max-width":"500"},{default:i(()=>[l(ke,{class:"rent-confirm-card"},{default:i(()=>[l(be,{class:"rent-confirm-title"},{default:i(()=>[...e[25]||(e[25]=[r(" 대여 확인 ",-1)])]),_:1}),l(fe,{class:"rent-confirm-content"},{default:i(()=>[e[33]||(e[33]=a("div",{class:"rent-confirm-info mb-4"},[a("p",null,"아래 정보를 확인 후 대여해주세요.")],-1)),o(C)?(u(),m("div",fo,[a("div",_o,[o(C).image?(u(),m("img",{key:0,src:o(C).image,alt:o(C).title,class:"rent-book-thumbnail"},null,8,po)):(u(),m("div",ko,[...e[26]||(e[26]=[a("span",null,"NO IMAGE",-1)])])),a("div",yo,[a("div",ho,v(o(C).title),1),o(C).author?(u(),m("div",wo,[e[27]||(e[27]=a("strong",null,"저자:",-1)),r(" "+v(o(C).author),1)])):x("",!0),o(C).publisher?(u(),m("div",go,[e[28]||(e[28]=a("strong",null,"출판사:",-1)),r(" "+v(o(C).publisher),1)])):x("",!0),a("div",Co,[a("span",Ro,[l(f,{size:"x-small",class:"mr-1"},{default:i(()=>[...e[29]||(e[29]=[r("mdi-label",-1)])]),_:1}),r(" "+v(o(g)),1)]),a("span",xo,[l(f,{size:"x-small",class:"mr-1"},{default:i(()=>[...e[30]||(e[30]=[r("mdi-map-marker",-1)])]),_:1}),a("span",Do,v(o(Ce)(o(L))),1),o(Qe)?(u(),F(f,{key:0,size:"x-small",class:"ml-1 location-info-icon",onClick:we(ut,["stop"])},{default:i(()=>[...e[31]||(e[31]=[r(" mdi-information-outline ",-1)])]),_:1})):x("",!0)])])])])])):x("",!0),l(Ue,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:i(()=>[...e[32]||(e[32]=[r(" 위치와 라벨번호를 확인 후 해당 도서를 가져가주세요. ",-1)])]),_:1})]),_:1}),l(pe,{class:"rent-confirm-actions"},{default:i(()=>[l(_e),l(n,{variant:"text",onClick:de},{default:i(()=>[...e[34]||(e[34]=[r(" 취소 ",-1)])]),_:1}),l(n,{color:"primary",variant:"flat",loading:o(A),onClick:ct},{default:i(()=>[...e[35]||(e[35]=[r(" 대여하기 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ye,{modelValue:o(K),"onUpdate:modelValue":e[8]||(e[8]=s=>q(K)?K.value=s:null),"max-width":"500"},{default:i(()=>[l(ke,{class:"rent-confirm-card"},{default:i(()=>[l(be,{class:"rent-confirm-title"},{default:i(()=>[...e[36]||(e[36]=[r(" 대여 확인 ",-1)])]),_:1}),l(fe,{class:"rent-confirm-content"},{default:i(()=>[a("div",No,[e[37]||(e[37]=a("p",null,"아래 도서들을 대여하시겠습니까?",-1)),o(se)?x("",!0):(u(),m("p",Vo," 관리자 승인 후 대여가 완료됩니다. "))]),a("div",Bo,[(u(!0),m(W,null,he(o(y),(s,Z)=>(u(),m("div",{key:Z,class:"rent-book-card"},[a("div",Lo,[s.book?.image?(u(),m("img",{key:0,src:s.book.image,alt:s.book?.title,class:"rent-book-thumbnail"},null,8,So)):(u(),m("div",Eo,[...e[38]||(e[38]=[a("span",null,"NO IMAGE",-1)])])),a("div",Io,[a("div",qo,v(s.book?.title),1),s.book?.author?(u(),m("div",Ao,[e[39]||(e[39]=a("strong",null,"저자:",-1)),r(" "+v(s.book.author),1)])):x("",!0),s.book?.publisher?(u(),m("div",Po,[e[40]||(e[40]=a("strong",null,"출판사:",-1)),r(" "+v(s.book.publisher),1)])):x("",!0),a("div",Mo,[a("span",To,[l(f,{size:"x-small",class:"mr-1"},{default:i(()=>[...e[41]||(e[41]=[r("mdi-label",-1)])]),_:1}),r(" "+v(s.labelNumber),1)]),a("span",$o,[l(f,{size:"x-small",class:"mr-1"},{default:i(()=>[...e[42]||(e[42]=[r("mdi-map-marker",-1)])]),_:1}),a("span",zo,v(o(Ce)(s.location)),1),o(ge)(o(_),s.location)?(u(),F(f,{key:0,size:"x-small",class:"ml-1 location-info-icon",onClick:we(Oo=>ze(s.location),["stop"])},{default:i(()=>[...e[43]||(e[43]=[r(" mdi-information-outline ",-1)])]),_:1},8,["onClick"])):x("",!0)])])])])]))),128))]),l(Ue,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:i(()=>[...e[44]||(e[44]=[r(" 위치와 라벨번호를 확인 후 해당 도서를 가져가주세요. ",-1)])]),_:1})]),_:1}),l(pe,{class:"rent-confirm-actions"},{default:i(()=>[l(_e),l(n,{variant:"text",onClick:ve},{default:i(()=>[...e[45]||(e[45]=[r(" 취소 ",-1)])]),_:1}),l(n,{color:"primary",variant:"flat",loading:o(A),onClick:dt},{default:i(()=>[r(v(o(se)?"대여하기":"대여 신청"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(vt,{modelValue:o(Y),"onUpdate:modelValue":e[9]||(e[9]=s=>q(Y)?Y.value=s:null),center:o(_),location:o(L),"label-number":o(g)},null,8,["modelValue","center","location","label-number"])]),_:1})}}},es=bt(Go,[["__scopeId","data-v-b78e92b7"]]);export{es as default};
