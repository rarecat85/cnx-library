const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BJkzlftJ.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as Ut,N as Ot,a as zt,D as Pt,r as v,k as L,o as He,e as Tt,_ as de,Y as Qe,O as M,L as d,g as B,H as c,K as r,P as o,I as l,J as b,Q as q,G as _,M as u,T as H,W as Ne,X as Ee,U as je,S as Re}from"./BJkzlftJ.js";import{g as Ft,C as Mt,_ as Gt}from"./BTswpTsK.js";import{_ as Wt}from"./CesQDRFt.js";import{u as Ht,g as Xe,C as Qt,c as Le,f as $e,p as jt}from"./BYCp1ac4.js";import{u as Xt}from"./DwvQtKbI.js";import{u as Jt}from"./DMynmy9D.js";import"./CwD3Ss_Z.js";const Kt={class:"books-admin-page"},Yt={class:"center-header mb-6"},Zt={class:"center-header-inner"},eo={class:"page-title mb-0"},to={class:"registered-books-section"},oo={class:"registered-books-header mb-0"},so={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},lo={class:"text-body-1"},ao={class:"text-body-2 text-medium-emphasis"},no={class:"d-flex align-center registered-search-group"},ro={class:"d-flex align-center justify-space-between flex-wrap gap-4 mt-4"},io={class:"d-flex action-buttons"},uo={key:0,class:"text-center py-8"},co={key:1,class:"registered-books-section"},vo={class:"registered-books-grid"},mo=["onClick"],po=["src","alt"],fo={key:1,class:"book-thumbnail-placeholder"},go={class:"book-meta"},yo={class:"book-title"},bo={key:0,class:"book-author"},_o={key:1,class:"book-publisher"},ho={class:"book-count"},ko={class:"book-copies-list"},wo=["onClick"],Co={class:"copy-content"},Do={class:"copy-row-top"},Bo={class:"copy-status"},xo={key:4,class:"copy-user-info"},Vo=["onClick"],No={class:"copy-info-row"},Eo={class:"copy-label-number"},Ro={class:"copy-location"},Lo={class:"copy-actions"},$o={key:0,class:"pagination-section"},Io={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},qo={key:0},So={key:1},Ao={class:"drawer-content"},Uo={class:"rent-dialog-content"},Oo={class:"mb-4 text-body-2 text-medium-emphasis"},zo={class:"rent-dialog-actions"},Po={class:"rent-dialog-content"},To={class:"mb-4 text-body-2 text-medium-emphasis"},Fo={class:"return-book-list"},Mo={class:"return-book-info"},Go=["src","alt"],Wo={key:1,class:"return-book-thumbnail no-image-placeholder"},Ho={class:"return-book-meta"},Qo={class:"return-book-title"},jo={class:"return-book-details"},Xo={class:"detail-item"},Jo={class:"detail-item"},Ko={key:0,class:"return-book-renter"},Yo={class:"rent-dialog-actions"},Zo={key:0,class:"book-info-preview mb-4"},es={class:"book-info-preview-inner"},ts=["src","alt"],os={key:1,class:"book-thumbnail-placeholder"},ss={class:"book-meta"},ls={class:"book-title"},as={class:"book-current-label"},ns={class:"book-current-location"},rs={class:"label-number-inputs mb-3"},Ie=10,fe=5,is={__name:"index",setup(us){const{user:qe}=Xt(),{getBooksByCenter:Je,rentBook:Se,deleteBook:Ke,updateBookInfo:Ye,checkLabelNumberExists:Ze,getCategories:et,calculateBookStatus:A}=Ht(),{confirm:Ae,alert:x}=Ot(),{$firebaseFirestore:tt}=zt(),U=tt,ne=Pt("navigationDrawer",()=>!1),Ue=v(280),ge=[...Mt],C=v(""),ot=v(""),Q=v([]),ye=v(!1),z=v(""),S=v("label"),ee=v(""),re=v("asc"),st=[{title:"오름차순",value:"asc"},{title:"내림차순",value:"desc"}],lt=[{title:"라벨번호순",value:"label"},{title:"대여중도서",value:"rented"},{title:"연체중도서",value:"overdue"},{title:"대여신청도서",value:"requested"},{title:"위치별로 보기",value:"location"}],ce=t=>{if(!t)return 9999;const e=t.split("_");if(e.length<2)return 9999;const a=e[1];return parseInt(a.slice(-4))||9999},y=v([]),ve=v(!1),j=v(!1),ie=v(1),be=v({}),_e=v({}),te=v(!1),G=v([]),he=v(!1),P=v(""),T=v(""),O=v(""),oe=v(!1),F=v([]),ke=v(!1),ue=v(!1),V=v(null),we=v(!1),Ce=v([]),De=v(!1),X=v(""),g=v({category:"",fourDigits:"",location:""}),at=L(()=>Xe()),nt=L(()=>[{title:"전체",value:""},...Xe()]),rt=L(()=>Qt[C.value]||"1");L(()=>!g.value.category||!g.value.fourDigits?"":Le(g.value.category,C.value,g.value.fourDigits));const Oe=L(()=>g.value.category&&g.value.fourDigits&&g.value.fourDigits.length===4&&/^\d{4}$/.test(g.value.fourDigits)&&g.value.location&&!X.value);He(()=>{const t=()=>{Ue.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),Tt(()=>{window.removeEventListener("resize",t)})});const it=async()=>{if(!qe.value||!U)return"";try{const{doc:t,getDoc:e}=await de(async()=>{const{doc:i,getDoc:f}=await import("./BJkzlftJ.js").then(p=>p.aE);return{doc:i,getDoc:f}},__vite__mapDeps([0,1]),import.meta.url),a=t(U,"users",qe.value.uid),n=await e(a);if(n.exists())return n.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};He(async()=>{const t=await it();ot.value=t,C.value=t?Ft(t):ge[0],await J()});const ut=async()=>{y.value=[],await J()},J=async()=>{try{ye.value=!0;const t=await Je(C.value);Q.value=t,await dt(t)}catch(t){console.error("등록된 도서 로드 오류:",t),Q.value=[]}finally{ye.value=!1}},dt=async t=>{if(!U)return;const{doc:e,getDoc:a}=await de(async()=>{const{doc:p,getDoc:h}=await import("./BJkzlftJ.js").then(D=>D.aE);return{doc:p,getDoc:h}},__vite__mapDeps([0,1]),import.meta.url),n=[...new Set(t.filter(p=>p.rentedBy).map(p=>p.rentedBy))],i=[...new Set(t.filter(p=>p.requestedBy).map(p=>p.requestedBy))],f=[...new Set([...n,...i])];for(const p of f)if(!(be.value[p]&&_e.value[p]))try{const h=e(U,"users",p),D=await a(h);if(D.exists()){const N=D.data(),$=(N.email||"").split("@")[0]||"",E=N.name||"",k=`${N.workplace||""} ${E}(${$})`;be.value[p]=k,_e.value[p]=k}}catch(h){console.error("대여자/신청자 정보 로드 오류:",h)}},me=t=>t.rentedBy&&be.value[t.rentedBy]||"",Be=t=>t.requestedBy&&_e.value[t.requestedBy]||"",ct=()=>{},ze=L(()=>{const t=new Map;for(const e of Q.value){const a=e.isbn13||e.isbn||e.id;t.has(a)||t.set(a,{isbn:a,title:e.title,author:e.author,publisher:e.publisher,image:e.image,copies:[],totalCount:0,availableCount:0,rentedCount:0,requestedCount:0,locations:[]});const n=t.get(a);n.copies.push(e),n.totalCount++;const i=A(e);i?i==="rented"||i==="overdue"?n.rentedCount++:i==="requested"&&n.requestedCount++:n.availableCount++,e.location&&!n.locations.includes(e.location)&&n.locations.push(e.location)}for(const e of t.values())e.copies.sort((a,n)=>{const i=a.labelNumber||"",f=n.labelNumber||"";return i.localeCompare(f,"ko")});return Array.from(t.values())}),se=L(()=>{let t=[...ze.value];if(z.value.trim()){const e=z.value.toLowerCase();t=t.filter(a=>{const n=(a.title||"").toLowerCase(),i=(a.author||"").toLowerCase(),f=(a.publisher||"").toLowerCase();return n.includes(e)||i.includes(e)||f.includes(e)?!0:a.copies.some(p=>(p.labelNumber||"").toLowerCase().includes(e))})}return S.value==="label"?t.sort((e,a)=>{const n=ce(e.copies[0]?.labelNumber),i=ce(a.copies[0]?.labelNumber);return re.value==="asc"?n-i:i-n}):S.value==="rented"?t=t.filter(e=>e.rentedCount>0):S.value==="overdue"?t=t.filter(e=>e.copies.some(a=>A(a)==="overdue")):S.value==="requested"?t=t.filter(e=>e.requestedCount>0):S.value==="location"&&(ee.value&&(t=t.filter(e=>e.copies.some(a=>a.location===ee.value))),t.sort((e,a)=>{const n=ce(e.copies[0]?.labelNumber),i=ce(a.copies[0]?.labelNumber);return re.value==="asc"?n-i:i-n})),t}),vt=L(()=>{const t=(ie.value-1)*Ie,e=t+Ie;return se.value.slice(t,e)}),Pe=L(()=>Math.ceil(se.value.length/Ie));Qe([()=>z.value,()=>S.value,()=>ee.value],()=>{ie.value=1});const mt=L(()=>Q.value.length),pt=L(()=>ze.value.length),ft=L(()=>Q.value.filter(t=>A(t)==="rented").length),gt=L(()=>Q.value.filter(t=>A(t)==="overdue").length),yt=L(()=>Q.value.filter(t=>A(t)==="requested").length),le=t=>A(t),K=t=>y.value.some(e=>e.id===t.id),Te=t=>t.copies.every(e=>K(e)),bt=t=>{const e=t.copies.filter(a=>K(a)).length;return e>0&&e<t.copies.length},_t=(t,e)=>{e?K(t)||y.value.push(t):y.value=y.value.filter(a=>a.id!==t.id),xe()},ht=(t,e)=>{if(e)for(const a of t.copies)K(a)||y.value.push(a);else{const a=t.copies.map(n=>n.id);y.value=y.value.filter(n=>!a.includes(n.id))}xe()},kt=t=>{const e=Te(t);ht(t,!e)},wt=t=>{_t(t,!K(t))},Ct=t=>{t?y.value=se.value.flatMap(e=>e.copies):y.value=[]},xe=()=>{const t=se.value.flatMap(e=>e.copies);ve.value=t.length>0&&t.every(e=>K(e))};Qe(()=>se.value,()=>{xe()});const Dt=async()=>{try{De.value=!0;const t=await et(C.value);Ce.value=t}catch(t){console.error("카테고리 로드 오류:",t),Ce.value=[]}finally{De.value=!1}},Bt=t=>{const e=t.target.value.replace(/\D/g,"").slice(0,4);g.value.fourDigits=e,X.value=""},xt=async()=>{if(!g.value.category||!g.value.fourDigits||g.value.fourDigits.length!==4)return;const t=Le(g.value.category,C.value,g.value.fourDigits);if(V.value&&t===V.value.labelNumber){X.value="";return}try{await Ze(t,C.value)?X.value="이미 사용중인 라벨번호입니다.":X.value=""}catch(e){console.error("라벨번호 중복 체크 오류:",e)}},Vt=async t=>{V.value=t;const e=jt(t.labelNumber);g.value={category:t.category||e?.category||"",fourDigits:e?.fourDigits||"",location:t.location||"구매칸"},X.value="",await Dt(),ue.value=!0},Fe=()=>{ue.value=!1,V.value=null},Nt=async()=>{if(!(!V.value||!Oe.value))try{we.value=!0;const t=Le(g.value.category,C.value,g.value.fourDigits);await Ye(V.value.labelNumber||V.value.id.split("_")[0],C.value,{category:g.value.category,labelNumber:t,location:g.value.location}),Fe(),await J(),await x("도서 정보가 수정되었습니다.",{type:"success"})}catch(t){console.error("도서 정보 수정 오류:",t),await x(t.message||"도서 정보 수정에 실패했습니다.",{type:"error"})}finally{we.value=!1}},Et=async()=>{if(y.value.length===0)return;const t=[],e=[];for(const n of y.value){const i=A(n);i==="rented"||i==="overdue"?e.push({book:n,reason:"대여중"}):i==="requested"?e.push({book:n,reason:"대여신청중"}):t.push(n)}if(t.length===0){const n=e.map(i=>`• ${i.book.title} (${i.reason})`).join(`
`);await x(`선택한 도서를 삭제할 수 없습니다.

${n}

대여중/대여신청중인 도서는 반납 또는 신청 취소 후 삭제해주세요.`,{type:"warning"});return}let a=`선택한 ${y.value.length}권 중 ${t.length}권의 도서를 삭제하시겠습니까?`;if(e.length>0){const n=e.map(i=>`• ${i.book.title} (${i.reason})`).join(`
`);a+=`

⚠️ 다음 도서는 삭제할 수 없습니다:
${n}`}if(await Ae(a))try{j.value=!0;const n=t.map(i=>{const f=i.labelNumber||i.id.split("_")[0];return Ke(f,C.value)});await Promise.all(n),y.value=[],await J(),e.length>0?await x(`${t.length}권의 도서가 삭제되었습니다.
(${e.length}권은 대여중/대여신청중으로 삭제되지 않았습니다.)`,{type:"success"}):await x(`${t.length}권의 도서가 삭제되었습니다.`,{type:"success"})}catch(n){console.error("도서 삭제 오류:",n),await x("도서 삭제에 실패했습니다.",{type:"error"})}finally{j.value=!1}},Rt=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const a=A(e);return a!=="rented"&&a!=="overdue"});if(t.length===0){await x("선택한 도서가 모두 대여중입니다.",{type:"warning"});return}G.value=t,P.value=C.value,T.value="",O.value="",te.value=!0},Me=async t=>{if(!U||!t)return 0;try{const{collection:e,query:a,where:n,getDocs:i}=await de(async()=>{const{collection:N,query:m,where:$,getDocs:E}=await import("./BJkzlftJ.js").then(R=>R.aE);return{collection:N,query:m,where:$,getDocs:E}},__vite__mapDeps([0,1]),import.meta.url),f=e(U,"books"),p=a(f,n("rentedBy","==",t)),h=await i(p);let D=0;return h.forEach(N=>{const m=N.data();(m.status==="rented"||m.status==="overdue")&&D++}),D}catch(e){return console.error("대여 권수 조회 오류:",e),0}},Lt=async t=>{if(A(t)==="requested"&&t.requestedBy){if(await Me(t.requestedBy)>=fe){await x(`신청자가 이미 ${fe}권을 대여중입니다.
반납 후 대여 처리해주세요.`,{type:"warning"});return}if(!await Ae(`신청자 정보로 대여 처리하시겠습니까?

도서: ${t.title}
라벨번호: ${t.labelNumber||"-"}
신청자: ${Be(t)}`))return;try{j.value=!0;const n=t.labelNumber||t.id.split("_")[0];await Se(n,C.value,t.requestedBy,t.isbn),await J(),await x("대여 처리가 완료되었습니다.",{type:"success"})}catch(n){console.error("대여 처리 오류:",n),await x(n.message||"대여 처리에 실패했습니다.",{type:"error"})}finally{j.value=!1}return}G.value=[t],P.value=C.value,T.value="",O.value="",te.value=!0},Ge=()=>{te.value=!1,G.value=[],P.value="",T.value="",O.value=""},$t=async()=>{if(!(!P.value||!T.value))try{he.value=!0,O.value="";const{collection:t,query:e,where:a,getDocs:n}=await de(async()=>{const{collection:k,query:I,where:W,getDocs:Y}=await import("./BJkzlftJ.js").then(Z=>Z.aE);return{collection:k,query:I,where:W,getDocs:Y}},__vite__mapDeps([0,1]),import.meta.url),i=t(U,"users"),f=e(i,a("email","==",T.value)),p=await n(f);if(p.empty){O.value="해당 이메일의 사용자를 찾을 수 없습니다.";return}const h=p.docs[0].data();if(h.center!==P.value){O.value=`해당 사용자는 ${h.center} 소속입니다.`;return}const N=p.docs[0].id,m=await Me(N),$=G.value.length,E=fe-m;if(E<=0){O.value=`해당 사용자가 이미 ${fe}권을 대여중입니다.`;return}if($>E){O.value=`해당 사용자는 ${E}권까지만 추가 대여 가능합니다. (현재 ${m}권 대여중)`;return}for(const k of G.value){const I=k.labelNumber||k.id.split("_")[0];await Se(I,C.value,N,k.isbn)}const R=G.value.length;await J(),y.value=y.value.filter(k=>!G.value.some(I=>I.id===k.id)),Ge(),await x(`${R}권의 도서가 대여 처리되었습니다.`,{type:"success"})}catch(t){console.error("도서 대여 오류:",t),O.value=t.message||"대여 처리에 실패했습니다."}finally{he.value=!1}},It=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const a=A(e);return a==="rented"||a==="overdue"});if(t.length===0){await x("선택한 도서 중 대여중인 도서가 없습니다.",{type:"warning"});return}F.value=t,oe.value=!0},We=()=>{oe.value=!1,F.value=[]},qt=async()=>{if(F.value.length!==0)try{ke.value=!0;const{doc:t,updateDoc:e,collection:a,addDoc:n,query:i,where:f,getDocs:p,serverTimestamp:h,deleteField:D}=await de(async()=>{const{doc:m,updateDoc:$,collection:E,addDoc:R,query:k,where:I,getDocs:W,serverTimestamp:Y,deleteField:Z}=await import("./BJkzlftJ.js").then(ae=>ae.aE);return{doc:m,updateDoc:$,collection:E,addDoc:R,query:k,where:I,getDocs:W,serverTimestamp:Y,deleteField:Z}},__vite__mapDeps([0,1]),import.meta.url);for(const m of F.value){const $=m.labelNumber||m.id.split("_")[0],E=m.id,R=m.rentedBy,k=m.rentedAt,I=t(U,"books",E);if(await e(I,{status:"available",rentedBy:D(),rentedAt:D(),expectedReturnDate:D()}),R){const W=a(U,"rentalHistory"),Y=m.isbn13||m.isbn||"",Z=i(W,f("userId","==",R),f("isbn13","==",Y)),ae=await p(Z);if(ae.empty)await n(W,{bookId:E,labelNumber:$,isbn13:m.isbn13||"",isbn:m.isbn||"",title:m.title||"",author:m.author||"",publisher:m.publisher||"",cover:m.cover||m.image||"",center:m.center||"",userId:R,rentedAt:k,returnedAt:h(),rentCount:1});else{const pe=ae.docs[0],s=pe.data();await e(t(U,"rentalHistory",pe.id),{rentedAt:k,returnedAt:h(),rentCount:(s.rentCount||1)+1})}}}const N=F.value.length;y.value=y.value.filter(m=>!F.value.some($=>$.id===m.id)),We(),await J(),await x(`${N}권의 도서가 반납 처리되었습니다.`,{type:"success"})}catch(t){console.error("도서 반납 오류:",t),await x("도서 반납에 실패했습니다.",{type:"error"})}finally{ke.value=!1}},St=async t=>{const e=A(t);if(e!=="rented"&&e!=="overdue"){await x("대여중인 도서가 아닙니다.",{type:"warning"});return}F.value=[t],oe.value=!0};return Jt({title:"도서 관리 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록 관리"}]}),(t,e)=>{const a=B("v-select"),n=B("v-text-field"),i=B("v-checkbox"),f=B("v-btn"),p=B("v-progress-circular"),h=B("v-chip"),D=B("v-icon"),N=B("v-pagination"),m=Gt,$=Wt,E=B("v-navigation-drawer"),R=B("v-spacer"),k=B("v-card"),I=B("v-dialog"),W=B("v-card-title"),Y=B("v-autocomplete"),Z=B("v-card-text"),ae=B("v-card-actions"),pe=B("v-app");return c(),M(pe,null,{default:d(()=>[r(m,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[7]||(e[7]=s=>ne.value=!o(ne))},{default:d(()=>[l("div",Kt,[l("div",Yt,[l("div",Zt,[l("h1",eo,b(o(C))+" 도서 관리 ",1),r(a,{modelValue:o(C),"onUpdate:modelValue":[e[0]||(e[0]=s=>q(C)?C.value=s:null),ut],items:ge,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),l("div",to,[l("div",oo,[l("div",so,[l("div",lo,[e[17]||(e[17]=u(" 총 ",-1)),l("strong",null,b(o(mt)),1),u("권 ("+b(o(pt))+"종) ",1)]),l("div",ao,[e[18]||(e[18]=u(" 대여중 ",-1)),l("strong",null,b(o(ft)),1),e[19]||(e[19]=u("권, 연체중 ",-1)),l("strong",null,b(o(gt)),1),e[20]||(e[20]=u("권, 대여신청 ",-1)),l("strong",null,b(o(yt)),1),e[21]||(e[21]=u("권 ",-1))])]),l("div",no,[r(n,{modelValue:o(z),"onUpdate:modelValue":[e[1]||(e[1]=s=>q(z)?z.value=s:null),ct],label:"도서/라벨번호 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"registered-search-input"},null,8,["modelValue"]),r(a,{modelValue:o(S),"onUpdate:modelValue":e[2]||(e[2]=s=>q(S)?S.value=s:null),items:lt,label:"정렬",variant:"outlined",density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),l("div",ro,[r(i,{modelValue:o(ve),"onUpdate:modelValue":[e[3]||(e[3]=s=>q(ve)?ve.value=s:null),Ct],label:"전체선택","hide-details":"",class:"select-all-checkbox"},null,8,["modelValue"]),l("div",io,[o(S)==="label"||o(S)==="location"?(c(),M(a,{key:0,modelValue:o(re),"onUpdate:modelValue":e[4]||(e[4]=s=>q(re)?re.value=s:null),items:st,label:"정렬",variant:"outlined",density:"compact","hide-details":"",class:"sort-order-select"},null,8,["modelValue"])):H("",!0),o(S)==="location"?(c(),M(a,{key:1,modelValue:o(ee),"onUpdate:modelValue":e[5]||(e[5]=s=>q(ee)?ee.value=s:null),items:o(nt),label:"위치",variant:"outlined",density:"compact","hide-details":"",class:"location-filter-select"},null,8,["modelValue","items"])):H("",!0),r(f,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(j),onClick:Et},{default:d(()=>[...e[22]||(e[22]=[u(" 도서 삭제 ",-1)])]),_:1},8,["disabled","loading"]),r(f,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(j),onClick:Rt},{default:d(()=>[...e[23]||(e[23]=[u(" 대여 처리 ",-1)])]),_:1},8,["disabled","loading"]),r(f,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(j),onClick:It},{default:d(()=>[...e[24]||(e[24]=[u(" 반납 처리 ",-1)])]),_:1},8,["disabled","loading"])])])]),o(ye)?(c(),_("div",uo,[r(p,{indeterminate:"",color:"primary"})])):o(se).length>0?(c(),_("div",co,[l("div",vo,[(c(!0),_(Ne,null,Ee(o(vt),(s,At)=>(c(),_("div",{key:`group-${At}`,class:je(["book-card",{"book-card-selected":Te(s)||bt(s)}])},[l("div",{class:"book-card-header",onClick:w=>kt(s)},[s.image?(c(),_("img",{key:0,src:s.image,alt:s.title,class:"book-thumbnail"},null,8,po)):(c(),_("div",fo,[...e[25]||(e[25]=[l("span",null,"NO IMAGE",-1)])])),l("div",go,[l("div",yo,b(s.title),1),s.author?(c(),_("div",bo,[e[26]||(e[26]=l("strong",null,"저자:",-1)),u(" "+b(s.author),1)])):H("",!0),s.publisher?(c(),_("div",_o,[e[27]||(e[27]=l("strong",null,"출판사:",-1)),u(" "+b(s.publisher),1)])):H("",!0),l("div",ho," 등록 "+b(s.totalCount)+"권 ",1)])],8,mo),l("div",ko,[(c(!0),_(Ne,null,Ee(s.copies,w=>(c(),_("div",{key:w.id,class:je(["book-copy-item",{selected:K(w)}]),onClick:Ve=>wt(w)},[l("div",Co,[l("div",Do,[l("div",Bo,[le(w)==="rented"?(c(),M(h,{key:0,size:"x-small",color:"primary",variant:"flat"},{default:d(()=>[...e[28]||(e[28]=[u(" 대여중 ",-1)])]),_:1})):le(w)==="overdue"?(c(),M(h,{key:1,size:"x-small",color:"error",variant:"flat"},{default:d(()=>[...e[29]||(e[29]=[u(" 연체중 ",-1)])]),_:1})):le(w)==="requested"?(c(),M(h,{key:2,size:"x-small",color:"warning",variant:"flat"},{default:d(()=>[...e[30]||(e[30]=[u(" 대여신청 ",-1)])]),_:1})):(c(),M(h,{key:3,size:"x-small",color:"success",variant:"outlined"},{default:d(()=>[...e[31]||(e[31]=[u(" 대여가능 ",-1)])]),_:1})),me(w)||Be(w)?(c(),_("span",xo,b(me(w)||Be(w)),1)):H("",!0)]),l("a",{href:"#",class:"copy-edit-link",onClick:Re(Ve=>Vt(w),["prevent","stop"])}," 정보수정 ",8,Vo)]),l("div",No,[l("span",Eo,b(w.labelNumber||"라벨없음"),1),e[33]||(e[33]=l("span",{class:"copy-divider"},"|",-1)),l("span",Ro,[r(D,{size:"small",class:"mr-1"},{default:d(()=>[...e[32]||(e[32]=[u(" mdi-map-marker ",-1)])]),_:1}),u(" "+b(o($e)(w.location)||"위치없음"),1)])]),l("div",Lo,[le(w)==="rented"||le(w)==="overdue"?(c(),M(f,{key:0,color:"primary",size:"small",variant:"flat",onClick:Re(Ve=>St(w),["stop"])},{default:d(()=>[...e[34]||(e[34]=[u(" 반납처리 ",-1)])]),_:1},8,["onClick"])):(c(),M(f,{key:1,color:"primary",size:"small",variant:"flat",onClick:Re(Ve=>Lt(w),["stop"])},{default:d(()=>[u(b(le(w)==="requested"?"대여승인":"대여처리"),1)]),_:2},1032,["onClick"]))])])],10,wo))),128))])],2))),128))]),o(Pe)>1?(c(),_("div",$o,[r(N,{modelValue:o(ie),"onUpdate:modelValue":e[6]||(e[6]=s=>q(ie)?ie.value=s:null),length:o(Pe),"total-visible":5,density:"compact",size:"small",class:"pagination"},null,8,["modelValue","length"])])):H("",!0)])):(c(),_("div",Io,[r(D,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:d(()=>[u(b(o(z)?"mdi-book-search-outline":"mdi-book-off-outline"),1)]),_:1}),o(z)?(c(),_("p",qo,[e[35]||(e[35]=u(" '",-1)),l("strong",null,b(o(z)),1),e[36]||(e[36]=u("'에 대한 검색 결과가 없습니다. ",-1))])):(c(),_("p",So," 등록된 도서가 없습니다. "))]))])])]),_:1}),r(E,{modelValue:o(ne),"onUpdate:modelValue":e[8]||(e[8]=s=>q(ne)?ne.value=s:null),location:"right",temporary:"",width:o(Ue),class:"side-navigation"},{default:d(()=>[l("div",Ao,[r($)])]),_:1},8,["modelValue","width"]),r(I,{modelValue:o(te),"onUpdate:modelValue":e[11]||(e[11]=s=>q(te)?te.value=s:null),"max-width":"400",persistent:""},{default:d(()=>[r(k,{class:"rent-dialog-card"},{default:d(()=>[e[39]||(e[39]=l("div",{class:"rent-dialog-title text-h6"}," 대여자 정보 입력 ",-1)),l("div",Uo,[l("div",Oo," 대여 처리할 도서: "+b(o(G).length)+"권 ",1),r(a,{modelValue:o(P),"onUpdate:modelValue":e[9]||(e[9]=s=>q(P)?P.value=s:null),items:ge,label:"센터",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),r(n,{modelValue:o(T),"onUpdate:modelValue":e[10]||(e[10]=s=>q(T)?T.value=s:null),label:"이메일",variant:"outlined",density:"comfortable",placeholder:"example@email.com","error-messages":o(O)},null,8,["modelValue","error-messages"])]),l("div",zo,[r(R),r(f,{variant:"text",onClick:Ge},{default:d(()=>[...e[37]||(e[37]=[u(" 취소 ",-1)])]),_:1}),r(f,{color:"primary",variant:"flat",loading:o(he),disabled:!o(P)||!o(T),onClick:$t},{default:d(()=>[...e[38]||(e[38]=[u(" 대여 처리 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1},8,["modelValue"]),r(I,{modelValue:o(oe),"onUpdate:modelValue":e[12]||(e[12]=s=>q(oe)?oe.value=s:null),"max-width":"450",persistent:""},{default:d(()=>[r(k,{class:"rent-dialog-card"},{default:d(()=>[e[44]||(e[44]=l("div",{class:"rent-dialog-title text-h6"}," 반납 확인 ",-1)),l("div",Po,[l("div",To," 반납 처리할 도서: "+b(o(F).length)+"권 ",1),l("div",Fo,[(c(!0),_(Ne,null,Ee(o(F),s=>(c(),_("div",{key:s.id,class:"return-book-item"},[l("div",Mo,[s.image?(c(),_("img",{key:0,src:s.image,alt:s.title,class:"return-book-thumbnail"},null,8,Go)):(c(),_("div",Wo," NO IMAGE ")),l("div",Ho,[l("div",Qo,b(s.title),1),l("div",jo,[l("span",Xo,[r(D,{size:"x-small",class:"mr-1"},{default:d(()=>[...e[40]||(e[40]=[u("mdi-label",-1)])]),_:1}),u(" "+b(s.labelNumber||"라벨없음"),1)]),l("span",Jo,[r(D,{size:"x-small",class:"mr-1"},{default:d(()=>[...e[41]||(e[41]=[u("mdi-map-marker",-1)])]),_:1}),u(" "+b(o($e)(s.location)||"위치없음"),1)])]),me(s)?(c(),_("div",Ko," 대여자: "+b(me(s)),1)):H("",!0)])])]))),128))])]),l("div",Yo,[r(R),r(f,{variant:"text",onClick:We},{default:d(()=>[...e[42]||(e[42]=[u(" 취소 ",-1)])]),_:1}),r(f,{color:"primary",variant:"flat",loading:o(ke),onClick:qt},{default:d(()=>[...e[43]||(e[43]=[u(" 반납 처리 ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),r(I,{modelValue:o(ue),"onUpdate:modelValue":e[16]||(e[16]=s=>q(ue)?ue.value=s:null),"max-width":"500",persistent:""},{default:d(()=>[r(k,{class:"edit-dialog-card"},{default:d(()=>[r(W,{class:"edit-dialog-title"},{default:d(()=>[...e[45]||(e[45]=[u(" 도서 정보 수정 ",-1)])]),_:1}),r(Z,{class:"edit-dialog-content"},{default:d(()=>[o(V)?(c(),_("div",Zo,[l("div",es,[o(V).image?(c(),_("img",{key:0,src:o(V).image,alt:o(V).title,class:"book-thumbnail"},null,8,ts)):(c(),_("div",os,[...e[46]||(e[46]=[l("span",null,"No Image",-1)])])),l("div",ss,[l("div",ls,b(o(V).title),1),l("div",as,b(o(V).labelNumber||"라벨없음"),1),l("div",ns,[r(D,{size:"small",class:"mr-1"},{default:d(()=>[...e[47]||(e[47]=[u(" mdi-map-marker ",-1)])]),_:1}),u(" "+b(o($e)(o(V).location)||"위치없음"),1)])])])])):H("",!0),r(Y,{modelValue:o(g).category,"onUpdate:modelValue":e[13]||(e[13]=s=>o(g).category=s),items:o(Ce),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(De),class:"mb-3"},null,8,["modelValue","items","loading"]),l("div",rs,[r(n,{"model-value":o(rt),label:"센터코드",variant:"outlined",density:"comfortable",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),r(n,{modelValue:o(g).fourDigits,"onUpdate:modelValue":e[14]||(e[14]=s=>o(g).fourDigits=s),label:"4자리 번호 *",variant:"outlined",density:"comfortable",maxlength:"4","error-messages":o(X),hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:Bt,onBlur:xt},null,8,["modelValue","error-messages"])]),r(a,{modelValue:o(g).location,"onUpdate:modelValue":e[15]||(e[15]=s=>o(g).location=s),items:o(at),label:"위치 *",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),_:1}),r(ae,{class:"edit-dialog-actions"},{default:d(()=>[r(R),r(f,{variant:"text",onClick:Fe},{default:d(()=>[...e[48]||(e[48]=[u(" 취소 ",-1)])]),_:1}),r(f,{color:"primary",variant:"flat",loading:o(we),disabled:!o(Oe),onClick:Nt},{default:d(()=>[...e[49]||(e[49]=[u(" 저장 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},ys=Ut(is,[["__scopeId","data-v-facfb49b"]]);export{ys as default};
