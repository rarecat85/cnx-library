const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DfmXDDv_.js","./entry.DYRcaxkF.css"])))=>i.map(i=>d[i]);
import{C as v,D as f,E as s,q as r,a as w,_ as p}from"./DfmXDDv_.js";import{u as x}from"./f4TWuyCi.js";const R=v(async(A,D)=>{let e,t;const{isAuthenticated:_,loading:u,user:c}=x(),l=f("auth_state_ready");if(!f("auth_initialized",()=>!1).value&&l.value)try{[e,t]=s(()=>Promise.race([l.value,new Promise(a=>setTimeout(a,5e3))])),await e,t()}catch(a){console.error("인증 상태 확인 대기 중 오류:",a)}if(u.value){const o=Date.now();for(;u.value&&Date.now()-o<5e3;)[e,t]=s(()=>new Promise(n=>setTimeout(n,50))),await e,t()}if(!_.value)return r("/login");const{$firebaseFirestore:h}=w(),m=h;if(!m||!c.value)return r("/");try{const{doc:a,getDoc:o}=([e,t]=s(()=>p(()=>import("./DfmXDDv_.js").then(i=>i.aF),__vite__mapDeps([0,1]),import.meta.url)),e=await e,t(),e),n=a(m,"users",c.value.uid),d=([e,t]=s(()=>o(n)),e=await e,t(),e);if(d.exists()){const i=d.data();if(!(i.role==="admin"||i.role==="manager"))return r("/")}else return r("/")}catch(a){return console.error("관리자 권한 확인 오류:",a),r("/")}});export{R as default};
