const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DLlXfpkj.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as xt,N as Vt,a as Nt,D as Et,r as p,k as A,o as Ae,e as Rt,_ as oe,Y as $t,O as X,L as f,g as E,H as g,K as i,P as s,I as n,J as w,Q as P,G as V,M as d,T as ie,W as Se,X as Ue,U as Te,S as ke}from"./DLlXfpkj.js";import{g as It,C as Lt,_ as qt}from"./BK0Sc5dF.js";import{_ as At}from"./B0MlA_1x.js";import{u as St,g as Fe,C as Ut,c as Ce,f as Oe,p as Tt}from"./BdUiYGlc.js";import{u as Ft}from"./DBz5wePt.js";import{u as Ot}from"./BJliqPKV.js";import"./CJAc1lqJ.js";const zt={class:"books-admin-page"},Pt={class:"center-header mb-6"},Mt={class:"center-header-inner"},Gt={class:"page-title mb-0"},Ht={class:"registered-books-section"},Wt={class:"registered-books-header mb-0"},Qt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},jt={class:"text-body-1"},Xt={class:"text-body-2 text-medium-emphasis"},Jt={class:"d-flex align-center registered-search-group"},Kt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mt-4"},Yt={class:"d-flex action-buttons"},Zt={key:0,class:"text-center py-8"},eo={key:1,class:"registered-books-grid"},to=["onClick"],oo=["src","alt"],so={key:1,class:"book-thumbnail-placeholder"},ao={class:"book-meta"},lo={class:"book-title"},no={key:0,class:"book-author"},ro={key:1,class:"book-publisher"},io={class:"book-count"},uo={class:"book-copies-list"},co=["onClick"],vo={class:"copy-content"},mo={class:"copy-row-top"},po={class:"copy-status"},fo={key:4,class:"copy-user-info"},go=["onClick"],yo={class:"copy-info-row"},bo={class:"copy-label-number"},_o={class:"copy-location"},ho={class:"copy-actions"},wo={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},ko={key:0},Co={key:1},Do={class:"drawer-content"},Bo={class:"rent-dialog-content"},xo={class:"mb-4 text-body-2 text-medium-emphasis"},Vo={class:"rent-dialog-actions"},No={key:0,class:"book-info-preview mb-4"},Eo={class:"book-info-preview-inner"},Ro=["src","alt"],$o={key:1,class:"book-thumbnail-placeholder"},Io={class:"book-meta"},Lo={class:"book-title"},qo={class:"book-current-label"},Ao={class:"book-current-location"},So={class:"label-number-inputs mb-3"},de=5,Uo={__name:"index",setup(To){const{user:De}=Ft(),{getBooksByCenter:ze,rentBook:Be,deleteBook:Pe,updateBookInfo:Me,checkLabelNumberExists:Ge,getCategories:He,calculateBookStatus:S}=St(),{confirm:ue,alert:B}=Vt(),{$firebaseFirestore:We}=Nt(),I=We,se=Et("navigationDrawer",()=>!1),xe=p(280),ve=[...Lt],D=p(""),Qe=p(""),J=p([]),me=p(!1),W=p(""),M=p("label"),ae=p(""),je=[{title:"라벨번호순",value:"label"},{title:"대여중도서",value:"rented"},{title:"연체중도서",value:"overdue"},{title:"대여신청도서",value:"requested"},{title:"위치별로 보기",value:"location"}],Ve=t=>{if(!t)return 9999;const e=t.split("_");if(e.length<2)return 9999;const o=e[1];return parseInt(o.slice(-4))||9999},y=p([]),ce=p(!1),U=p(!1),pe=p({}),fe=p({}),ee=p(!1),Q=p([]),ge=p(!1),G=p(""),H=p(""),z=p(""),le=p(!1),R=p(null),ye=p(!1),be=p([]),_e=p(!1),K=p(""),m=p({category:"",fourDigits:"",location:""}),Xe=A(()=>Fe()),Je=A(()=>[{title:"전체",value:""},...Fe()]),Ke=A(()=>Ut[D.value]||"1");A(()=>!m.value.category||!m.value.fourDigits?"":Ce(m.value.category,D.value,m.value.fourDigits));const Ne=A(()=>m.value.category&&m.value.fourDigits&&m.value.fourDigits.length===4&&/^\d{4}$/.test(m.value.fourDigits)&&m.value.location&&!K.value);Ae(()=>{const t=()=>{xe.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),Rt(()=>{window.removeEventListener("resize",t)})});const Ye=async()=>{if(!De.value||!I)return"";try{const{doc:t,getDoc:e}=await oe(async()=>{const{doc:r,getDoc:v}=await import("./DLlXfpkj.js").then(u=>u.aE);return{doc:r,getDoc:v}},__vite__mapDeps([0,1]),import.meta.url),o=t(I,"users",De.value.uid),a=await e(o);if(a.exists())return a.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Ae(async()=>{const t=await Ye();Qe.value=t,D.value=t?It(t):ve[0],await j()});const Ze=async()=>{y.value=[],await j()},j=async()=>{try{me.value=!0;const t=await ze(D.value);J.value=t,await et(t)}catch(t){console.error("등록된 도서 로드 오류:",t),J.value=[]}finally{me.value=!1}},et=async t=>{if(!I)return;const{doc:e,getDoc:o}=await oe(async()=>{const{doc:u,getDoc:b}=await import("./DLlXfpkj.js").then(x=>x.aE);return{doc:u,getDoc:b}},__vite__mapDeps([0,1]),import.meta.url),a=[...new Set(t.filter(u=>u.rentedBy).map(u=>u.rentedBy))],r=[...new Set(t.filter(u=>u.requestedBy).map(u=>u.requestedBy))],v=[...new Set([...a,...r])];for(const u of v)if(!(pe.value[u]&&fe.value[u]))try{const b=e(I,"users",u),x=await o(b);if(x.exists()){const k=x.data(),$=(k.email||"").split("@")[0]||"",C=k.name||"",h=`${k.workplace||""} ${C}(${$})`;pe.value[u]=h,fe.value[u]=h}}catch(b){console.error("대여자/신청자 정보 로드 오류:",b)}},Ee=t=>t.rentedBy&&pe.value[t.rentedBy]||"",he=t=>t.requestedBy&&fe.value[t.requestedBy]||"",tt=()=>{},Re=A(()=>{const t=new Map;for(const e of J.value){const o=e.isbn13||e.isbn||e.id;t.has(o)||t.set(o,{isbn:o,title:e.title,author:e.author,publisher:e.publisher,image:e.image,copies:[],totalCount:0,availableCount:0,rentedCount:0,requestedCount:0,locations:[]});const a=t.get(o);a.copies.push(e),a.totalCount++;const r=S(e);r?r==="rented"||r==="overdue"?a.rentedCount++:r==="requested"&&a.requestedCount++:a.availableCount++,e.location&&!a.locations.includes(e.location)&&a.locations.push(e.location)}for(const e of t.values())e.copies.sort((o,a)=>{const r=o.labelNumber||"",v=a.labelNumber||"";return r.localeCompare(v,"ko")});return Array.from(t.values())}),ne=A(()=>{let t=[...Re.value];if(W.value.trim()){const e=W.value.toLowerCase();t=t.filter(o=>{const a=(o.title||"").toLowerCase(),r=(o.author||"").toLowerCase(),v=(o.publisher||"").toLowerCase();return a.includes(e)||r.includes(e)||v.includes(e)?!0:o.copies.some(u=>(u.labelNumber||"").toLowerCase().includes(e))})}return M.value==="label"?t.sort((e,o)=>{const a=Ve(e.copies[0]?.labelNumber),r=Ve(o.copies[0]?.labelNumber);return a-r}):M.value==="rented"?t=t.filter(e=>e.rentedCount>0):M.value==="overdue"?t=t.filter(e=>e.copies.some(o=>S(o)==="overdue")):M.value==="requested"?t=t.filter(e=>e.requestedCount>0):M.value==="location"&&ae.value&&(t=t.filter(e=>e.copies.some(o=>o.location===ae.value))),t}),ot=A(()=>J.value.length),st=A(()=>Re.value.length),at=A(()=>J.value.filter(t=>S(t)==="rented").length),lt=A(()=>J.value.filter(t=>S(t)==="overdue").length),nt=A(()=>J.value.filter(t=>S(t)==="requested").length),te=t=>S(t),Y=t=>y.value.some(e=>e.id===t.id),$e=t=>t.copies.every(e=>Y(e)),rt=t=>{const e=t.copies.filter(o=>Y(o)).length;return e>0&&e<t.copies.length},it=(t,e)=>{e?Y(t)||y.value.push(t):y.value=y.value.filter(o=>o.id!==t.id),we()},ut=(t,e)=>{if(e)for(const o of t.copies)Y(o)||y.value.push(o);else{const o=t.copies.map(a=>a.id);y.value=y.value.filter(a=>!o.includes(a.id))}we()},ct=t=>{const e=$e(t);ut(t,!e)},dt=t=>{it(t,!Y(t))},vt=t=>{t?y.value=ne.value.flatMap(e=>e.copies):y.value=[]},we=()=>{const t=ne.value.flatMap(e=>e.copies);ce.value=t.length>0&&t.every(e=>Y(e))};$t(()=>ne.value,()=>{we()});const mt=async()=>{try{_e.value=!0;const t=await He(D.value);be.value=t}catch(t){console.error("카테고리 로드 오류:",t),be.value=[]}finally{_e.value=!1}},pt=t=>{const e=t.target.value.replace(/\D/g,"").slice(0,4);m.value.fourDigits=e,K.value=""},ft=async()=>{if(!m.value.category||!m.value.fourDigits||m.value.fourDigits.length!==4)return;const t=Ce(m.value.category,D.value,m.value.fourDigits);if(R.value&&t===R.value.labelNumber){K.value="";return}try{await Ge(t,D.value)?K.value="이미 사용중인 라벨번호입니다.":K.value=""}catch(e){console.error("라벨번호 중복 체크 오류:",e)}},gt=async t=>{R.value=t;const e=Tt(t.labelNumber);m.value={category:t.category||e?.category||"",fourDigits:e?.fourDigits||"",location:t.location||"구매칸"},K.value="",await mt(),le.value=!0},Ie=()=>{le.value=!1,R.value=null},yt=async()=>{if(!(!R.value||!Ne.value))try{ye.value=!0;const t=Ce(m.value.category,D.value,m.value.fourDigits);await Me(R.value.labelNumber||R.value.id.split("_")[0],D.value,{category:m.value.category,labelNumber:t,location:m.value.location}),Ie(),await j(),await B("도서 정보가 수정되었습니다.",{type:"success"})}catch(t){console.error("도서 정보 수정 오류:",t),await B(t.message||"도서 정보 수정에 실패했습니다.",{type:"error"})}finally{ye.value=!1}},bt=async()=>{if(y.value.length===0)return;const t=[],e=[];for(const a of y.value){const r=S(a);r==="rented"||r==="overdue"?e.push({book:a,reason:"대여중"}):r==="requested"?e.push({book:a,reason:"대여신청중"}):t.push(a)}if(t.length===0){const a=e.map(r=>`• ${r.book.title} (${r.reason})`).join(`
`);await B(`선택한 도서를 삭제할 수 없습니다.

${a}

대여중/대여신청중인 도서는 반납 또는 신청 취소 후 삭제해주세요.`,{type:"warning"});return}let o=`선택한 ${y.value.length}권 중 ${t.length}권의 도서를 삭제하시겠습니까?`;if(e.length>0){const a=e.map(r=>`• ${r.book.title} (${r.reason})`).join(`
`);o+=`

⚠️ 다음 도서는 삭제할 수 없습니다:
${a}`}if(await ue(o))try{U.value=!0;const a=t.map(r=>{const v=r.labelNumber||r.id.split("_")[0];return Pe(v,D.value)});await Promise.all(a),y.value=[],await j(),e.length>0?await B(`${t.length}권의 도서가 삭제되었습니다.
(${e.length}권은 대여중/대여신청중으로 삭제되지 않았습니다.)`,{type:"success"}):await B(`${t.length}권의 도서가 삭제되었습니다.`,{type:"success"})}catch(a){console.error("도서 삭제 오류:",a),await B("도서 삭제에 실패했습니다.",{type:"error"})}finally{U.value=!1}},_t=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const o=S(e);return o!=="rented"&&o!=="overdue"});if(t.length===0){await B("선택한 도서가 모두 대여중입니다.",{type:"warning"});return}Q.value=t,G.value=D.value,H.value="",z.value="",ee.value=!0},Le=async t=>{if(!I||!t)return 0;try{const{collection:e,query:o,where:a,getDocs:r}=await oe(async()=>{const{collection:k,query:c,where:$,getDocs:C}=await import("./DLlXfpkj.js").then(N=>N.aE);return{collection:k,query:c,where:$,getDocs:C}},__vite__mapDeps([0,1]),import.meta.url),v=e(I,"books"),u=o(v,a("rentedBy","==",t)),b=await r(u);let x=0;return b.forEach(k=>{const c=k.data();(c.status==="rented"||c.status==="overdue")&&x++}),x}catch(e){return console.error("대여 권수 조회 오류:",e),0}},ht=async t=>{if(S(t)==="requested"&&t.requestedBy){if(await Le(t.requestedBy)>=de){await B(`신청자가 이미 ${de}권을 대여중입니다.
반납 후 대여 처리해주세요.`,{type:"warning"});return}if(!await ue(`신청자 정보로 대여 처리하시겠습니까?

도서: ${t.title}
라벨번호: ${t.labelNumber||"-"}
신청자: ${he(t)}`))return;try{U.value=!0;const a=t.labelNumber||t.id.split("_")[0];await Be(a,D.value,t.requestedBy,t.isbn),await j(),await B("대여 처리가 완료되었습니다.",{type:"success"})}catch(a){console.error("대여 처리 오류:",a),await B(a.message||"대여 처리에 실패했습니다.",{type:"error"})}finally{U.value=!1}return}Q.value=[t],G.value=D.value,H.value="",z.value="",ee.value=!0},qe=()=>{ee.value=!1,Q.value=[],G.value="",H.value="",z.value=""},wt=async()=>{if(!(!G.value||!H.value))try{ge.value=!0,z.value="";const{collection:t,query:e,where:o,getDocs:a}=await oe(async()=>{const{collection:h,query:L,where:q,getDocs:T}=await import("./DLlXfpkj.js").then(F=>F.aE);return{collection:h,query:L,where:q,getDocs:T}},__vite__mapDeps([0,1]),import.meta.url),r=t(I,"users"),v=e(r,o("email","==",H.value)),u=await a(v);if(u.empty){z.value="해당 이메일의 사용자를 찾을 수 없습니다.";return}const b=u.docs[0].data();if(b.center!==G.value){z.value=`해당 사용자는 ${b.center} 소속입니다.`;return}const k=u.docs[0].id,c=await Le(k),$=Q.value.length,C=de-c;if(C<=0){z.value=`해당 사용자가 이미 ${de}권을 대여중입니다.`;return}if($>C){z.value=`해당 사용자는 ${C}권까지만 추가 대여 가능합니다. (현재 ${c}권 대여중)`;return}for(const h of Q.value){const L=h.labelNumber||h.id.split("_")[0];await Be(L,D.value,k,h.isbn)}const N=Q.value.length;await j(),y.value=y.value.filter(h=>!Q.value.some(L=>L.id===h.id)),qe(),await B(`${N}권의 도서가 대여 처리되었습니다.`,{type:"success"})}catch(t){console.error("도서 대여 오류:",t),z.value=t.message||"대여 처리에 실패했습니다."}finally{ge.value=!1}},kt=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const o=S(e);return o==="rented"||o==="overdue"});if(t.length===0){await B("선택한 도서 중 대여중인 도서가 없습니다.",{type:"warning"});return}if(await ue(`선택한 ${t.length}권의 도서를 반납 처리하시겠습니까?`))try{U.value=!0;const{doc:e,updateDoc:o,collection:a,addDoc:r,query:v,where:u,getDocs:b,serverTimestamp:x,deleteField:k}=await oe(async()=>{const{doc:c,updateDoc:$,collection:C,addDoc:N,query:h,where:L,getDocs:q,serverTimestamp:T,deleteField:F}=await import("./DLlXfpkj.js").then(O=>O.aE);return{doc:c,updateDoc:$,collection:C,addDoc:N,query:h,where:L,getDocs:q,serverTimestamp:T,deleteField:F}},__vite__mapDeps([0,1]),import.meta.url);for(const c of t){const $=c.labelNumber||c.id.split("_")[0],C=c.id,N=c.rentedBy,h=c.rentedAt,L=e(I,"books",C);if(await o(L,{status:"available",rentedBy:k(),rentedAt:k(),expectedReturnDate:k()}),N){const q=a(I,"rentalHistory"),T=c.isbn13||c.isbn||"",F=v(q,u("userId","==",N),u("isbn13","==",T)),O=await b(F);if(O.empty)await r(q,{bookId:C,labelNumber:$,isbn13:c.isbn13||"",isbn:c.isbn||"",title:c.title||"",author:c.author||"",publisher:c.publisher||"",cover:c.cover||c.image||"",center:c.center||"",userId:N,rentedAt:h,returnedAt:x(),rentCount:1});else{const l=O.docs[0],Z=l.data();await o(e(I,"rentalHistory",l.id),{rentedAt:h,returnedAt:x(),rentCount:(Z.rentCount||1)+1})}}}y.value=[],await j(),await B(`${t.length}권의 도서가 반납 처리되었습니다.`,{type:"success"})}catch(e){console.error("도서 반납 오류:",e),await B("도서 반납에 실패했습니다.",{type:"error"})}finally{U.value=!1}},Ct=async t=>{const e=S(t);if(e!=="rented"&&e!=="overdue"){await B("대여중인 도서가 아닙니다.",{type:"warning"});return}if(await ue(`"${t.title}" 도서를 반납 처리하시겠습니까?
라벨번호: ${t.labelNumber||"-"}`))try{U.value=!0;const{doc:o,updateDoc:a,collection:r,addDoc:v,query:u,where:b,getDocs:x,serverTimestamp:k,deleteField:c}=await oe(async()=>{const{doc:q,updateDoc:T,collection:F,addDoc:O,query:l,where:Z,getDocs:_,serverTimestamp:re,deleteField:Dt}=await import("./DLlXfpkj.js").then(Bt=>Bt.aE);return{doc:q,updateDoc:T,collection:F,addDoc:O,query:l,where:Z,getDocs:_,serverTimestamp:re,deleteField:Dt}},__vite__mapDeps([0,1]),import.meta.url),$=t.id,C=t.rentedBy,N=t.rentedAt,h=t.labelNumber||t.id.split("_")[0],L=o(I,"books",$);if(await a(L,{status:"available",rentedBy:c(),rentedAt:c(),expectedReturnDate:c()}),C){const q=r(I,"rentalHistory"),T=t.isbn13||t.isbn||"",F=u(q,b("userId","==",C),b("isbn13","==",T)),O=await x(F);if(O.empty)await v(q,{bookId:$,labelNumber:h,isbn13:t.isbn13||"",isbn:t.isbn||"",title:t.title||"",author:t.author||"",publisher:t.publisher||"",cover:t.cover||t.image||"",center:t.center||"",userId:C,rentedAt:N,returnedAt:k(),rentCount:1});else{const l=O.docs[0],Z=l.data();await a(o(I,"rentalHistory",l.id),{rentedAt:N,returnedAt:k(),rentCount:(Z.rentCount||1)+1})}}await j(),await B("도서가 반납 처리되었습니다.",{type:"success"})}catch(o){console.error("도서 반납 오류:",o),await B("도서 반납에 실패했습니다.",{type:"error"})}finally{U.value=!1}};return Ot({title:"도서 관리 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록 관리"}]}),(t,e)=>{const o=E("v-select"),a=E("v-text-field"),r=E("v-checkbox"),v=E("v-btn"),u=E("v-progress-circular"),b=E("v-chip"),x=E("v-icon"),k=qt,c=At,$=E("v-navigation-drawer"),C=E("v-spacer"),N=E("v-card"),h=E("v-dialog"),L=E("v-card-title"),q=E("v-autocomplete"),T=E("v-card-text"),F=E("v-card-actions"),O=E("v-app");return g(),X(O,null,{default:f(()=>[i(k,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[5]||(e[5]=l=>se.value=!s(se))},{default:f(()=>[n("div",zt,[n("div",Pt,[n("div",Mt,[n("h1",Gt,w(s(D))+" 도서 관리 ",1),i(o,{modelValue:s(D),"onUpdate:modelValue":[e[0]||(e[0]=l=>P(D)?D.value=l:null),Ze],items:ve,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),n("div",Ht,[n("div",Wt,[n("div",Qt,[n("div",jt,[e[14]||(e[14]=d(" 총 ",-1)),n("strong",null,w(s(ot)),1),d("권 ("+w(s(st))+"종) ",1)]),n("div",Xt,[e[15]||(e[15]=d(" 대여중 ",-1)),n("strong",null,w(s(at)),1),e[16]||(e[16]=d("권, 연체중 ",-1)),n("strong",null,w(s(lt)),1),e[17]||(e[17]=d("권, 대여신청 ",-1)),n("strong",null,w(s(nt)),1),e[18]||(e[18]=d("권 ",-1))])]),n("div",Jt,[i(a,{modelValue:s(W),"onUpdate:modelValue":[e[1]||(e[1]=l=>P(W)?W.value=l:null),tt],label:"도서/라벨번호 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"registered-search-input"},null,8,["modelValue"]),i(o,{modelValue:s(M),"onUpdate:modelValue":e[2]||(e[2]=l=>P(M)?M.value=l:null),items:je,label:"정렬",variant:"outlined",density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),n("div",Kt,[i(r,{modelValue:s(ce),"onUpdate:modelValue":[e[3]||(e[3]=l=>P(ce)?ce.value=l:null),vt],label:"전체선택","hide-details":"",class:"select-all-checkbox"},null,8,["modelValue"]),n("div",Yt,[s(M)==="location"?(g(),X(o,{key:0,modelValue:s(ae),"onUpdate:modelValue":e[4]||(e[4]=l=>P(ae)?ae.value=l:null),items:s(Je),label:"위치",variant:"outlined",density:"compact","hide-details":"",class:"location-filter-select"},null,8,["modelValue","items"])):ie("",!0),i(v,{class:"action-btn",variant:"flat",size:"small",disabled:s(y).length===0,loading:s(U),onClick:bt},{default:f(()=>[...e[19]||(e[19]=[d(" 도서 삭제 ",-1)])]),_:1},8,["disabled","loading"]),i(v,{class:"action-btn",variant:"flat",size:"small",disabled:s(y).length===0,loading:s(U),onClick:_t},{default:f(()=>[...e[20]||(e[20]=[d(" 대여 처리 ",-1)])]),_:1},8,["disabled","loading"]),i(v,{class:"action-btn",variant:"flat",size:"small",disabled:s(y).length===0,loading:s(U),onClick:kt},{default:f(()=>[...e[21]||(e[21]=[d(" 반납 처리 ",-1)])]),_:1},8,["disabled","loading"])])])]),s(me)?(g(),V("div",Zt,[i(u,{indeterminate:"",color:"primary"})])):s(ne).length>0?(g(),V("div",eo,[(g(!0),V(Se,null,Ue(s(ne),(l,Z)=>(g(),V("div",{key:`group-${Z}`,class:Te(["book-card",{"book-card-selected":$e(l)||rt(l)}])},[n("div",{class:"book-card-header",onClick:_=>ct(l)},[l.image?(g(),V("img",{key:0,src:l.image,alt:l.title,class:"book-thumbnail"},null,8,oo)):(g(),V("div",so,[...e[22]||(e[22]=[n("span",null,"NO IMAGE",-1)])])),n("div",ao,[n("div",lo,w(l.title),1),l.author?(g(),V("div",no,[e[23]||(e[23]=n("strong",null,"저자:",-1)),d(" "+w(l.author),1)])):ie("",!0),l.publisher?(g(),V("div",ro,[e[24]||(e[24]=n("strong",null,"출판사:",-1)),d(" "+w(l.publisher),1)])):ie("",!0),n("div",io," 등록 "+w(l.totalCount)+"권 ",1)])],8,to),n("div",uo,[(g(!0),V(Se,null,Ue(l.copies,_=>(g(),V("div",{key:_.id,class:Te(["book-copy-item",{selected:Y(_)}]),onClick:re=>dt(_)},[n("div",vo,[n("div",mo,[n("div",po,[te(_)==="rented"?(g(),X(b,{key:0,size:"x-small",color:"primary",variant:"flat"},{default:f(()=>[...e[25]||(e[25]=[d(" 대여중 ",-1)])]),_:1})):te(_)==="overdue"?(g(),X(b,{key:1,size:"x-small",color:"error",variant:"flat"},{default:f(()=>[...e[26]||(e[26]=[d(" 연체중 ",-1)])]),_:1})):te(_)==="requested"?(g(),X(b,{key:2,size:"x-small",color:"warning",variant:"flat"},{default:f(()=>[...e[27]||(e[27]=[d(" 대여신청 ",-1)])]),_:1})):(g(),X(b,{key:3,size:"x-small",color:"success",variant:"outlined"},{default:f(()=>[...e[28]||(e[28]=[d(" 대여가능 ",-1)])]),_:1})),Ee(_)||he(_)?(g(),V("span",fo,w(Ee(_)||he(_)),1)):ie("",!0)]),n("a",{href:"#",class:"copy-edit-link",onClick:ke(re=>gt(_),["prevent","stop"])}," 정보수정 ",8,go)]),n("div",yo,[n("span",bo,w(_.labelNumber||"라벨없음"),1),e[30]||(e[30]=n("span",{class:"copy-divider"},"|",-1)),n("span",_o,[i(x,{size:"small",class:"mr-1"},{default:f(()=>[...e[29]||(e[29]=[d(" mdi-map-marker ",-1)])]),_:1}),d(" "+w(s(Oe)(_.location)||"위치없음"),1)])]),n("div",ho,[te(_)==="rented"||te(_)==="overdue"?(g(),X(v,{key:0,color:"primary",size:"small",variant:"flat",onClick:ke(re=>Ct(_),["stop"])},{default:f(()=>[...e[31]||(e[31]=[d(" 반납처리 ",-1)])]),_:1},8,["onClick"])):(g(),X(v,{key:1,color:"primary",size:"small",variant:"flat",onClick:ke(re=>ht(_),["stop"])},{default:f(()=>[d(w(te(_)==="requested"?"대여승인":"대여처리"),1)]),_:2},1032,["onClick"]))])])],10,co))),128))])],2))),128))])):(g(),V("div",wo,[i(x,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:f(()=>[d(w(s(W)?"mdi-book-search-outline":"mdi-book-off-outline"),1)]),_:1}),s(W)?(g(),V("p",ko,[e[32]||(e[32]=d(" '",-1)),n("strong",null,w(s(W)),1),e[33]||(e[33]=d("'에 대한 검색 결과가 없습니다. ",-1))])):(g(),V("p",Co," 등록된 도서가 없습니다. "))]))])])]),_:1}),i($,{modelValue:s(se),"onUpdate:modelValue":e[6]||(e[6]=l=>P(se)?se.value=l:null),location:"right",temporary:"",width:s(xe),class:"side-navigation"},{default:f(()=>[n("div",Do,[i(c)])]),_:1},8,["modelValue","width"]),i(h,{modelValue:s(ee),"onUpdate:modelValue":e[9]||(e[9]=l=>P(ee)?ee.value=l:null),"max-width":"400",persistent:""},{default:f(()=>[i(N,{class:"rent-dialog-card"},{default:f(()=>[e[36]||(e[36]=n("div",{class:"rent-dialog-title text-h6"}," 대여자 정보 입력 ",-1)),n("div",Bo,[n("div",xo," 대여 처리할 도서: "+w(s(Q).length)+"권 ",1),i(o,{modelValue:s(G),"onUpdate:modelValue":e[7]||(e[7]=l=>P(G)?G.value=l:null),items:ve,label:"센터",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),i(a,{modelValue:s(H),"onUpdate:modelValue":e[8]||(e[8]=l=>P(H)?H.value=l:null),label:"이메일",variant:"outlined",density:"comfortable",placeholder:"example@email.com","error-messages":s(z)},null,8,["modelValue","error-messages"])]),n("div",Vo,[i(C),i(v,{variant:"text",onClick:qe},{default:f(()=>[...e[34]||(e[34]=[d(" 취소 ",-1)])]),_:1}),i(v,{color:"primary",variant:"flat",loading:s(ge),disabled:!s(G)||!s(H),onClick:wt},{default:f(()=>[...e[35]||(e[35]=[d(" 대여 처리 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1},8,["modelValue"]),i(h,{modelValue:s(le),"onUpdate:modelValue":e[13]||(e[13]=l=>P(le)?le.value=l:null),"max-width":"500",persistent:""},{default:f(()=>[i(N,{class:"edit-dialog-card"},{default:f(()=>[i(L,{class:"edit-dialog-title"},{default:f(()=>[...e[37]||(e[37]=[d(" 도서 정보 수정 ",-1)])]),_:1}),i(T,{class:"edit-dialog-content"},{default:f(()=>[s(R)?(g(),V("div",No,[n("div",Eo,[s(R).image?(g(),V("img",{key:0,src:s(R).image,alt:s(R).title,class:"book-thumbnail"},null,8,Ro)):(g(),V("div",$o,[...e[38]||(e[38]=[n("span",null,"No Image",-1)])])),n("div",Io,[n("div",Lo,w(s(R).title),1),n("div",qo,w(s(R).labelNumber||"라벨없음"),1),n("div",Ao,[i(x,{size:"small",class:"mr-1"},{default:f(()=>[...e[39]||(e[39]=[d(" mdi-map-marker ",-1)])]),_:1}),d(" "+w(s(Oe)(s(R).location)||"위치없음"),1)])])])])):ie("",!0),i(q,{modelValue:s(m).category,"onUpdate:modelValue":e[10]||(e[10]=l=>s(m).category=l),items:s(be),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:s(_e),class:"mb-3"},null,8,["modelValue","items","loading"]),n("div",So,[i(a,{"model-value":s(Ke),label:"센터코드",variant:"outlined",density:"comfortable",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),i(a,{modelValue:s(m).fourDigits,"onUpdate:modelValue":e[11]||(e[11]=l=>s(m).fourDigits=l),label:"4자리 번호 *",variant:"outlined",density:"comfortable",maxlength:"4","error-messages":s(K),hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:pt,onBlur:ft},null,8,["modelValue","error-messages"])]),i(o,{modelValue:s(m).location,"onUpdate:modelValue":e[12]||(e[12]=l=>s(m).location=l),items:s(Xe),label:"위치 *",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),_:1}),i(F,{class:"edit-dialog-actions"},{default:f(()=>[i(C),i(v,{variant:"text",onClick:Ie},{default:f(()=>[...e[40]||(e[40]=[d(" 취소 ",-1)])]),_:1}),i(v,{color:"primary",variant:"flat",loading:s(ye),disabled:!s(Ne),onClick:yt},{default:f(()=>[...e[41]||(e[41]=[d(" 저장 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Wo=xt(Uo,[["__scopeId","data-v-a018f11c"]]);export{Wo as default};
