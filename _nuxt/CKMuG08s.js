const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CRXKbooM.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as ft,N as bt,a as yt,D as _t,r as d,k as x,Y as We,o as Qe,e as ht,_ as fe,O as be,L as g,g as _,H as v,K as a,P as o,I as n,G as p,T as I,J as D,Q,Z as kt,M as f,W as z,X as le,S as ze}from"./CRXKbooM.js";import{_ as wt}from"./DjXiGZ50.js";import{_ as Dt}from"./DuBqwxnZ.js";import{g as Vt,C as qt,_ as Rt}from"./BsOPCK4L.js";import{_ as Bt}from"./DntmgxkF.js";import{u as Ct,C as xt,g as It,c as j}from"./5ev4_Rqv.js";import{u as Pt}from"./CWVCvHjs.js";import{u as Lt}from"./fWafMVjB.js";import"./t3xIg5dx.js";const Ut={class:"books-register-page"},Et={class:"center-header mb-6"},Nt={class:"center-header-inner"},$t={class:"page-title mb-0"},Mt={class:"search-section mb-6"},St={key:0,class:"search-loading-section mb-8"},Tt={class:"text-center py-8"},At={key:1,class:"search-empty-section mb-8"},Ft={class:"text-center py-8 text-medium-emphasis empty-state"},Ot={class:"mb-2"},Wt={key:2,class:"search-results-section mb-8"},Qt={class:"search-results-header mb-4"},zt={class:"text-body-1"},jt={key:0,class:"d-flex justify-center mt-6"},Kt={class:"book-requests-section"},Gt={class:"book-requests-header mb-4"},Ht={key:0,class:"text-body-2 text-medium-emphasis mt-2"},Xt={key:0,class:"text-center py-8"},Jt={key:1,class:"book-requests-grid"},Yt={key:0,class:"d-flex justify-center mt-6"},Zt={key:2,class:"text-center py-8 text-medium-emphasis"},eo={class:"drawer-content"},to={key:0,class:"book-info-preview mb-6"},oo={class:"book-info-preview-inner"},so=["src","alt"],ao={class:"book-meta"},lo={class:"book-title"},ro={key:0,class:"book-author"},no={key:1,class:"book-publisher"},io={class:"category-section mb-4"},uo={class:"category-header mb-1"},co={class:"quantity-section mb-4"},vo={class:"copies-section"},mo={class:"copy-header mb-2"},go={class:"copy-number"},po={key:0,class:"copy-label-preview"},fo={class:"copy-inputs"},bo={class:"manual-book-info-section mb-4"},yo={class:"category-section mb-4"},_o={class:"category-header mb-1"},ho={class:"quantity-section mb-4"},ko={class:"copies-section"},wo={class:"copy-header mb-2"},Do={class:"copy-number"},Vo={key:0,class:"copy-label-preview"},qo={class:"copy-inputs"},ye=4,Ro={__name:"register",setup(Bo){const{user:K}=Pt(),{searchBooks:je,registerBookWithLabel:_e,getBooksByCenter:Ke,getBestsellers:Ge,getCategories:He,checkLabelNumberExists:he}=Ct(),{alert:U}=bt(),{$firebaseFirestore:Xe}=yt(),E=Xe,G=_t("navigationDrawer",()=>!1),ke=d(280),we=[...qt],m=d(""),Je=d(""),$=d(""),M=d([]),H=d(10),ee=d(!1),De=d(null),re=d(!1),X=x(()=>M.value.slice(0,H.value)),Ye=x(()=>M.value.length),Ze=x(()=>H.value<M.value.length),ne=d([]),ie=d(!1),J=d([]),ue=d(new Set),q=d([]),ce=d({}),de=d(!1),Y=d(1),Ve=x(()=>q.value.length),qe=x(()=>Math.ceil(Ve.value/ye)),Re=x(()=>{const t=(Y.value-1)*ye,e=t+ye;return q.value.slice(t,e)}),S=d(!1),y=d(null),te=d(null),ve=d(!1),oe=d([]),se=d(!1),T=d(!1),u=d({category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸"}]}),Z=d(!1),me=d(!1),l=d({title:"",author:"",publisher:"",isbn:"",image:"",category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸",error:"",labelPreview:""}]}),Be=x(()=>xt[m.value]||"1"),Ce=async()=>{await U("카테고리 관리 기능은 준비 중입니다.",{type:"info"})},xe=x(()=>It()),Ie=[t=>!!t||"4자리 번호를 입력해주세요",t=>/^\d{1,4}$/.test(t)||"숫자만 입력해주세요",t=>t.length===4||"4자리를 입력해주세요"],Pe=()=>{u.value.copies.forEach(t=>{u.value.category&&t.fourDigits&&t.fourDigits.length===4?t.labelPreview=j(u.value.category,m.value,t.fourDigits):t.labelPreview=""})};We(()=>u.value.category,()=>{Pe()});const Le=x(()=>{if(!u.value.category||!u.value.quantity||u.value.quantity<1)return!1;for(const t of u.value.copies)if(!t.fourDigits||t.fourDigits.length!==4||!/^\d{4}$/.test(t.fourDigits)||!t.location||t.error)return!1;return!T.value}),Ue=x(()=>{if(!l.value.title||!l.value.isbn||!l.value.category||!l.value.quantity||l.value.quantity<1)return!1;for(const t of l.value.copies)if(!t.fourDigits||t.fourDigits.length!==4||!/^\d{4}$/.test(t.fourDigits)||!t.location||t.error)return!1;return!T.value});Qe(()=>{const t=()=>{ke.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),ht(()=>{window.removeEventListener("resize",t)})});const et=async()=>{if(!K.value||!E)return"";try{const{doc:t,getDoc:e}=await fe(async()=>{const{doc:c,getDoc:k}=await import("./CRXKbooM.js").then(w=>w.aE);return{doc:c,getDoc:k}},__vite__mapDeps([0,1]),import.meta.url),r=t(E,"users",K.value.uid),i=await e(r);if(i.exists())return i.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Qe(async()=>{const t=await et();Je.value=t,m.value=t?Vt(t):we[0],await Promise.all([Ee(),ae(),Ne()])});const tt=async()=>{Y.value=1,await Promise.all([Ee(),ae(),Ne()])},ot=async()=>{if($.value.trim())try{ee.value=!0,De.value=null,H.value=10,re.value=!0;const t=await je($.value);M.value=t.items||[]}catch(t){console.error("도서 검색 오류:",t),De.value=t.message||"도서 검색에 실패했습니다.",M.value=[]}finally{ee.value=!1}},st=()=>{$.value="",M.value=[],H.value=10,re.value=!1},at=()=>{H.value+=10},Ee=async()=>{try{ie.value=!0;const t=await Ge(10);ne.value=t.items||[]}catch(t){console.error("베스트셀러 로드 오류:",t),ne.value=[]}finally{ie.value=!1}},ae=async()=>{try{const t=await Ke(m.value);J.value=t}catch(t){console.error("등록된 도서 로드 오류:",t),J.value=[]}},Ne=async()=>{try{if(de.value=!0,!E){q.value=[];return}const{collection:t,query:e,where:r,getDocs:i,doc:c,getDoc:k}=await fe(async()=>{const{collection:b,query:R,where:B,getDocs:C,doc:N,getDoc:O}=await import("./CRXKbooM.js").then(W=>W.aE);return{collection:b,query:R,where:B,getDocs:C,doc:N,getDoc:O}},__vite__mapDeps([0,1]),import.meta.url),w=t(E,"bookRequests"),A=e(w,r("center","==",m.value),r("status","==","pending")),F=await i(A),P=[];F.forEach(b=>{P.push({id:b.id,...b.data()})}),P.sort((b,R)=>{const B=b.requestedAt?.toDate?.()||new Date(0);return(R.requestedAt?.toDate?.()||new Date(0))-B}),q.value=P;const L=[...new Set(P.filter(b=>b.requestedBy).map(b=>b.requestedBy))];for(const b of L)if(!ce.value[b])try{const R=c(E,"users",b),B=await k(R);if(B.exists()){const C=B.data(),N=(C.email||"").split("@")[0],O=C.name||"",W=C.workplace||"";ce.value[b]=`${W} ${O}(${N})`}}catch(R){console.error("신청자 정보 로드 오류:",R)}}catch(t){console.error("도서 신청 목록 로드 오류:",t),q.value=[]}finally{de.value=!1}},lt=t=>t.requestedBy&&ce.value[t.requestedBy]||"",ge=async()=>{try{se.value=!0;const t=await He(m.value);oe.value=t}catch(t){console.error("카테고리 로드 오류:",t),oe.value=[]}finally{se.value=!1}},rt=t=>{const e=Math.max(1,Math.min(20,t||1)),r=u.value.copies;if(e>r.length)for(let i=r.length;i<e;i++)r.push({fourDigits:"",location:"구매칸",error:"",labelPreview:""});else e<r.length&&(u.value.copies=r.slice(0,e));u.value.quantity=e},nt=(t,e)=>{const r=t.target.value.replace(/\D/g,"").slice(0,4);u.value.copies[e].fourDigits=r,u.value.copies[e].error="",Pe()},it=async t=>{const e=u.value.copies[t];if(!(!u.value.category||!e.fourDigits||e.fourDigits.length!==4))try{T.value=!0;const r=j(u.value.category,m.value,e.fourDigits);if(await he(r,m.value)){e.error="이미 사용중인 라벨번호입니다.";return}for(let c=0;c<u.value.copies.length;c++)if(c!==t&&u.value.copies[c].fourDigits===e.fourDigits){e.error="동일한 라벨번호가 이미 입력되어 있습니다.";return}e.error=""}catch(r){console.error("라벨번호 중복 체크 오류:",r)}finally{T.value=!1}},$e=async t=>{y.value=t,te.value=null,u.value={category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸",error:"",labelPreview:""}]},await ge(),S.value=!0},ut=async t=>{y.value=t,te.value=t,u.value={category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸",error:"",labelPreview:""}]},await ge(),S.value=!0},Me=()=>{S.value=!1,y.value=null,te.value=null},Se=async()=>{l.value={title:"",author:"",publisher:"",isbn:"",image:"",category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸",error:"",labelPreview:""}]},await ge(),Z.value=!0},Te=()=>{Z.value=!1},ct=t=>{const e=Math.max(1,Math.min(20,parseInt(t)||1)),r=l.value.copies;if(e>r.length)for(let i=r.length;i<e;i++)r.push({fourDigits:"",location:"구매칸",error:"",labelPreview:""});else e<r.length&&r.splice(e);l.value.quantity=e,pe()},pe=()=>{l.value.copies.forEach(t=>{l.value.category&&t.fourDigits&&t.fourDigits.length===4?t.labelPreview=j(l.value.category,m.value,t.fourDigits):t.labelPreview=""})};We(()=>l.value.category,()=>{pe()});const dt=(t,e)=>{const r=t.target.value.replace(/[^0-9]/g,"");l.value.copies[e].fourDigits=r,l.value.copies[e].error="",pe()},vt=async t=>{const e=l.value.copies[t];if(!e.fourDigits||e.fourDigits.length!==4||!l.value.category)return;const r=j(l.value.category,m.value,e.fourDigits);if(l.value.copies.some((c,k)=>k!==t&&c.fourDigits===e.fourDigits&&l.value.category===l.value.category)){e.error="폼 내에서 중복된 라벨번호입니다.";return}try{T.value=!0,await he(r,m.value)?e.error="이미 사용중인 라벨번호입니다.":e.error=""}catch(c){console.error("라벨번호 중복 체크 오류:",c)}finally{T.value=!1}},mt=async()=>{if(!Ue.value)return;const t=l.value.isbn.trim();try{me.value=!0;const e={title:l.value.title.trim(),author:l.value.author.trim(),publisher:l.value.publisher.trim(),isbn13:t.length===13?t:"",isbn:(t.length===10,t),image:l.value.image.trim(),cover:l.value.image.trim()},r=[];for(const i of l.value.copies){const c=j(l.value.category,m.value,i.fourDigits);await _e(e,m.value,K.value.uid,l.value.category,c,i.location),r.push(c)}await ae(),Te(),r.length===1?await U(`도서가 성공적으로 등록되었습니다.
라벨번호: ${r[0]}`,{type:"success"}):await U(`${r.length}권의 도서가 성공적으로 등록되었습니다.
라벨번호:
${r.join(`
`)}`,{type:"success"})}catch(e){console.error("도서 직접 등록 오류:",e),await U(e.message||"도서 등록에 실패했습니다.",{type:"error"})}finally{me.value=!1}},gt=async()=>{if(!y.value||!Le.value)return;const t=y.value,e=t.isbn13||t.isbn||"";if(!e){await U("ISBN 정보가 없어 등록할 수 없습니다.",{type:"error"});return}if(!ue.value.has(e))try{ve.value=!0,ue.value.add(e);const r=[];for(const c of u.value.copies){const k=j(u.value.category,m.value,c.fourDigits);await _e(t,m.value,K.value.uid,u.value.category,k,c.location),r.push(k)}const i=te.value||q.value.find(c=>(c.isbn13||c.isbn||"")===e);if(i&&E){const{doc:c,updateDoc:k,serverTimestamp:w,addDoc:A,collection:F}=await fe(async()=>{const{doc:L,updateDoc:b,serverTimestamp:R,addDoc:B,collection:C}=await import("./CRXKbooM.js").then(N=>N.aE);return{doc:L,updateDoc:b,serverTimestamp:R,addDoc:B,collection:C}},__vite__mapDeps([0,1]),import.meta.url),P=c(E,"bookRequests",i.id);if(await k(P,{status:"approved",approvedAt:w(),approvedBy:K.value.uid}),i.requestedBy){const L=F(E,"notifications");await A(L,{userId:i.requestedBy,type:"book_registered",title:"신청 도서 등록 완료",message:`신청하신 도서 "${t.title}"이(가) ${m.value}에 등록되었습니다.`,bookTitle:t.title,bookIsbn:e,center:m.value,isRead:!1,createdAt:w()})}q.value=q.value.filter(L=>L.id!==i.id)}await ae(),Me(),r.length===1?await U(`도서가 성공적으로 등록되었습니다.
라벨번호: ${r[0]}`,{type:"success"}):await U(`${r.length}권의 도서가 성공적으로 등록되었습니다.
라벨번호:
${r.join(`
`)}`,{type:"success"})}catch(r){console.error("도서 등록 오류:",r),await U(r.message||"도서 등록에 실패했습니다.",{type:"error"})}finally{ve.value=!1,ue.value.delete(e)}};return Lt({title:"도서 등록 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록"}]}),(t,e)=>{const r=_("v-select"),i=_("v-text-field"),c=_("v-progress-circular"),k=_("v-icon"),w=_("v-btn"),A=wt,F=_("v-col"),P=_("v-row"),L=Dt,b=_("v-pagination"),R=Rt,B=Bt,C=_("v-navigation-drawer"),N=_("v-card-title"),O=_("v-card-text"),W=_("v-spacer"),Ae=_("v-card-actions"),Fe=_("v-card"),Oe=_("v-dialog"),pt=_("v-app");return v(),be(pt,null,{default:g(()=>[a(R,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[3]||(e[3]=s=>G.value=!o(G))},{default:g(()=>[n("div",Ut,[n("div",Et,[n("div",Nt,[n("h1",$t,D(o(m))+" 도서 등록 ",1),a(r,{modelValue:o(m),"onUpdate:modelValue":[e[0]||(e[0]=s=>Q(m)?m.value=s:null),tt],items:we,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),n("div",Mt,[a(i,{modelValue:o($),"onUpdate:modelValue":e[1]||(e[1]=s=>Q($)?$.value=s:null),label:"도서 검색",placeholder:"도서명 또는 ISBN으로 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable",loading:o(ee),clearable:"",class:"search-input",onKeyup:kt(ot,["enter"]),"onClick:clear":st},null,8,["modelValue","loading"])]),o(ee)?(v(),p("div",St,[n("div",Tt,[a(c,{indeterminate:"",color:"primary"}),e[16]||(e[16]=n("p",{class:"mt-4 text-medium-emphasis"}," 검색 중... ",-1))])])):o(re)&&o(X).length===0?(v(),p("div",At,[n("div",Ft,[a(k,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:g(()=>[...e[17]||(e[17]=[f(" mdi-book-search-outline ",-1)])]),_:1}),n("p",Ot,[e[18]||(e[18]=f(" '",-1)),n("strong",null,D(o($)),1),e[19]||(e[19]=f("'에 대한 검색 결과가 없습니다. ",-1))]),e[21]||(e[21]=n("p",{class:"text-body-2 mb-4"}," 다른 검색어로 시도하거나, 직접 등록해보세요. ",-1)),a(w,{color:"primary",variant:"outlined",size:"small",onClick:Se},{default:g(()=>[...e[20]||(e[20]=[f(" 직접 등록하기 ",-1)])]),_:1})])])):o(X).length>0?(v(),p("div",Wt,[n("div",Qt,[n("div",zt,[o(Ye)>=10?(v(),p(z,{key:0},[e[22]||(e[22]=f(" 검색 결과가 많습니다. (현재 ",-1)),n("strong",null,D(o(X).length),1),e[23]||(e[23]=f("개 표시 중) ",-1))],64)):(v(),p(z,{key:1},[e[24]||(e[24]=f(" 총 ",-1)),n("strong",null,D(o(X).length),1),e[25]||(e[25]=f("개의 검색 결과 ",-1))],64))]),a(w,{color:"primary",variant:"outlined",size:"small",onClick:Se},{default:g(()=>[...e[26]||(e[26]=[f(" 직접 등록하기 ",-1)])]),_:1})]),a(P,{class:"book-list-row"},{default:g(()=>[(v(!0),p(z,null,le(o(X),(s,V)=>(v(),be(F,{key:`search-${V}`,cols:"12",sm:"6",class:"book-list-col"},{default:g(()=>[a(A,{book:s,center:o(m),"registered-books":o(J),"requested-books":o(q),selectable:!1,"show-action":!0,"allow-register-requested":!0,"allow-additional-register":!0,onRegister:$e},null,8,["book","center","registered-books","requested-books"])]),_:2},1024))),128))]),_:1}),o(Ze)?(v(),p("div",jt,[a(w,{variant:"outlined",color:"primary",onClick:at},{default:g(()=>[...e[27]||(e[27]=[f(" 더보기 ",-1)])]),_:1})])):I("",!0)])):I("",!0),a(L,{books:o(ne),center:o(m),"registered-books":o(J),"requested-books":o(q),title:"베스트셀러",loading:o(ie),"empty-message":"베스트셀러를 불러올 수 없습니다.","allow-register-requested":!0,"allow-additional-register":!0,"nav-id":"bestseller",class:"mb-8",onRegister:$e},null,8,["books","center","registered-books","requested-books","loading"]),n("div",Kt,[n("div",Gt,[e[30]||(e[30]=n("h2",{class:"section-title mb-0"}," 도서 신청 목록 ",-1)),o(q).length>0?(v(),p("div",Ht,[e[28]||(e[28]=f(" 총 ",-1)),n("strong",null,D(o(Ve)),1),e[29]||(e[29]=f("건의 신청 ",-1))])):I("",!0)]),o(de)?(v(),p("div",Xt,[a(c,{indeterminate:"",color:"primary"})])):o(Re).length>0?(v(),p("div",Jt,[a(P,{class:"book-list-row"},{default:g(()=>[(v(!0),p(z,null,le(o(Re),(s,V)=>(v(),be(F,{key:`request-${V}`,cols:"12",sm:"6",class:"book-list-col"},{default:g(()=>[a(A,{book:s,center:o(m),"registered-books":o(J),selectable:!1,"show-action":!0,"action-button-text":`${o(m)}에 등록하기`,"requester-info":lt(s),onRegister:ut},null,8,["book","center","registered-books","action-button-text","requester-info"])]),_:2},1024))),128))]),_:1}),o(qe)>1?(v(),p("div",Yt,[a(b,{modelValue:o(Y),"onUpdate:modelValue":e[2]||(e[2]=s=>Q(Y)?Y.value=s:null),length:o(qe),"total-visible":7},null,8,["modelValue","length"])])):I("",!0)])):(v(),p("div",Zt," 신청된 도서가 없습니다. "))])])]),_:1}),a(C,{modelValue:o(G),"onUpdate:modelValue":e[4]||(e[4]=s=>Q(G)?G.value=s:null),location:"right",temporary:"",width:o(ke),class:"side-navigation"},{default:g(()=>[n("div",eo,[a(B)])]),_:1},8,["modelValue","width"]),a(Oe,{modelValue:o(S),"onUpdate:modelValue":e[7]||(e[7]=s=>Q(S)?S.value=s:null),"max-width":"600",persistent:""},{default:g(()=>[a(Fe,{class:"register-dialog-card"},{default:g(()=>[a(N,{class:"register-dialog-title"},{default:g(()=>[...e[31]||(e[31]=[f(" 도서 등록 ",-1)])]),_:1}),a(O,{class:"register-dialog-content"},{default:g(()=>[o(y)?(v(),p("div",to,[n("div",oo,[o(y).cover||o(y).image?(v(),p("img",{key:0,src:o(y).cover||o(y).image,alt:o(y).title,class:"book-thumbnail"},null,8,so)):I("",!0),n("div",ao,[n("div",lo,D(o(y).title),1),o(y).author?(v(),p("div",ro,[e[32]||(e[32]=n("strong",null,"저자:",-1)),f(" "+D(o(y).author),1)])):I("",!0),o(y).publisher?(v(),p("div",no,[e[33]||(e[33]=n("strong",null,"출판사:",-1)),f(" "+D(o(y).publisher),1)])):I("",!0)])])])):I("",!0),n("div",io,[n("div",uo,[n("a",{href:"#",class:"category-manage-link",onClick:ze(Ce,["prevent"])}," 카테고리 관리 ")]),a(r,{modelValue:o(u).category,"onUpdate:modelValue":e[5]||(e[5]=s=>o(u).category=s),items:o(oe),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(se),rules:[s=>!!s||"카테고리를 선택해주세요"]},null,8,["modelValue","items","loading","rules"])]),n("div",co,[a(i,{modelValue:o(u).quantity,"onUpdate:modelValue":[e[6]||(e[6]=s=>o(u).quantity=s),rt],modelModifiers:{number:!0},label:"등록 권수",variant:"outlined",density:"comfortable",type:"number",min:"1",max:"20",rules:[s=>s>=1&&s<=20||"1~20권까지 등록 가능합니다"],hint:"같은 도서를 여러 권 등록할 수 있습니다","persistent-hint":""},null,8,["modelValue","rules"])]),n("div",vo,[(v(!0),p(z,null,le(o(u).copies,(s,V)=>(v(),p("div",{key:V,class:"copy-entry mb-4"},[n("div",mo,[n("span",go,D(V+1)+"권",1),s.labelPreview?(v(),p("span",po,D(s.labelPreview),1)):I("",!0)]),n("div",fo,[a(i,{"model-value":o(Be),label:"센터코드",variant:"outlined",density:"compact",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),a(i,{modelValue:s.fourDigits,"onUpdate:modelValue":h=>s.fourDigits=h,label:"4자리 번호 *",variant:"outlined",density:"compact",maxlength:"4",rules:Ie,"error-messages":s.error,hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:h=>nt(h,V),onBlur:()=>it(V)},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","onBlur"]),a(r,{modelValue:s.location,"onUpdate:modelValue":h=>s.location=h,items:o(xe),label:"위치 *",variant:"outlined",density:"compact",rules:[h=>!!h||"위치를 선택해주세요"],class:"location-select"},null,8,["modelValue","onUpdate:modelValue","items","rules"])])]))),128))])]),_:1}),a(Ae,{class:"register-dialog-actions"},{default:g(()=>[a(W),a(w,{variant:"text",onClick:Me},{default:g(()=>[...e[34]||(e[34]=[f(" 취소 ",-1)])]),_:1}),a(w,{color:"primary",variant:"flat",loading:o(ve),disabled:!o(Le),onClick:gt},{default:g(()=>[f(D(o(u).quantity>1?`${o(u).quantity}권 등록`:"등록"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Oe,{modelValue:o(Z),"onUpdate:modelValue":e[15]||(e[15]=s=>Q(Z)?Z.value=s:null),"max-width":"600",persistent:""},{default:g(()=>[a(Fe,{class:"register-dialog-card"},{default:g(()=>[a(N,{class:"register-dialog-title"},{default:g(()=>[...e[35]||(e[35]=[f(" 도서 직접 등록 ",-1)])]),_:1}),a(O,{class:"register-dialog-content"},{default:g(()=>[n("div",bo,[e[36]||(e[36]=n("div",{class:"manual-section-title mb-3"}," 도서 정보 ",-1)),a(i,{modelValue:o(l).title,"onUpdate:modelValue":e[8]||(e[8]=s=>o(l).title=s),label:"도서명 *",variant:"outlined",density:"comfortable",rules:[s=>!!s||"도서명을 입력해주세요"],class:"mb-3"},null,8,["modelValue","rules"]),a(i,{modelValue:o(l).author,"onUpdate:modelValue":e[9]||(e[9]=s=>o(l).author=s),label:"저자",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(i,{modelValue:o(l).publisher,"onUpdate:modelValue":e[10]||(e[10]=s=>o(l).publisher=s),label:"출판사",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(i,{modelValue:o(l).isbn,"onUpdate:modelValue":e[11]||(e[11]=s=>o(l).isbn=s),label:"ISBN *",variant:"outlined",density:"comfortable",rules:[s=>!!s||"ISBN을 입력해주세요"],hint:"ISBN-13 또는 ISBN-10","persistent-hint":"",class:"mb-3"},null,8,["modelValue","rules"]),a(i,{modelValue:o(l).image,"onUpdate:modelValue":e[12]||(e[12]=s=>o(l).image=s),label:"표지 이미지 URL",variant:"outlined",density:"comfortable",hint:"선택사항","persistent-hint":""},null,8,["modelValue"])]),n("div",yo,[n("div",_o,[n("a",{href:"#",class:"category-manage-link",onClick:ze(Ce,["prevent"])}," 카테고리 관리 ")]),a(r,{modelValue:o(l).category,"onUpdate:modelValue":e[13]||(e[13]=s=>o(l).category=s),items:o(oe),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(se),rules:[s=>!!s||"카테고리를 선택해주세요"]},null,8,["modelValue","items","loading","rules"])]),n("div",ho,[a(i,{modelValue:o(l).quantity,"onUpdate:modelValue":[e[14]||(e[14]=s=>o(l).quantity=s),ct],modelModifiers:{number:!0},label:"등록 권수",variant:"outlined",density:"comfortable",type:"number",min:"1",max:"20",rules:[s=>s>=1&&s<=20||"1~20권까지 등록 가능합니다"],hint:"같은 도서를 여러 권 등록할 수 있습니다","persistent-hint":""},null,8,["modelValue","rules"])]),n("div",ko,[(v(!0),p(z,null,le(o(l).copies,(s,V)=>(v(),p("div",{key:V,class:"copy-entry mb-4"},[n("div",wo,[n("span",Do,D(V+1)+"권",1),s.labelPreview?(v(),p("span",Vo,D(s.labelPreview),1)):I("",!0)]),n("div",qo,[a(i,{"model-value":o(Be),label:"센터코드",variant:"outlined",density:"compact",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),a(i,{modelValue:s.fourDigits,"onUpdate:modelValue":h=>s.fourDigits=h,label:"4자리 번호 *",variant:"outlined",density:"compact",maxlength:"4",rules:Ie,"error-messages":s.error,hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:h=>dt(h,V),onBlur:()=>vt(V)},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","onBlur"]),a(r,{modelValue:s.location,"onUpdate:modelValue":h=>s.location=h,items:o(xe),label:"위치 *",variant:"outlined",density:"compact",rules:[h=>!!h||"위치를 선택해주세요"],class:"location-select"},null,8,["modelValue","onUpdate:modelValue","items","rules"])])]))),128))])]),_:1}),a(Ae,{class:"register-dialog-actions"},{default:g(()=>[a(W),a(w,{variant:"text",onClick:Te},{default:g(()=>[...e[37]||(e[37]=[f(" 취소 ",-1)])]),_:1}),a(w,{color:"primary",variant:"flat",loading:o(me),disabled:!o(Ue),onClick:mt},{default:g(()=>[f(D(o(l).quantity>1?`${o(l).quantity}권 등록`:"등록"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Mo=ft(Ro,[["__scopeId","data-v-44515c65"]]);export{Mo as default};
