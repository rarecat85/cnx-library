const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Boo3KTuQ.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as Bt,N as xt,a as Vt,D as Nt,r as p,k as q,o as Ie,e as Et,_ as oe,Y as Rt,O as X,L as f,g as E,H as g,K as i,P as s,I as n,J as w,Q as M,G as V,M as d,T as ie,W as qe,X as Se,U as Ue,S as ke}from"./Boo3KTuQ.js";import{g as $t,C as Lt,_ as At}from"./DWTjnE5C.js";import{_ as It}from"./CuHq5ZC5.js";import{u as qt,g as Te,C as St,c as Ce,f as Fe,p as Ut}from"./D-NlRVcE.js";import{u as Tt}from"./CODFDsF7.js";import{u as Ft}from"./BfT2mRWl.js";import"./Bk6YIHrN.js";const Ot={class:"books-admin-page"},zt={class:"center-header mb-6"},Pt={class:"center-header-inner"},Mt={class:"page-title mb-0"},Gt={class:"registered-books-section"},Ht={class:"registered-books-header mb-0"},Wt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},Qt={class:"text-body-1"},jt={class:"text-body-2 text-medium-emphasis"},Xt={class:"d-flex align-center registered-search-group"},Jt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mt-4"},Kt={class:"d-flex action-buttons"},Yt={key:0,class:"text-center py-8"},Zt={key:1,class:"registered-books-grid"},eo=["onClick"],to=["src","alt"],oo={key:1,class:"book-thumbnail-placeholder"},so={class:"book-meta"},ao={class:"book-title"},lo={key:0,class:"book-author"},no={key:1,class:"book-publisher"},ro={class:"book-count"},io={class:"book-copies-list"},uo=["onClick"],co={class:"copy-content"},vo={class:"copy-row-top"},mo={class:"copy-status"},po={key:4,class:"copy-user-info"},fo=["onClick"],go={class:"copy-info-row"},yo={class:"copy-label-number"},bo={class:"copy-location"},_o={class:"copy-actions"},ho={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},wo={key:0},ko={key:1},Co={class:"drawer-content"},Do={class:"rent-dialog-content"},Bo={class:"mb-4 text-body-2 text-medium-emphasis"},xo={class:"rent-dialog-actions"},Vo={key:0,class:"book-info-preview mb-4"},No={class:"book-info-preview-inner"},Eo=["src","alt"],Ro={key:1,class:"book-thumbnail-placeholder"},$o={class:"book-meta"},Lo={class:"book-title"},Ao={class:"book-current-label"},Io={class:"book-current-location"},qo={class:"label-number-inputs mb-3"},de=5,So={__name:"index",setup(Uo){const{user:De}=Tt(),{getBooksByCenter:Oe,rentBook:Be,deleteBook:ze,updateBookInfo:Pe,checkLabelNumberExists:Me,getCategories:Ge,calculateBookStatus:S}=qt(),{confirm:ue,alert:B}=xt(),{$firebaseFirestore:He}=Vt(),L=He,se=Nt("navigationDrawer",()=>!1),xe=p(280),ve=[...Lt],D=p(""),We=p(""),J=p([]),me=p(!1),W=p(""),U=p("date"),ae=p(""),Qe=[{title:"등록일순",value:"date"},{title:"제목순",value:"title"},{title:"대여중도서",value:"rented"},{title:"연체중도서",value:"overdue"},{title:"대여신청도서",value:"requested"},{title:"위치별로 보기",value:"location"},{title:"신규등록도서",value:"new"}],y=p([]),ce=p(!1),T=p(!1),pe=p({}),fe=p({}),ee=p(!1),Q=p([]),ge=p(!1),G=p(""),H=p(""),P=p(""),le=p(!1),R=p(null),ye=p(!1),be=p([]),_e=p(!1),K=p(""),m=p({category:"",fourDigits:"",location:""}),je=q(()=>Te()),Xe=q(()=>[{title:"전체",value:""},...Te()]),Je=q(()=>St[D.value]||"1");q(()=>!m.value.category||!m.value.fourDigits?"":Ce(m.value.category,D.value,m.value.fourDigits));const Ve=q(()=>m.value.category&&m.value.fourDigits&&m.value.fourDigits.length===4&&/^\d{4}$/.test(m.value.fourDigits)&&m.value.location&&!K.value);Ie(()=>{const t=()=>{xe.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),Et(()=>{window.removeEventListener("resize",t)})});const Ke=async()=>{if(!De.value||!L)return"";try{const{doc:t,getDoc:e}=await oe(async()=>{const{doc:r,getDoc:v}=await import("./Boo3KTuQ.js").then(u=>u.aE);return{doc:r,getDoc:v}},__vite__mapDeps([0,1]),import.meta.url),o=t(L,"users",De.value.uid),a=await e(o);if(a.exists())return a.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Ie(async()=>{const t=await Ke();We.value=t,D.value=t?$t(t):ve[0],await j()});const Ye=async()=>{y.value=[],await j()},j=async()=>{try{me.value=!0;const t=await Oe(D.value);J.value=t,await Ze(t)}catch(t){console.error("등록된 도서 로드 오류:",t),J.value=[]}finally{me.value=!1}},Ze=async t=>{if(!L)return;const{doc:e,getDoc:o}=await oe(async()=>{const{doc:u,getDoc:b}=await import("./Boo3KTuQ.js").then(x=>x.aE);return{doc:u,getDoc:b}},__vite__mapDeps([0,1]),import.meta.url),a=[...new Set(t.filter(u=>u.rentedBy).map(u=>u.rentedBy))],r=[...new Set(t.filter(u=>u.requestedBy).map(u=>u.requestedBy))],v=[...new Set([...a,...r])];for(const u of v)if(!(pe.value[u]&&fe.value[u]))try{const b=e(L,"users",u),x=await o(b);if(x.exists()){const k=x.data(),$=(k.email||"").split("@")[0]||"",C=k.name||"",h=`${k.workplace||""} ${C}(${$})`;pe.value[u]=h,fe.value[u]=h}}catch(b){console.error("대여자/신청자 정보 로드 오류:",b)}},Ne=t=>t.rentedBy&&pe.value[t.rentedBy]||"",he=t=>t.requestedBy&&fe.value[t.requestedBy]||"",et=()=>{},Ee=q(()=>{const t=new Map;for(const e of J.value){const o=e.isbn13||e.isbn||e.id;t.has(o)||t.set(o,{isbn:o,title:e.title,author:e.author,publisher:e.publisher,image:e.image,copies:[],totalCount:0,availableCount:0,rentedCount:0,requestedCount:0,locations:[]});const a=t.get(o);a.copies.push(e),a.totalCount++;const r=S(e);r?r==="rented"||r==="overdue"?a.rentedCount++:r==="requested"&&a.requestedCount++:a.availableCount++,e.location&&!a.locations.includes(e.location)&&a.locations.push(e.location)}for(const e of t.values())e.copies.sort((o,a)=>{const r=o.labelNumber||"",v=a.labelNumber||"";return r.localeCompare(v,"ko")});return Array.from(t.values())}),ne=q(()=>{let t=[...Ee.value];if(W.value.trim()){const e=W.value.toLowerCase();t=t.filter(o=>{const a=(o.title||"").toLowerCase(),r=(o.author||"").toLowerCase(),v=(o.publisher||"").toLowerCase();return a.includes(e)||r.includes(e)||v.includes(e)?!0:o.copies.some(u=>(u.labelNumber||"").toLowerCase().includes(e))})}return U.value==="title"?t.sort((e,o)=>{const a=(e.title||"").toLowerCase(),r=(o.title||"").toLowerCase();return a.localeCompare(r,"ko")}):U.value==="date"?t.sort((e,o)=>{const a=e.copies[0]?.registeredAt?.toDate?.()||new Date(0);return(o.copies[0]?.registeredAt?.toDate?.()||new Date(0))-a}):U.value==="rented"?t=t.filter(e=>e.rentedCount>0):U.value==="overdue"?t=t.filter(e=>e.copies.some(o=>S(o)==="overdue")):U.value==="requested"?t=t.filter(e=>e.requestedCount>0):U.value==="new"?t=t.filter(e=>e.copies.some(o=>o.location==="구매칸")):U.value==="location"&&ae.value&&(t=t.filter(e=>e.copies.some(o=>o.location===ae.value))),t}),tt=q(()=>J.value.length),ot=q(()=>Ee.value.length),st=q(()=>J.value.filter(t=>S(t)==="rented").length),at=q(()=>J.value.filter(t=>S(t)==="overdue").length),lt=q(()=>J.value.filter(t=>S(t)==="requested").length),te=t=>S(t),Y=t=>y.value.some(e=>e.id===t.id),Re=t=>t.copies.every(e=>Y(e)),nt=t=>{const e=t.copies.filter(o=>Y(o)).length;return e>0&&e<t.copies.length},rt=(t,e)=>{e?Y(t)||y.value.push(t):y.value=y.value.filter(o=>o.id!==t.id),we()},it=(t,e)=>{if(e)for(const o of t.copies)Y(o)||y.value.push(o);else{const o=t.copies.map(a=>a.id);y.value=y.value.filter(a=>!o.includes(a.id))}we()},ut=t=>{const e=Re(t);it(t,!e)},ct=t=>{rt(t,!Y(t))},dt=t=>{t?y.value=ne.value.flatMap(e=>e.copies):y.value=[]},we=()=>{const t=ne.value.flatMap(e=>e.copies);ce.value=t.length>0&&t.every(e=>Y(e))};Rt(()=>ne.value,()=>{we()});const vt=async()=>{try{_e.value=!0;const t=await Ge(D.value);be.value=t}catch(t){console.error("카테고리 로드 오류:",t),be.value=[]}finally{_e.value=!1}},mt=t=>{const e=t.target.value.replace(/\D/g,"").slice(0,4);m.value.fourDigits=e,K.value=""},pt=async()=>{if(!m.value.category||!m.value.fourDigits||m.value.fourDigits.length!==4)return;const t=Ce(m.value.category,D.value,m.value.fourDigits);if(R.value&&t===R.value.labelNumber){K.value="";return}try{await Me(t,D.value)?K.value="이미 사용중인 라벨번호입니다.":K.value=""}catch(e){console.error("라벨번호 중복 체크 오류:",e)}},ft=async t=>{R.value=t;const e=Ut(t.labelNumber);m.value={category:t.category||e?.category||"",fourDigits:e?.fourDigits||"",location:t.location||"구매칸"},K.value="",await vt(),le.value=!0},$e=()=>{le.value=!1,R.value=null},gt=async()=>{if(!(!R.value||!Ve.value))try{ye.value=!0;const t=Ce(m.value.category,D.value,m.value.fourDigits);await Pe(R.value.labelNumber||R.value.id.split("_")[0],D.value,{category:m.value.category,labelNumber:t,location:m.value.location}),$e(),await j(),await B("도서 정보가 수정되었습니다.",{type:"success"})}catch(t){console.error("도서 정보 수정 오류:",t),await B(t.message||"도서 정보 수정에 실패했습니다.",{type:"error"})}finally{ye.value=!1}},yt=async()=>{if(y.value.length===0)return;const t=[],e=[];for(const a of y.value){const r=S(a);r==="rented"||r==="overdue"?e.push({book:a,reason:"대여중"}):r==="requested"?e.push({book:a,reason:"대여신청중"}):t.push(a)}if(t.length===0){const a=e.map(r=>`• ${r.book.title} (${r.reason})`).join(`
`);await B(`선택한 도서를 삭제할 수 없습니다.

${a}

대여중/대여신청중인 도서는 반납 또는 신청 취소 후 삭제해주세요.`,{type:"warning"});return}let o=`선택한 ${y.value.length}권 중 ${t.length}권의 도서를 삭제하시겠습니까?`;if(e.length>0){const a=e.map(r=>`• ${r.book.title} (${r.reason})`).join(`
`);o+=`

⚠️ 다음 도서는 삭제할 수 없습니다:
${a}`}if(await ue(o))try{T.value=!0;const a=t.map(r=>{const v=r.labelNumber||r.id.split("_")[0];return ze(v,D.value)});await Promise.all(a),y.value=[],await j(),e.length>0?await B(`${t.length}권의 도서가 삭제되었습니다.
(${e.length}권은 대여중/대여신청중으로 삭제되지 않았습니다.)`,{type:"success"}):await B(`${t.length}권의 도서가 삭제되었습니다.`,{type:"success"})}catch(a){console.error("도서 삭제 오류:",a),await B("도서 삭제에 실패했습니다.",{type:"error"})}finally{T.value=!1}},bt=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const o=S(e);return o!=="rented"&&o!=="overdue"});if(t.length===0){await B("선택한 도서가 모두 대여중입니다.",{type:"warning"});return}Q.value=t,G.value=D.value,H.value="",P.value="",ee.value=!0},Le=async t=>{if(!L||!t)return 0;try{const{collection:e,query:o,where:a,getDocs:r}=await oe(async()=>{const{collection:k,query:c,where:$,getDocs:C}=await import("./Boo3KTuQ.js").then(N=>N.aE);return{collection:k,query:c,where:$,getDocs:C}},__vite__mapDeps([0,1]),import.meta.url),v=e(L,"books"),u=o(v,a("rentedBy","==",t)),b=await r(u);let x=0;return b.forEach(k=>{const c=k.data();(c.status==="rented"||c.status==="overdue")&&x++}),x}catch(e){return console.error("대여 권수 조회 오류:",e),0}},_t=async t=>{if(S(t)==="requested"&&t.requestedBy){if(await Le(t.requestedBy)>=de){await B(`신청자가 이미 ${de}권을 대여중입니다.
반납 후 대여 처리해주세요.`,{type:"warning"});return}if(!await ue(`신청자 정보로 대여 처리하시겠습니까?

도서: ${t.title}
라벨번호: ${t.labelNumber||"-"}
신청자: ${he(t)}`))return;try{T.value=!0;const a=t.labelNumber||t.id.split("_")[0];await Be(a,D.value,t.requestedBy,t.isbn),await j(),await B("대여 처리가 완료되었습니다.",{type:"success"})}catch(a){console.error("대여 처리 오류:",a),await B(a.message||"대여 처리에 실패했습니다.",{type:"error"})}finally{T.value=!1}return}Q.value=[t],G.value=D.value,H.value="",P.value="",ee.value=!0},Ae=()=>{ee.value=!1,Q.value=[],G.value="",H.value="",P.value=""},ht=async()=>{if(!(!G.value||!H.value))try{ge.value=!0,P.value="";const{collection:t,query:e,where:o,getDocs:a}=await oe(async()=>{const{collection:h,query:A,where:I,getDocs:F}=await import("./Boo3KTuQ.js").then(O=>O.aE);return{collection:h,query:A,where:I,getDocs:F}},__vite__mapDeps([0,1]),import.meta.url),r=t(L,"users"),v=e(r,o("email","==",H.value)),u=await a(v);if(u.empty){P.value="해당 이메일의 사용자를 찾을 수 없습니다.";return}const b=u.docs[0].data();if(b.center!==G.value){P.value=`해당 사용자는 ${b.center} 소속입니다.`;return}const k=u.docs[0].id,c=await Le(k),$=Q.value.length,C=de-c;if(C<=0){P.value=`해당 사용자가 이미 ${de}권을 대여중입니다.`;return}if($>C){P.value=`해당 사용자는 ${C}권까지만 추가 대여 가능합니다. (현재 ${c}권 대여중)`;return}for(const h of Q.value){const A=h.labelNumber||h.id.split("_")[0];await Be(A,D.value,k,h.isbn)}const N=Q.value.length;await j(),y.value=y.value.filter(h=>!Q.value.some(A=>A.id===h.id)),Ae(),await B(`${N}권의 도서가 대여 처리되었습니다.`,{type:"success"})}catch(t){console.error("도서 대여 오류:",t),P.value=t.message||"대여 처리에 실패했습니다."}finally{ge.value=!1}},wt=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const o=S(e);return o==="rented"||o==="overdue"});if(t.length===0){await B("선택한 도서 중 대여중인 도서가 없습니다.",{type:"warning"});return}if(await ue(`선택한 ${t.length}권의 도서를 반납 처리하시겠습니까?`))try{T.value=!0;const{doc:e,updateDoc:o,collection:a,addDoc:r,query:v,where:u,getDocs:b,serverTimestamp:x,deleteField:k}=await oe(async()=>{const{doc:c,updateDoc:$,collection:C,addDoc:N,query:h,where:A,getDocs:I,serverTimestamp:F,deleteField:O}=await import("./Boo3KTuQ.js").then(z=>z.aE);return{doc:c,updateDoc:$,collection:C,addDoc:N,query:h,where:A,getDocs:I,serverTimestamp:F,deleteField:O}},__vite__mapDeps([0,1]),import.meta.url);for(const c of t){const $=c.labelNumber||c.id.split("_")[0],C=c.id,N=c.rentedBy,h=c.rentedAt,A=e(L,"books",C);if(await o(A,{status:"available",rentedBy:k(),rentedAt:k(),expectedReturnDate:k()}),N){const I=a(L,"rentalHistory"),F=c.isbn13||c.isbn||"",O=v(I,u("userId","==",N),u("isbn13","==",F)),z=await b(O);if(z.empty)await r(I,{bookId:C,labelNumber:$,isbn13:c.isbn13||"",isbn:c.isbn||"",title:c.title||"",author:c.author||"",publisher:c.publisher||"",cover:c.cover||c.image||"",center:c.center||"",userId:N,rentedAt:h,returnedAt:x(),rentCount:1});else{const l=z.docs[0],Z=l.data();await o(e(L,"rentalHistory",l.id),{rentedAt:h,returnedAt:x(),rentCount:(Z.rentCount||1)+1})}}}y.value=[],await j(),await B(`${t.length}권의 도서가 반납 처리되었습니다.`,{type:"success"})}catch(e){console.error("도서 반납 오류:",e),await B("도서 반납에 실패했습니다.",{type:"error"})}finally{T.value=!1}},kt=async t=>{const e=S(t);if(e!=="rented"&&e!=="overdue"){await B("대여중인 도서가 아닙니다.",{type:"warning"});return}if(await ue(`"${t.title}" 도서를 반납 처리하시겠습니까?
라벨번호: ${t.labelNumber||"-"}`))try{T.value=!0;const{doc:o,updateDoc:a,collection:r,addDoc:v,query:u,where:b,getDocs:x,serverTimestamp:k,deleteField:c}=await oe(async()=>{const{doc:I,updateDoc:F,collection:O,addDoc:z,query:l,where:Z,getDocs:_,serverTimestamp:re,deleteField:Ct}=await import("./Boo3KTuQ.js").then(Dt=>Dt.aE);return{doc:I,updateDoc:F,collection:O,addDoc:z,query:l,where:Z,getDocs:_,serverTimestamp:re,deleteField:Ct}},__vite__mapDeps([0,1]),import.meta.url),$=t.id,C=t.rentedBy,N=t.rentedAt,h=t.labelNumber||t.id.split("_")[0],A=o(L,"books",$);if(await a(A,{status:"available",rentedBy:c(),rentedAt:c(),expectedReturnDate:c()}),C){const I=r(L,"rentalHistory"),F=t.isbn13||t.isbn||"",O=u(I,b("userId","==",C),b("isbn13","==",F)),z=await x(O);if(z.empty)await v(I,{bookId:$,labelNumber:h,isbn13:t.isbn13||"",isbn:t.isbn||"",title:t.title||"",author:t.author||"",publisher:t.publisher||"",cover:t.cover||t.image||"",center:t.center||"",userId:C,rentedAt:N,returnedAt:k(),rentCount:1});else{const l=z.docs[0],Z=l.data();await a(o(L,"rentalHistory",l.id),{rentedAt:N,returnedAt:k(),rentCount:(Z.rentCount||1)+1})}}await j(),await B("도서가 반납 처리되었습니다.",{type:"success"})}catch(o){console.error("도서 반납 오류:",o),await B("도서 반납에 실패했습니다.",{type:"error"})}finally{T.value=!1}};return Ft({title:"도서 관리 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록 관리"}]}),(t,e)=>{const o=E("v-select"),a=E("v-text-field"),r=E("v-checkbox"),v=E("v-btn"),u=E("v-progress-circular"),b=E("v-chip"),x=E("v-icon"),k=At,c=It,$=E("v-navigation-drawer"),C=E("v-spacer"),N=E("v-card"),h=E("v-dialog"),A=E("v-card-title"),I=E("v-autocomplete"),F=E("v-card-text"),O=E("v-card-actions"),z=E("v-app");return g(),X(z,null,{default:f(()=>[i(k,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[5]||(e[5]=l=>se.value=!s(se))},{default:f(()=>[n("div",Ot,[n("div",zt,[n("div",Pt,[n("h1",Mt,w(s(D))+" 도서 관리 ",1),i(o,{modelValue:s(D),"onUpdate:modelValue":[e[0]||(e[0]=l=>M(D)?D.value=l:null),Ye],items:ve,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),n("div",Gt,[n("div",Ht,[n("div",Wt,[n("div",Qt,[e[14]||(e[14]=d(" 총 ",-1)),n("strong",null,w(s(tt)),1),d("권 ("+w(s(ot))+"종) ",1)]),n("div",jt,[e[15]||(e[15]=d(" 대여중 ",-1)),n("strong",null,w(s(st)),1),e[16]||(e[16]=d("권, 연체중 ",-1)),n("strong",null,w(s(at)),1),e[17]||(e[17]=d("권, 대여신청 ",-1)),n("strong",null,w(s(lt)),1),e[18]||(e[18]=d("권 ",-1))])]),n("div",Xt,[i(a,{modelValue:s(W),"onUpdate:modelValue":[e[1]||(e[1]=l=>M(W)?W.value=l:null),et],label:"도서/라벨번호 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"registered-search-input"},null,8,["modelValue"]),i(o,{modelValue:s(U),"onUpdate:modelValue":e[2]||(e[2]=l=>M(U)?U.value=l:null),items:Qe,label:"정렬",variant:"outlined",density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),n("div",Jt,[i(r,{modelValue:s(ce),"onUpdate:modelValue":[e[3]||(e[3]=l=>M(ce)?ce.value=l:null),dt],label:"전체선택","hide-details":"",class:"select-all-checkbox"},null,8,["modelValue"]),n("div",Kt,[s(U)==="location"?(g(),X(o,{key:0,modelValue:s(ae),"onUpdate:modelValue":e[4]||(e[4]=l=>M(ae)?ae.value=l:null),items:s(Xe),label:"위치",variant:"outlined",density:"compact","hide-details":"",class:"location-filter-select"},null,8,["modelValue","items"])):ie("",!0),i(v,{class:"action-btn",variant:"flat",size:"small",disabled:s(y).length===0,loading:s(T),onClick:yt},{default:f(()=>[...e[19]||(e[19]=[d(" 도서 삭제 ",-1)])]),_:1},8,["disabled","loading"]),i(v,{class:"action-btn",variant:"flat",size:"small",disabled:s(y).length===0,loading:s(T),onClick:bt},{default:f(()=>[...e[20]||(e[20]=[d(" 대여 처리 ",-1)])]),_:1},8,["disabled","loading"]),i(v,{class:"action-btn",variant:"flat",size:"small",disabled:s(y).length===0,loading:s(T),onClick:wt},{default:f(()=>[...e[21]||(e[21]=[d(" 반납 처리 ",-1)])]),_:1},8,["disabled","loading"])])])]),s(me)?(g(),V("div",Yt,[i(u,{indeterminate:"",color:"primary"})])):s(ne).length>0?(g(),V("div",Zt,[(g(!0),V(qe,null,Se(s(ne),(l,Z)=>(g(),V("div",{key:`group-${Z}`,class:Ue(["book-card",{"book-card-selected":Re(l)||nt(l)}])},[n("div",{class:"book-card-header",onClick:_=>ut(l)},[l.image?(g(),V("img",{key:0,src:l.image,alt:l.title,class:"book-thumbnail"},null,8,to)):(g(),V("div",oo,[...e[22]||(e[22]=[n("span",null,"NO IMAGE",-1)])])),n("div",so,[n("div",ao,w(l.title),1),l.author?(g(),V("div",lo,[e[23]||(e[23]=n("strong",null,"저자:",-1)),d(" "+w(l.author),1)])):ie("",!0),l.publisher?(g(),V("div",no,[e[24]||(e[24]=n("strong",null,"출판사:",-1)),d(" "+w(l.publisher),1)])):ie("",!0),n("div",ro," 등록 "+w(l.totalCount)+"권 ",1)])],8,eo),n("div",io,[(g(!0),V(qe,null,Se(l.copies,_=>(g(),V("div",{key:_.id,class:Ue(["book-copy-item",{selected:Y(_)}]),onClick:re=>ct(_)},[n("div",co,[n("div",vo,[n("div",mo,[te(_)==="rented"?(g(),X(b,{key:0,size:"x-small",color:"primary",variant:"flat"},{default:f(()=>[...e[25]||(e[25]=[d(" 대여중 ",-1)])]),_:1})):te(_)==="overdue"?(g(),X(b,{key:1,size:"x-small",color:"error",variant:"flat"},{default:f(()=>[...e[26]||(e[26]=[d(" 연체중 ",-1)])]),_:1})):te(_)==="requested"?(g(),X(b,{key:2,size:"x-small",color:"warning",variant:"flat"},{default:f(()=>[...e[27]||(e[27]=[d(" 대여신청 ",-1)])]),_:1})):(g(),X(b,{key:3,size:"x-small",color:"success",variant:"outlined"},{default:f(()=>[...e[28]||(e[28]=[d(" 대여가능 ",-1)])]),_:1})),Ne(_)||he(_)?(g(),V("span",po,w(Ne(_)||he(_)),1)):ie("",!0)]),n("a",{href:"#",class:"copy-edit-link",onClick:ke(re=>ft(_),["prevent","stop"])}," 정보수정 ",8,fo)]),n("div",go,[n("span",yo,w(_.labelNumber||"라벨없음"),1),e[30]||(e[30]=n("span",{class:"copy-divider"},"|",-1)),n("span",bo,[i(x,{size:"small",class:"mr-1"},{default:f(()=>[...e[29]||(e[29]=[d(" mdi-map-marker ",-1)])]),_:1}),d(" "+w(s(Fe)(_.location)||"위치없음"),1)])]),n("div",_o,[te(_)==="rented"||te(_)==="overdue"?(g(),X(v,{key:0,color:"primary",size:"small",variant:"flat",onClick:ke(re=>kt(_),["stop"])},{default:f(()=>[...e[31]||(e[31]=[d(" 반납처리 ",-1)])]),_:1},8,["onClick"])):(g(),X(v,{key:1,color:"primary",size:"small",variant:"flat",onClick:ke(re=>_t(_),["stop"])},{default:f(()=>[d(w(te(_)==="requested"?"대여승인":"대여처리"),1)]),_:2},1032,["onClick"]))])])],10,uo))),128))])],2))),128))])):(g(),V("div",ho,[i(x,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:f(()=>[d(w(s(W)?"mdi-book-search-outline":"mdi-book-off-outline"),1)]),_:1}),s(W)?(g(),V("p",wo,[e[32]||(e[32]=d(" '",-1)),n("strong",null,w(s(W)),1),e[33]||(e[33]=d("'에 대한 검색 결과가 없습니다. ",-1))])):(g(),V("p",ko," 등록된 도서가 없습니다. "))]))])])]),_:1}),i($,{modelValue:s(se),"onUpdate:modelValue":e[6]||(e[6]=l=>M(se)?se.value=l:null),location:"right",temporary:"",width:s(xe),class:"side-navigation"},{default:f(()=>[n("div",Co,[i(c)])]),_:1},8,["modelValue","width"]),i(h,{modelValue:s(ee),"onUpdate:modelValue":e[9]||(e[9]=l=>M(ee)?ee.value=l:null),"max-width":"400",persistent:""},{default:f(()=>[i(N,{class:"rent-dialog-card"},{default:f(()=>[e[36]||(e[36]=n("div",{class:"rent-dialog-title text-h6"}," 대여자 정보 입력 ",-1)),n("div",Do,[n("div",Bo," 대여 처리할 도서: "+w(s(Q).length)+"권 ",1),i(o,{modelValue:s(G),"onUpdate:modelValue":e[7]||(e[7]=l=>M(G)?G.value=l:null),items:ve,label:"센터",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),i(a,{modelValue:s(H),"onUpdate:modelValue":e[8]||(e[8]=l=>M(H)?H.value=l:null),label:"이메일",variant:"outlined",density:"comfortable",placeholder:"example@email.com","error-messages":s(P)},null,8,["modelValue","error-messages"])]),n("div",xo,[i(C),i(v,{variant:"text",onClick:Ae},{default:f(()=>[...e[34]||(e[34]=[d(" 취소 ",-1)])]),_:1}),i(v,{color:"primary",variant:"flat",loading:s(ge),disabled:!s(G)||!s(H),onClick:ht},{default:f(()=>[...e[35]||(e[35]=[d(" 대여 처리 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1},8,["modelValue"]),i(h,{modelValue:s(le),"onUpdate:modelValue":e[13]||(e[13]=l=>M(le)?le.value=l:null),"max-width":"500",persistent:""},{default:f(()=>[i(N,{class:"edit-dialog-card"},{default:f(()=>[i(A,{class:"edit-dialog-title"},{default:f(()=>[...e[37]||(e[37]=[d(" 도서 정보 수정 ",-1)])]),_:1}),i(F,{class:"edit-dialog-content"},{default:f(()=>[s(R)?(g(),V("div",Vo,[n("div",No,[s(R).image?(g(),V("img",{key:0,src:s(R).image,alt:s(R).title,class:"book-thumbnail"},null,8,Eo)):(g(),V("div",Ro,[...e[38]||(e[38]=[n("span",null,"No Image",-1)])])),n("div",$o,[n("div",Lo,w(s(R).title),1),n("div",Ao,w(s(R).labelNumber||"라벨없음"),1),n("div",Io,[i(x,{size:"small",class:"mr-1"},{default:f(()=>[...e[39]||(e[39]=[d(" mdi-map-marker ",-1)])]),_:1}),d(" "+w(s(Fe)(s(R).location)||"위치없음"),1)])])])])):ie("",!0),i(I,{modelValue:s(m).category,"onUpdate:modelValue":e[10]||(e[10]=l=>s(m).category=l),items:s(be),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:s(_e),class:"mb-3"},null,8,["modelValue","items","loading"]),n("div",qo,[i(a,{"model-value":s(Je),label:"센터코드",variant:"outlined",density:"comfortable",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),i(a,{modelValue:s(m).fourDigits,"onUpdate:modelValue":e[11]||(e[11]=l=>s(m).fourDigits=l),label:"4자리 번호 *",variant:"outlined",density:"comfortable",maxlength:"4","error-messages":s(K),hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:mt,onBlur:pt},null,8,["modelValue","error-messages"])]),i(o,{modelValue:s(m).location,"onUpdate:modelValue":e[12]||(e[12]=l=>s(m).location=l),items:s(je),label:"위치 *",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),_:1}),i(O,{class:"edit-dialog-actions"},{default:f(()=>[i(C),i(v,{variant:"text",onClick:$e},{default:f(()=>[...e[40]||(e[40]=[d(" 취소 ",-1)])]),_:1}),i(v,{color:"primary",variant:"flat",loading:s(ye),disabled:!s(Ve),onClick:gt},{default:f(()=>[...e[41]||(e[41]=[d(" 저장 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Ho=Bt(So,[["__scopeId","data-v-42b96ec1"]]);export{Ho as default};
