const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./H8Z8LE6b.js","./entry.yfGVSS21.css"])))=>i.map(i=>d[i]);
import{F as vt,N as mt,a as bt,r as b,k as E,o as Ge,e as ft,_ as ee,Y as _t,O as F,L as i,g as w,H as u,K as l,P as o,I as a,J as v,Q as q,G as m,M as r,R as W,U as x,S as ke,Z as pt,T as kt,W as ye}from"./H8Z8LE6b.js";import{_ as yt}from"./C4xqBPx2.js";import{g as ht,C as wt,_ as gt,c as Ue}from"./BbFETXTL.js";import{u as Ct,_ as Rt}from"./B_JeLZBQ.js";import{u as xt,h as he,_ as Dt}from"./DZyQwHeg.js";import{f as we}from"./yWPze8eg.js";import{u as Nt}from"./9l_XyyT8.js";import{u as Vt}from"./B54HU3Ip.js";import"./teippYbc.js";import"./C-xtXPWq.js";const Bt={class:"books-page"},Lt={class:"center-header mb-6"},St={class:"center-header-inner"},Et={class:"page-title mb-0"},It={class:"registered-books-section"},qt={class:"registered-books-header mb-0"},At={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},Pt={class:"text-body-1"},Mt={class:"d-flex align-center registered-search-group"},Tt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mt-4"},$t={class:"text-body-2 text-medium-emphasis"},zt={key:0,class:"text-center py-8 mt-6"},Gt={key:1,class:"registered-books-grid mt-6"},Ut={key:0,class:"pagination-section"},Ot={key:2,class:"text-center py-8 mt-6 text-medium-emphasis empty-state"},Ht={key:0},Ft={key:1},Wt={key:0,class:"sticky-rent-bar"},jt={class:"sticky-rent-info"},Qt={class:"selected-count"},Xt={class:"rent-status"},Jt={class:"drawer-content"},Kt={key:0,class:"rent-book-card mb-4"},Yt={class:"rent-book-card-inner"},Zt=["src","alt"],eo={key:1,class:"rent-book-thumbnail-placeholder"},to={class:"rent-book-meta"},oo={class:"rent-book-title"},so={key:0,class:"rent-book-author"},ao={key:1,class:"rent-book-publisher"},lo={class:"label-select-list"},no={class:"label-select-header mb-2"},io=["onClick"],ro={class:"label-info"},uo={class:"label-number"},co={class:"label-location"},vo={class:"location-text"},mo={key:0,class:"rent-book-card"},bo={class:"rent-book-card-inner"},fo=["src","alt"],_o={key:1,class:"rent-book-thumbnail-placeholder"},po={class:"rent-book-meta"},ko={class:"rent-book-title"},yo={key:0,class:"rent-book-author"},ho={key:1,class:"rent-book-publisher"},wo={class:"rent-book-details"},go={class:"detail-item"},Co={class:"detail-item location-item"},Ro={class:"location-text"},xo={class:"rent-confirm-info mb-4"},Do={key:0,class:"text-caption text-grey mt-1"},No={class:"multi-rent-book-list"},Vo={class:"rent-book-card-inner"},Bo=["src","alt"],Lo={key:1,class:"rent-book-thumbnail-placeholder"},So={class:"rent-book-meta"},Eo={class:"rent-book-title"},Io={key:0,class:"rent-book-author"},qo={key:1,class:"rent-book-publisher"},Ao={class:"rent-book-details"},Po={class:"detail-item"},Mo={class:"detail-item location-item"},To={class:"location-text"},ge=10,G=5,$o={__name:"index",setup(zo){const{user:p}=Nt(),{getBooksByCenter:Oe,calculateBookStatus:j,rentBook:Ce,requestRent:Re,checkAlreadyRentedSameIsbn:xe}=xt(),{confirm:De,alert:y}=mt(),{$firebaseFirestore:He}=bt(),B=He,{drawer:Q,drawerWidth:Ne}=Ct(),Ve=[...wt],f=b(""),le=b(""),te=b([]),ne=b(!1),I=b(""),U=b("date"),Fe=[{title:"등록일순",value:"date"},{title:"제목순",value:"title"}],X=b(1),k=b([]),A=b(!1),P=b(0),M=b(!1),_=b(null),g=b(""),L=b(""),C=b(null),J=b(!1),O=b(!1),K=b(!1),oe=b(!1),Y=b(!1),se=b([]),ie=b(null),We=E(()=>he(f.value));Ge(()=>{const t=()=>{Ne.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),ft(()=>{window.removeEventListener("resize",t)})});const je=async()=>{if(!p.value||!B)return"";try{const{doc:t,getDoc:e}=await ee(async()=>{const{doc:n,getDoc:R}=await import("./H8Z8LE6b.js").then(V=>V.b2);return{doc:n,getDoc:R}},__vite__mapDeps([0,1]),import.meta.url),c=t(B,"users",p.value.uid),d=await e(c);if(d.exists())return d.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Ge(async()=>{const t=await je();le.value=t,f.value=t?ht(t):Ve[0],await Promise.all([H(),re(),Be()])});const Be=async()=>{if(!(!p.value||!B))try{const{collection:t,query:e,where:c,getDocs:d}=await ee(async()=>{const{collection:D,query:S,where:h,getDocs:$}=await import("./H8Z8LE6b.js").then(z=>z.b2);return{collection:D,query:S,where:h,getDocs:$}},__vite__mapDeps([0,1]),import.meta.url),n=t(B,"returnNotifySubscriptions"),R=e(n,c("userId","==",p.value.uid),c("center","==",f.value),c("notified","==",!1)),V=await d(R),N=[];V.forEach(D=>{N.push(D.data().isbn)}),se.value=N}catch(t){console.error("반납 알림 구독 목록 로드 오류:",t),se.value=[]}},Qe=t=>se.value.includes(t),Xe=async t=>{if(!(!p.value||!B||!t))try{ie.value=t.isbn;const{collection:e,addDoc:c,serverTimestamp:d}=await ee(async()=>{const{collection:R,addDoc:V,serverTimestamp:N}=await import("./H8Z8LE6b.js").then(D=>D.b2);return{collection:R,addDoc:V,serverTimestamp:N}},__vite__mapDeps([0,1]),import.meta.url),n=e(B,"returnNotifySubscriptions");await c(n,{userId:p.value.uid,userEmail:p.value.email,isbn:t.isbn,title:t.title,center:f.value,notified:!1,createdAt:d()}),se.value.push(t.isbn),await y(`반납 알림이 신청되었습니다.
도서가 반납되면 알림을 받으실 수 있습니다.`,{type:"success"})}catch(e){console.error("반납 알림 구독 오류:",e),await y("반납 알림 신청에 실패했습니다.",{type:"error"})}finally{ie.value=null}},re=async()=>{if(!p.value||!B){P.value=0;return}try{const{collection:t,query:e,where:c,getDocs:d}=await ee(async()=>{const{collection:D,query:S,where:h,getDocs:$}=await import("./H8Z8LE6b.js").then(z=>z.b2);return{collection:D,query:S,where:h,getDocs:$}},__vite__mapDeps([0,1]),import.meta.url),n=t(B,"books"),R=e(n,c("rentedBy","==",p.value.uid)),V=await d(R);let N=0;V.forEach(D=>{const S=D.data();(S.status==="rented"||S.status==="overdue")&&N++}),P.value=N}catch(t){console.error("대여중인 도서 수 로드 오류:",t),P.value=0}},ae=E(()=>P.value<G),T=E(()=>G-P.value),Je=async()=>{k.value=[],await Promise.all([H(),Be()])},H=async()=>{try{ne.value=!0;const t=await Oe(f.value);te.value=t}catch(t){console.error("등록된 도서 로드 오류:",t),te.value=[]}finally{ne.value=!1}},Ke=()=>{},Le=E(()=>{const t=new Map;for(const e of te.value){const c=e.isbn13||e.isbn||e.id;t.has(c)||t.set(c,{isbn:c,title:e.title,author:e.author,publisher:e.publisher,image:e.image,copies:[],totalCount:0,availableCount:0,locations:[]});const d=t.get(c);d.copies.push(e),d.totalCount++,j(e)||(d.availableCount++,e.location&&!d.locations.includes(e.location)&&d.locations.push(e.location))}for(const e of t.values())e.copies.sort((c,d)=>{const n=c.labelNumber||"",R=d.labelNumber||"";return n.localeCompare(R,"ko")});return Array.from(t.values())}),ue=E(()=>{let t=[...Le.value];if(I.value.trim()){const e=I.value.toLowerCase();t=t.filter(c=>{const d=(c.title||"").toLowerCase(),n=(c.author||"").toLowerCase(),R=(c.publisher||"").toLowerCase();return d.includes(e)||n.includes(e)||R.includes(e)})}return U.value==="title"?t.sort((e,c)=>{const d=(e.title||"").toLowerCase(),n=(c.title||"").toLowerCase();return d.localeCompare(n,"ko")}):U.value==="date"&&t.sort((e,c)=>{const d=e.copies[0]?.registeredAt?.toDate?.()||new Date(0);return(c.copies[0]?.registeredAt?.toDate?.()||new Date(0))-d}),t}),Se=E(()=>Math.ceil(ue.value.length/ge)),Ye=E(()=>{const t=(X.value-1)*ge,e=t+ge;return ue.value.slice(t,e)});_t([I,U],()=>{X.value=1});const Ze=E(()=>te.value.length),et=E(()=>Le.value.length),Ee=t=>t.copies[0]||{title:t.title,author:t.author,publisher:t.publisher,image:t.image,isbn:t.isbn},tt=t=>t.availableCount===0?t.copies.some(c=>j(c)==="requested")?"requested":"rented":null,Ie=t=>t.availableCount===0,qe=t=>k.value.some(e=>e.isbn===t.isbn),Ae=E(()=>_.value?_.value.copies.filter(t=>!j(t)):[]),ot=async t=>{if(qe(t)){k.value=k.value.filter(n=>n.isbn!==t.isbn);return}if(!ae.value){await y(`${G}권을 대여중입니다. 대여중인 도서를 반납 후 대여해주세요.`,{type:"warning"});return}if(k.value.length>=T.value){await y(`현재 ${T.value}권까지 추가 대여 가능합니다.`,{type:"warning"});return}if(t.availableCount===0){await y("현재 대여 가능한 도서가 없습니다.",{type:"warning"});return}const e=await xe(p.value.uid,t.isbn,f.value);if(e){await y(`이미 같은 도서를 대여중입니다.
(라벨번호: ${e.labelNumber||"-"})`,{type:"warning"});return}if(await Me(t.isbn)&&!await De(`이미 읽은 책입니다.
정말로 대여하시겠습니까?`))return;const d=t.copies.filter(n=>!j(n));if(d.length===1){const n=d[0];k.value.push({isbn:t.isbn,labelNumber:n.labelNumber,location:n.location,book:n})}else _.value=t,g.value="",L.value="",J.value=!0,M.value=!0},st=t=>{g.value=t.labelNumber,L.value=t.location,C.value=t},Pe=()=>{M.value=!1,_.value=null,g.value="",L.value="",C.value=null,J.value=!1},at=()=>{!_.value||!g.value||(J.value?(k.value.push({isbn:_.value.isbn,labelNumber:g.value,location:L.value,book:C.value}),Pe()):(M.value=!1,O.value=!0))},Me=async t=>{if(!p.value||!B||!t)return null;try{const{collection:e,query:c,where:d,getDocs:n}=await ee(async()=>{const{collection:D,query:S,where:h,getDocs:$}=await import("./H8Z8LE6b.js").then(z=>z.b2);return{collection:D,query:S,where:h,getDocs:$}},__vite__mapDeps([0,1]),import.meta.url),R=e(B,"rentalHistory"),V=c(R,d("userId","==",p.value.uid),d("isbn13","==",t)),N=await n(V);return N.empty?null:N.docs[0].data()}catch(e){return console.error("읽은 책 목록 확인 오류:",e),null}},lt=async t=>{if(!p.value||!t)return;if(!ae.value){await y(`${G}권을 대여중입니다. 대여중인 도서를 반납 후 대여해주세요.`,{type:"warning"});return}if(t.availableCount===0){await y("현재 대여 가능한 도서가 없습니다.",{type:"warning"});return}const e=await xe(p.value.uid,t.isbn,f.value);if(e){await y(`이미 같은 도서를 대여중입니다.
(라벨번호: ${e.labelNumber||"-"})`,{type:"warning"});return}if(await Me(t.isbn)&&!await De(`이미 읽은 책입니다.
정말로 대여하시겠습니까?`))return;const d=t.copies.filter(n=>!j(n));if(d.length===1){const n=d[0];_.value=t,g.value=n.labelNumber,L.value=n.location,C.value=n,J.value=!1,O.value=!0}else _.value=t,g.value="",L.value="",C.value=null,J.value=!1,M.value=!0},ce=()=>{O.value=!1,_.value=null,g.value="",L.value="",C.value=null},nt=()=>{Y.value=!0},Te=t=>{L.value=t,Y.value=!0},it=async()=>{if(!_.value||!g.value||!C.value)return;const t=Ue(le.value,f.value);try{A.value=!0,t?(await Ce(g.value,f.value,p.value.uid,_.value.isbn),await Promise.all([H(),re()]),ce(),await y("도서 대여가 완료되었습니다.",{type:"success"})):(await Re(g.value,f.value,p.value.uid,_.value.isbn),await H(),ce(),await y(`도서 대여가 신청되었습니다.
관리자 승인 후 대여가 완료됩니다.`,{type:"success"}))}catch(e){console.error("대여 처리 오류:",e),await y(e.message||"대여 처리에 실패했습니다.",{type:"error"})}finally{A.value=!1}},$e=async()=>{if(k.value.length===0||!p.value)return;const t=Ue(le.value,f.value);if(t){if(!ae.value){await y(`${G}권을 대여중입니다. 대여중인 도서를 반납 후 대여해주세요.`,{type:"warning"});return}if(k.value.length>T.value){await y(`현재 ${T.value}권까지 추가 대여 가능합니다.`,{type:"warning"});return}}oe.value=t,K.value=!0},de=()=>{K.value=!1},rt=async()=>{try{A.value=!0;const t=k.value.length;if(oe.value){for(const e of k.value)await Ce(e.labelNumber,f.value,p.value.uid,e.isbn);await Promise.all([H(),re()]),de(),await y(`${t}권의 도서 대여가 완료되었습니다.`,{type:"success"})}else{for(const e of k.value)await Re(e.labelNumber,f.value,p.value.uid,e.isbn);await H(),de(),await y(`${t}권의 도서 대여가 신청되었습니다.
관리자 승인 후 대여가 완료됩니다.`,{type:"success"})}k.value=[]}catch(t){console.error("대여 신청 오류:",t),await y(t.message||"대여 신청에 실패했습니다.",{type:"error"})}finally{A.value=!1}};return Vt({title:"도서 대여 - CNX Library",meta:[{name:"description",content:"센터별 도서 대여 신청"}]}),(t,e)=>{const c=w("v-select"),d=w("v-text-field"),n=w("v-btn"),R=w("v-progress-circular"),V=yt,N=w("v-col"),D=w("v-row"),S=w("v-pagination"),h=w("v-icon"),$=gt,z=Rt,ut=w("v-navigation-drawer"),ve=w("v-card-title"),me=w("v-card-text"),be=w("v-spacer"),fe=w("v-card-actions"),_e=w("v-card"),pe=w("v-dialog"),ze=w("v-alert"),ct=Dt,dt=w("v-app");return u(),F(dt,null,{default:i(()=>[l($,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[4]||(e[4]=s=>Q.value=!o(Q))},{default:i(()=>[a("div",Bt,[a("div",Lt,[a("div",St,[a("h1",Et,v(o(f))+" 도서 대여 ",1),l(c,{modelValue:o(f),"onUpdate:modelValue":[e[0]||(e[0]=s=>q(f)?f.value=s:null),Je],items:Ve,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),a("div",It,[a("div",qt,[a("div",At,[a("div",Pt,[e[10]||(e[10]=r(" 총 ",-1)),a("strong",null,v(o(Ze)),1),r("권 ("+v(o(et))+"종) ",1)])]),a("div",Mt,[l(d,{modelValue:o(I),"onUpdate:modelValue":[e[1]||(e[1]=s=>q(I)?I.value=s:null),Ke],label:"도서 검색",placeholder:"도서명 또는 ISBN-13으로 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"registered-search-input"},null,8,["modelValue"]),l(c,{modelValue:o(U),"onUpdate:modelValue":e[2]||(e[2]=s=>q(U)?U.value=s:null),items:Fe,label:"정렬",variant:"outlined",density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),a("div",Tt,[a("div",$t,[o(P)>=G?(u(),m(W,{key:0},[r(v(G)+"권 대여중 (반납 후 대여 가능) ")],64)):o(k).length>0?(u(),m(W,{key:1},[r(v(o(k).length)+"권 선택됨 ("+v(o(P))+"권 대여중, "+v(o(T))+"권 추가 가능) ",1)],64)):(u(),m(W,{key:2},[r(" 대여할 도서를 선택하세요 ("+v(o(P))+"권 대여중, "+v(o(T))+"권 추가 가능) ",1)],64))]),l(n,{class:"rent-request-btn",variant:"flat",size:"small",disabled:o(k).length===0||!o(ae),loading:o(A),onClick:$e},{default:i(()=>[...e[11]||(e[11]=[r(" 대여 신청 ",-1)])]),_:1},8,["disabled","loading"])])]),o(ne)?(u(),m("div",zt,[l(R,{indeterminate:"",color:"primary"})])):o(ue).length>0?(u(),m("div",Gt,[l(D,{class:"book-list-row"},{default:i(()=>[(u(!0),m(W,null,ke(o(Ye),(s,Z)=>(u(),F(N,{key:`group-${Z}`,cols:"12",sm:"6",class:"book-list-col"},{default:i(()=>[l(V,{book:Ee(s),center:o(f),"registered-books":[Ee(s)],"is-registered":!0,"show-action":!1,selectable:!Ie(s),selected:qe(s),status:tt(s),"show-status-flags":!0,disabled:!1,"hide-overdue-status":!0,"show-rent-button":!0,"show-quantity":s.totalCount>1,"available-count":s.availableCount,"total-count":s.totalCount,"show-return-notify-button":Ie(s),"is-subscribed-to-return":Qe(s.isbn),"return-notify-loading":o(ie)===s.isbn,onSelect:()=>ot(s),onRent:()=>lt(s),onSubscribeReturnNotify:()=>Xe(s)},null,8,["book","center","registered-books","selectable","selected","status","show-quantity","available-count","total-count","show-return-notify-button","is-subscribed-to-return","return-notify-loading","onSelect","onRent","onSubscribeReturnNotify"])]),_:2},1024))),128))]),_:1}),o(Se)>1?(u(),m("div",Ut,[l(S,{modelValue:o(X),"onUpdate:modelValue":e[3]||(e[3]=s=>q(X)?X.value=s:null),length:o(Se),"total-visible":5,density:"compact",size:"small",class:"pagination"},null,8,["modelValue","length"])])):x("",!0)])):(u(),m("div",Ot,[l(h,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:i(()=>[r(v(o(I)?"mdi-book-search-outline":"mdi-book-off-outline"),1)]),_:1}),o(I)?(u(),m("p",Ht,[e[12]||(e[12]=r(" '",-1)),a("strong",null,v(o(I)),1),e[13]||(e[13]=r("'에 대한 검색 결과가 없습니다. ",-1))])):(u(),m("p",Ft," 등록된 도서가 없습니다. "))]))])]),l(pt,{name:"slide-up"},{default:i(()=>[o(k).length>0?(u(),m("div",Wt,[a("div",jt,[a("span",Qt,v(o(k).length)+"권 선택",1),a("span",Xt,"("+v(o(T))+"권 추가 가능)",1)]),l(n,{class:"sticky-rent-btn",variant:"flat",loading:o(A),onClick:$e},{default:i(()=>[...e[14]||(e[14]=[r(" 대여 신청 ",-1)])]),_:1},8,["loading"])])):x("",!0)]),_:1})]),_:1}),l(ut,{modelValue:o(Q),"onUpdate:modelValue":e[5]||(e[5]=s=>q(Q)?Q.value=s:null),location:"right",temporary:"",width:o(Ne),class:"side-navigation"},{default:i(()=>[a("div",Jt,[l(z)])]),_:1},8,["modelValue","width"]),l(pe,{modelValue:o(M),"onUpdate:modelValue":e[6]||(e[6]=s=>q(M)?M.value=s:null),"max-width":"450"},{default:i(()=>[l(_e,{class:"label-select-card"},{default:i(()=>[l(ve,{class:"label-select-title"},{default:i(()=>[...e[15]||(e[15]=[r(" 대여할 도서 선택 ",-1)])]),_:1}),l(me,{class:"label-select-content"},{default:i(()=>[o(_)?(u(),m("div",Kt,[a("div",Yt,[o(_).image?(u(),m("img",{key:0,src:o(_).image,alt:o(_).title,class:"rent-book-thumbnail"},null,8,Zt)):(u(),m("div",eo,[...e[16]||(e[16]=[a("span",null,"NO IMAGE",-1)])])),a("div",to,[a("div",oo,v(o(_).title),1),o(_).author?(u(),m("div",so,[e[17]||(e[17]=a("strong",null,"저자:",-1)),r(" "+v(o(_).author),1)])):x("",!0),o(_).publisher?(u(),m("div",ao,[e[18]||(e[18]=a("strong",null,"출판사:",-1)),r(" "+v(o(_).publisher),1)])):x("",!0)])])])):x("",!0),a("div",lo,[a("div",no," 대여 가능한 도서 ("+v(o(Ae).length)+"권) ",1),(u(!0),m(W,null,ke(o(Ae),s=>(u(),m("div",{key:s.id,class:kt(["label-option",{selected:o(g)===s.labelNumber}]),onClick:Z=>st(s)},[a("div",ro,[a("div",uo,[l(h,{size:"small",class:"mr-1"},{default:i(()=>[...e[19]||(e[19]=[r(" mdi-label ",-1)])]),_:1}),r(" "+v(s.labelNumber||"라벨없음"),1)]),a("div",co,[l(h,{size:"small",class:"mr-1"},{default:i(()=>[...e[20]||(e[20]=[r(" mdi-map-marker ",-1)])]),_:1}),a("span",vo,v(o(we)(s.location)||"위치없음"),1),o(he)(o(f),s.location)?(u(),F(h,{key:0,size:"small",class:"ml-1 location-info-icon",onClick:ye(Z=>Te(s.location),["stop"])},{default:i(()=>[...e[21]||(e[21]=[r(" mdi-information-outline ",-1)])]),_:1},8,["onClick"])):x("",!0)])]),o(g)===s.labelNumber?(u(),F(h,{key:0,color:"primary"},{default:i(()=>[...e[22]||(e[22]=[r(" mdi-check-circle ",-1)])]),_:1})):x("",!0)],10,io))),128))])]),_:1}),l(fe,{class:"label-select-actions"},{default:i(()=>[l(be),l(n,{variant:"text",onClick:Pe},{default:i(()=>[...e[23]||(e[23]=[r(" 취소 ",-1)])]),_:1}),l(n,{color:"primary",variant:"flat",disabled:!o(g),onClick:at},{default:i(()=>[...e[24]||(e[24]=[r(" 선택 완료 ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(pe,{modelValue:o(O),"onUpdate:modelValue":e[7]||(e[7]=s=>q(O)?O.value=s:null),"max-width":"500"},{default:i(()=>[l(_e,{class:"rent-confirm-card"},{default:i(()=>[l(ve,{class:"rent-confirm-title"},{default:i(()=>[...e[25]||(e[25]=[r(" 대여 확인 ",-1)])]),_:1}),l(me,{class:"rent-confirm-content"},{default:i(()=>[e[33]||(e[33]=a("div",{class:"rent-confirm-info mb-4"},[a("p",null,"아래 정보를 확인 후 대여해주세요.")],-1)),o(C)?(u(),m("div",mo,[a("div",bo,[o(C).image?(u(),m("img",{key:0,src:o(C).image,alt:o(C).title,class:"rent-book-thumbnail"},null,8,fo)):(u(),m("div",_o,[...e[26]||(e[26]=[a("span",null,"NO IMAGE",-1)])])),a("div",po,[a("div",ko,v(o(C).title),1),o(C).author?(u(),m("div",yo,[e[27]||(e[27]=a("strong",null,"저자:",-1)),r(" "+v(o(C).author),1)])):x("",!0),o(C).publisher?(u(),m("div",ho,[e[28]||(e[28]=a("strong",null,"출판사:",-1)),r(" "+v(o(C).publisher),1)])):x("",!0),a("div",wo,[a("span",go,[l(h,{size:"x-small",class:"mr-1"},{default:i(()=>[...e[29]||(e[29]=[r("mdi-label",-1)])]),_:1}),r(" "+v(o(g)),1)]),a("span",Co,[l(h,{size:"x-small",class:"mr-1"},{default:i(()=>[...e[30]||(e[30]=[r("mdi-map-marker",-1)])]),_:1}),a("span",Ro,v(o(we)(o(L))),1),o(We)?(u(),F(h,{key:0,size:"x-small",class:"ml-1 location-info-icon",onClick:ye(nt,["stop"])},{default:i(()=>[...e[31]||(e[31]=[r(" mdi-information-outline ",-1)])]),_:1})):x("",!0)])])])])])):x("",!0),l(ze,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:i(()=>[...e[32]||(e[32]=[r(" 위치와 라벨번호를 확인 후 해당 도서를 가져가주세요. ",-1)])]),_:1})]),_:1}),l(fe,{class:"rent-confirm-actions"},{default:i(()=>[l(be),l(n,{variant:"text",onClick:ce},{default:i(()=>[...e[34]||(e[34]=[r(" 취소 ",-1)])]),_:1}),l(n,{color:"primary",variant:"flat",loading:o(A),onClick:it},{default:i(()=>[...e[35]||(e[35]=[r(" 대여하기 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(pe,{modelValue:o(K),"onUpdate:modelValue":e[8]||(e[8]=s=>q(K)?K.value=s:null),"max-width":"500"},{default:i(()=>[l(_e,{class:"rent-confirm-card"},{default:i(()=>[l(ve,{class:"rent-confirm-title"},{default:i(()=>[...e[36]||(e[36]=[r(" 대여 확인 ",-1)])]),_:1}),l(me,{class:"rent-confirm-content"},{default:i(()=>[a("div",xo,[e[37]||(e[37]=a("p",null,"아래 도서들을 대여하시겠습니까?",-1)),o(oe)?x("",!0):(u(),m("p",Do," 관리자 승인 후 대여가 완료됩니다. "))]),a("div",No,[(u(!0),m(W,null,ke(o(k),(s,Z)=>(u(),m("div",{key:Z,class:"rent-book-card"},[a("div",Vo,[s.book?.image?(u(),m("img",{key:0,src:s.book.image,alt:s.book?.title,class:"rent-book-thumbnail"},null,8,Bo)):(u(),m("div",Lo,[...e[38]||(e[38]=[a("span",null,"NO IMAGE",-1)])])),a("div",So,[a("div",Eo,v(s.book?.title),1),s.book?.author?(u(),m("div",Io,[e[39]||(e[39]=a("strong",null,"저자:",-1)),r(" "+v(s.book.author),1)])):x("",!0),s.book?.publisher?(u(),m("div",qo,[e[40]||(e[40]=a("strong",null,"출판사:",-1)),r(" "+v(s.book.publisher),1)])):x("",!0),a("div",Ao,[a("span",Po,[l(h,{size:"x-small",class:"mr-1"},{default:i(()=>[...e[41]||(e[41]=[r("mdi-label",-1)])]),_:1}),r(" "+v(s.labelNumber),1)]),a("span",Mo,[l(h,{size:"x-small",class:"mr-1"},{default:i(()=>[...e[42]||(e[42]=[r("mdi-map-marker",-1)])]),_:1}),a("span",To,v(o(we)(s.location)),1),o(he)(o(f),s.location)?(u(),F(h,{key:0,size:"x-small",class:"ml-1 location-info-icon",onClick:ye(Go=>Te(s.location),["stop"])},{default:i(()=>[...e[43]||(e[43]=[r(" mdi-information-outline ",-1)])]),_:1},8,["onClick"])):x("",!0)])])])])]))),128))]),l(ze,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:i(()=>[...e[44]||(e[44]=[r(" 위치와 라벨번호를 확인 후 해당 도서를 가져가주세요. ",-1)])]),_:1})]),_:1}),l(fe,{class:"rent-confirm-actions"},{default:i(()=>[l(be),l(n,{variant:"text",onClick:de},{default:i(()=>[...e[45]||(e[45]=[r(" 취소 ",-1)])]),_:1}),l(n,{color:"primary",variant:"flat",loading:o(A),onClick:rt},{default:i(()=>[r(v(o(oe)?"대여하기":"대여 신청"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ct,{modelValue:o(Y),"onUpdate:modelValue":e[9]||(e[9]=s=>q(Y)?Y.value=s:null),center:o(f),location:o(L),"label-number":o(g)},null,8,["modelValue","center","location","label-number"])]),_:1})}}},Yo=vt($o,[["__scopeId","data-v-3dc4c34e"]]);export{Yo as default};
