const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ES9emHaY.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as Lt,N as At,a as qt,D as St,r as v,k as L,o as Pe,e as Ut,_ as le,Y as Fe,O as j,L as g,g as N,H as p,K as i,P as o,I as n,J as w,Q as U,G as B,M as d,T as ee,W as ze,X as Me,U as Ge,S as Ve}from"./ES9emHaY.js";import{g as Ot,C as Tt,_ as Pt}from"./soG2X86W.js";import{_ as Ft}from"./BE83yxxI.js";import{u as zt,g as He,C as Mt,c as xe,f as We,p as Gt}from"./ZgMz0SKc.js";import{u as Ht}from"./WvfOeGZd.js";import{u as Wt}from"./eEf3qI-Q.js";import"./7PxgnCfE.js";const Qt={class:"books-admin-page"},jt={class:"center-header mb-6"},Xt={class:"center-header-inner"},Jt={class:"page-title mb-0"},Kt={class:"registered-books-section"},Yt={class:"registered-books-header mb-0"},Zt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},eo={class:"text-body-1"},to={class:"text-body-2 text-medium-emphasis"},oo={class:"d-flex align-center registered-search-group"},so={class:"d-flex align-center justify-space-between flex-wrap gap-4 mt-4"},ao={class:"d-flex action-buttons"},lo={key:0,class:"text-center py-8"},no={key:1,class:"registered-books-section"},ro={class:"registered-books-grid"},io=["onClick"],uo=["src","alt"],co={key:1,class:"book-thumbnail-placeholder"},vo={class:"book-meta"},mo={class:"book-title"},po={key:0,class:"book-author"},fo={key:1,class:"book-publisher"},go={class:"book-count"},yo={class:"book-copies-list"},bo=["onClick"],_o={class:"copy-content"},ho={class:"copy-row-top"},wo={class:"copy-status"},ko={key:4,class:"copy-user-info"},Co=["onClick"],Do={class:"copy-info-row"},Bo={class:"copy-label-number"},Vo={class:"copy-location"},xo={class:"copy-actions"},No={key:0,class:"pagination-section"},Eo={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},Ro={key:0},$o={key:1},Io={class:"drawer-content"},Lo={class:"rent-dialog-content"},Ao={class:"mb-4 text-body-2 text-medium-emphasis"},qo={class:"rent-dialog-actions"},So={key:0,class:"book-info-preview mb-4"},Uo={class:"book-info-preview-inner"},Oo=["src","alt"],To={key:1,class:"book-thumbnail-placeholder"},Po={class:"book-meta"},Fo={class:"book-title"},zo={class:"book-current-label"},Mo={class:"book-current-location"},Go={class:"label-number-inputs mb-3"},Ne=10,pe=5,Ho={__name:"index",setup(Wo){const{user:Ee}=Ht(),{getBooksByCenter:Qe,rentBook:Re,deleteBook:je,updateBookInfo:Xe,checkLabelNumberExists:Je,getCategories:Ke,calculateBookStatus:O}=zt(),{confirm:de,alert:V}=At(),{$firebaseFirestore:Ye}=qt(),A=Ye,ne=St("navigationDrawer",()=>!1),$e=v(280),fe=[...Tt],C=v(""),Ze=v(""),K=v([]),ge=v(!1),G=v(""),S=v("label"),te=v(""),re=v("asc"),et=[{title:"오름차순",value:"asc"},{title:"내림차순",value:"desc"}],tt=[{title:"라벨번호순",value:"label"},{title:"대여중도서",value:"rented"},{title:"연체중도서",value:"overdue"},{title:"대여신청도서",value:"requested"},{title:"위치별로 보기",value:"location"}],ve=t=>{if(!t)return 9999;const e=t.split("_");if(e.length<2)return 9999;const s=e[1];return parseInt(s.slice(-4))||9999},y=v([]),me=v(!1),T=v(!1),ie=v(1),ye=v({}),be=v({}),oe=v(!1),X=v([]),_e=v(!1),H=v(""),W=v(""),M=v(""),ue=v(!1),R=v(null),he=v(!1),we=v([]),ke=v(!1),Y=v(""),f=v({category:"",fourDigits:"",location:""}),ot=L(()=>He()),st=L(()=>[{title:"전체",value:""},...He()]),at=L(()=>Mt[C.value]||"1");L(()=>!f.value.category||!f.value.fourDigits?"":xe(f.value.category,C.value,f.value.fourDigits));const Ie=L(()=>f.value.category&&f.value.fourDigits&&f.value.fourDigits.length===4&&/^\d{4}$/.test(f.value.fourDigits)&&f.value.location&&!Y.value);Pe(()=>{const t=()=>{$e.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),Ut(()=>{window.removeEventListener("resize",t)})});const lt=async()=>{if(!Ee.value||!A)return"";try{const{doc:t,getDoc:e}=await le(async()=>{const{doc:r,getDoc:m}=await import("./ES9emHaY.js").then(u=>u.aE);return{doc:r,getDoc:m}},__vite__mapDeps([0,1]),import.meta.url),s=t(A,"users",Ee.value.uid),a=await e(s);if(a.exists())return a.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Pe(async()=>{const t=await lt();Ze.value=t,C.value=t?Ot(t):fe[0],await J()});const nt=async()=>{y.value=[],await J()},J=async()=>{try{ge.value=!0;const t=await Qe(C.value);K.value=t,await rt(t)}catch(t){console.error("등록된 도서 로드 오류:",t),K.value=[]}finally{ge.value=!1}},rt=async t=>{if(!A)return;const{doc:e,getDoc:s}=await le(async()=>{const{doc:u,getDoc:b}=await import("./ES9emHaY.js").then(x=>x.aE);return{doc:u,getDoc:b}},__vite__mapDeps([0,1]),import.meta.url),a=[...new Set(t.filter(u=>u.rentedBy).map(u=>u.rentedBy))],r=[...new Set(t.filter(u=>u.requestedBy).map(u=>u.requestedBy))],m=[...new Set([...a,...r])];for(const u of m)if(!(ye.value[u]&&be.value[u]))try{const b=e(A,"users",u),x=await s(b);if(x.exists()){const k=x.data(),$=(k.email||"").split("@")[0]||"",D=k.name||"",h=`${k.workplace||""} ${D}(${$})`;ye.value[u]=h,be.value[u]=h}}catch(b){console.error("대여자/신청자 정보 로드 오류:",b)}},Le=t=>t.rentedBy&&ye.value[t.rentedBy]||"",Ce=t=>t.requestedBy&&be.value[t.requestedBy]||"",it=()=>{},Ae=L(()=>{const t=new Map;for(const e of K.value){const s=e.isbn13||e.isbn||e.id;t.has(s)||t.set(s,{isbn:s,title:e.title,author:e.author,publisher:e.publisher,image:e.image,copies:[],totalCount:0,availableCount:0,rentedCount:0,requestedCount:0,locations:[]});const a=t.get(s);a.copies.push(e),a.totalCount++;const r=O(e);r?r==="rented"||r==="overdue"?a.rentedCount++:r==="requested"&&a.requestedCount++:a.availableCount++,e.location&&!a.locations.includes(e.location)&&a.locations.push(e.location)}for(const e of t.values())e.copies.sort((s,a)=>{const r=s.labelNumber||"",m=a.labelNumber||"";return r.localeCompare(m,"ko")});return Array.from(t.values())}),se=L(()=>{let t=[...Ae.value];if(G.value.trim()){const e=G.value.toLowerCase();t=t.filter(s=>{const a=(s.title||"").toLowerCase(),r=(s.author||"").toLowerCase(),m=(s.publisher||"").toLowerCase();return a.includes(e)||r.includes(e)||m.includes(e)?!0:s.copies.some(u=>(u.labelNumber||"").toLowerCase().includes(e))})}return S.value==="label"?t.sort((e,s)=>{const a=ve(e.copies[0]?.labelNumber),r=ve(s.copies[0]?.labelNumber);return re.value==="asc"?a-r:r-a}):S.value==="rented"?t=t.filter(e=>e.rentedCount>0):S.value==="overdue"?t=t.filter(e=>e.copies.some(s=>O(s)==="overdue")):S.value==="requested"?t=t.filter(e=>e.requestedCount>0):S.value==="location"&&(te.value&&(t=t.filter(e=>e.copies.some(s=>s.location===te.value))),t.sort((e,s)=>{const a=ve(e.copies[0]?.labelNumber),r=ve(s.copies[0]?.labelNumber);return re.value==="asc"?a-r:r-a})),t}),ut=L(()=>{const t=(ie.value-1)*Ne,e=t+Ne;return se.value.slice(t,e)}),qe=L(()=>Math.ceil(se.value.length/Ne));Fe([()=>G.value,()=>S.value,()=>te.value],()=>{ie.value=1});const ct=L(()=>K.value.length),dt=L(()=>Ae.value.length),vt=L(()=>K.value.filter(t=>O(t)==="rented").length),mt=L(()=>K.value.filter(t=>O(t)==="overdue").length),pt=L(()=>K.value.filter(t=>O(t)==="requested").length),ae=t=>O(t),Z=t=>y.value.some(e=>e.id===t.id),Se=t=>t.copies.every(e=>Z(e)),ft=t=>{const e=t.copies.filter(s=>Z(s)).length;return e>0&&e<t.copies.length},gt=(t,e)=>{e?Z(t)||y.value.push(t):y.value=y.value.filter(s=>s.id!==t.id),De()},yt=(t,e)=>{if(e)for(const s of t.copies)Z(s)||y.value.push(s);else{const s=t.copies.map(a=>a.id);y.value=y.value.filter(a=>!s.includes(a.id))}De()},bt=t=>{const e=Se(t);yt(t,!e)},_t=t=>{gt(t,!Z(t))},ht=t=>{t?y.value=se.value.flatMap(e=>e.copies):y.value=[]},De=()=>{const t=se.value.flatMap(e=>e.copies);me.value=t.length>0&&t.every(e=>Z(e))};Fe(()=>se.value,()=>{De()});const wt=async()=>{try{ke.value=!0;const t=await Ke(C.value);we.value=t}catch(t){console.error("카테고리 로드 오류:",t),we.value=[]}finally{ke.value=!1}},kt=t=>{const e=t.target.value.replace(/\D/g,"").slice(0,4);f.value.fourDigits=e,Y.value=""},Ct=async()=>{if(!f.value.category||!f.value.fourDigits||f.value.fourDigits.length!==4)return;const t=xe(f.value.category,C.value,f.value.fourDigits);if(R.value&&t===R.value.labelNumber){Y.value="";return}try{await Je(t,C.value)?Y.value="이미 사용중인 라벨번호입니다.":Y.value=""}catch(e){console.error("라벨번호 중복 체크 오류:",e)}},Dt=async t=>{R.value=t;const e=Gt(t.labelNumber);f.value={category:t.category||e?.category||"",fourDigits:e?.fourDigits||"",location:t.location||"구매칸"},Y.value="",await wt(),ue.value=!0},Ue=()=>{ue.value=!1,R.value=null},Bt=async()=>{if(!(!R.value||!Ie.value))try{he.value=!0;const t=xe(f.value.category,C.value,f.value.fourDigits);await Xe(R.value.labelNumber||R.value.id.split("_")[0],C.value,{category:f.value.category,labelNumber:t,location:f.value.location}),Ue(),await J(),await V("도서 정보가 수정되었습니다.",{type:"success"})}catch(t){console.error("도서 정보 수정 오류:",t),await V(t.message||"도서 정보 수정에 실패했습니다.",{type:"error"})}finally{he.value=!1}},Vt=async()=>{if(y.value.length===0)return;const t=[],e=[];for(const a of y.value){const r=O(a);r==="rented"||r==="overdue"?e.push({book:a,reason:"대여중"}):r==="requested"?e.push({book:a,reason:"대여신청중"}):t.push(a)}if(t.length===0){const a=e.map(r=>`• ${r.book.title} (${r.reason})`).join(`
`);await V(`선택한 도서를 삭제할 수 없습니다.

${a}

대여중/대여신청중인 도서는 반납 또는 신청 취소 후 삭제해주세요.`,{type:"warning"});return}let s=`선택한 ${y.value.length}권 중 ${t.length}권의 도서를 삭제하시겠습니까?`;if(e.length>0){const a=e.map(r=>`• ${r.book.title} (${r.reason})`).join(`
`);s+=`

⚠️ 다음 도서는 삭제할 수 없습니다:
${a}`}if(await de(s))try{T.value=!0;const a=t.map(r=>{const m=r.labelNumber||r.id.split("_")[0];return je(m,C.value)});await Promise.all(a),y.value=[],await J(),e.length>0?await V(`${t.length}권의 도서가 삭제되었습니다.
(${e.length}권은 대여중/대여신청중으로 삭제되지 않았습니다.)`,{type:"success"}):await V(`${t.length}권의 도서가 삭제되었습니다.`,{type:"success"})}catch(a){console.error("도서 삭제 오류:",a),await V("도서 삭제에 실패했습니다.",{type:"error"})}finally{T.value=!1}},xt=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const s=O(e);return s!=="rented"&&s!=="overdue"});if(t.length===0){await V("선택한 도서가 모두 대여중입니다.",{type:"warning"});return}X.value=t,H.value=C.value,W.value="",M.value="",oe.value=!0},Oe=async t=>{if(!A||!t)return 0;try{const{collection:e,query:s,where:a,getDocs:r}=await le(async()=>{const{collection:k,query:c,where:$,getDocs:D}=await import("./ES9emHaY.js").then(E=>E.aE);return{collection:k,query:c,where:$,getDocs:D}},__vite__mapDeps([0,1]),import.meta.url),m=e(A,"books"),u=s(m,a("rentedBy","==",t)),b=await r(u);let x=0;return b.forEach(k=>{const c=k.data();(c.status==="rented"||c.status==="overdue")&&x++}),x}catch(e){return console.error("대여 권수 조회 오류:",e),0}},Nt=async t=>{if(O(t)==="requested"&&t.requestedBy){if(await Oe(t.requestedBy)>=pe){await V(`신청자가 이미 ${pe}권을 대여중입니다.
반납 후 대여 처리해주세요.`,{type:"warning"});return}if(!await de(`신청자 정보로 대여 처리하시겠습니까?

도서: ${t.title}
라벨번호: ${t.labelNumber||"-"}
신청자: ${Ce(t)}`))return;try{T.value=!0;const a=t.labelNumber||t.id.split("_")[0];await Re(a,C.value,t.requestedBy,t.isbn),await J(),await V("대여 처리가 완료되었습니다.",{type:"success"})}catch(a){console.error("대여 처리 오류:",a),await V(a.message||"대여 처리에 실패했습니다.",{type:"error"})}finally{T.value=!1}return}X.value=[t],H.value=C.value,W.value="",M.value="",oe.value=!0},Te=()=>{oe.value=!1,X.value=[],H.value="",W.value="",M.value=""},Et=async()=>{if(!(!H.value||!W.value))try{_e.value=!0,M.value="";const{collection:t,query:e,where:s,getDocs:a}=await le(async()=>{const{collection:h,query:I,where:q,getDocs:P}=await import("./ES9emHaY.js").then(F=>F.aE);return{collection:h,query:I,where:q,getDocs:P}},__vite__mapDeps([0,1]),import.meta.url),r=t(A,"users"),m=e(r,s("email","==",W.value)),u=await a(m);if(u.empty){M.value="해당 이메일의 사용자를 찾을 수 없습니다.";return}const b=u.docs[0].data();if(b.center!==H.value){M.value=`해당 사용자는 ${b.center} 소속입니다.`;return}const k=u.docs[0].id,c=await Oe(k),$=X.value.length,D=pe-c;if(D<=0){M.value=`해당 사용자가 이미 ${pe}권을 대여중입니다.`;return}if($>D){M.value=`해당 사용자는 ${D}권까지만 추가 대여 가능합니다. (현재 ${c}권 대여중)`;return}for(const h of X.value){const I=h.labelNumber||h.id.split("_")[0];await Re(I,C.value,k,h.isbn)}const E=X.value.length;await J(),y.value=y.value.filter(h=>!X.value.some(I=>I.id===h.id)),Te(),await V(`${E}권의 도서가 대여 처리되었습니다.`,{type:"success"})}catch(t){console.error("도서 대여 오류:",t),M.value=t.message||"대여 처리에 실패했습니다."}finally{_e.value=!1}},Rt=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const s=O(e);return s==="rented"||s==="overdue"});if(t.length===0){await V("선택한 도서 중 대여중인 도서가 없습니다.",{type:"warning"});return}if(await de(`선택한 ${t.length}권의 도서를 반납 처리하시겠습니까?`))try{T.value=!0;const{doc:e,updateDoc:s,collection:a,addDoc:r,query:m,where:u,getDocs:b,serverTimestamp:x,deleteField:k}=await le(async()=>{const{doc:c,updateDoc:$,collection:D,addDoc:E,query:h,where:I,getDocs:q,serverTimestamp:P,deleteField:F}=await import("./ES9emHaY.js").then(z=>z.aE);return{doc:c,updateDoc:$,collection:D,addDoc:E,query:h,where:I,getDocs:q,serverTimestamp:P,deleteField:F}},__vite__mapDeps([0,1]),import.meta.url);for(const c of t){const $=c.labelNumber||c.id.split("_")[0],D=c.id,E=c.rentedBy,h=c.rentedAt,I=e(A,"books",D);if(await s(I,{status:"available",rentedBy:k(),rentedAt:k(),expectedReturnDate:k()}),E){const q=a(A,"rentalHistory"),P=c.isbn13||c.isbn||"",F=m(q,u("userId","==",E),u("isbn13","==",P)),z=await b(F);if(z.empty)await r(q,{bookId:D,labelNumber:$,isbn13:c.isbn13||"",isbn:c.isbn||"",title:c.title||"",author:c.author||"",publisher:c.publisher||"",cover:c.cover||c.image||"",center:c.center||"",userId:E,rentedAt:h,returnedAt:x(),rentCount:1});else{const Q=z.docs[0],l=Q.data();await s(e(A,"rentalHistory",Q.id),{rentedAt:h,returnedAt:x(),rentCount:(l.rentCount||1)+1})}}}y.value=[],await J(),await V(`${t.length}권의 도서가 반납 처리되었습니다.`,{type:"success"})}catch(e){console.error("도서 반납 오류:",e),await V("도서 반납에 실패했습니다.",{type:"error"})}finally{T.value=!1}},$t=async t=>{const e=O(t);if(e!=="rented"&&e!=="overdue"){await V("대여중인 도서가 아닙니다.",{type:"warning"});return}if(await de(`"${t.title}" 도서를 반납 처리하시겠습니까?
라벨번호: ${t.labelNumber||"-"}`))try{T.value=!0;const{doc:s,updateDoc:a,collection:r,addDoc:m,query:u,where:b,getDocs:x,serverTimestamp:k,deleteField:c}=await le(async()=>{const{doc:q,updateDoc:P,collection:F,addDoc:z,query:Q,where:l,getDocs:Be,serverTimestamp:_,deleteField:ce}=await import("./ES9emHaY.js").then(It=>It.aE);return{doc:q,updateDoc:P,collection:F,addDoc:z,query:Q,where:l,getDocs:Be,serverTimestamp:_,deleteField:ce}},__vite__mapDeps([0,1]),import.meta.url),$=t.id,D=t.rentedBy,E=t.rentedAt,h=t.labelNumber||t.id.split("_")[0],I=s(A,"books",$);if(await a(I,{status:"available",rentedBy:c(),rentedAt:c(),expectedReturnDate:c()}),D){const q=r(A,"rentalHistory"),P=t.isbn13||t.isbn||"",F=u(q,b("userId","==",D),b("isbn13","==",P)),z=await x(F);if(z.empty)await m(q,{bookId:$,labelNumber:h,isbn13:t.isbn13||"",isbn:t.isbn||"",title:t.title||"",author:t.author||"",publisher:t.publisher||"",cover:t.cover||t.image||"",center:t.center||"",userId:D,rentedAt:E,returnedAt:k(),rentCount:1});else{const Q=z.docs[0],l=Q.data();await a(s(A,"rentalHistory",Q.id),{rentedAt:E,returnedAt:k(),rentCount:(l.rentCount||1)+1})}}await J(),await V("도서가 반납 처리되었습니다.",{type:"success"})}catch(s){console.error("도서 반납 오류:",s),await V("도서 반납에 실패했습니다.",{type:"error"})}finally{T.value=!1}};return Wt({title:"도서 관리 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록 관리"}]}),(t,e)=>{const s=N("v-select"),a=N("v-text-field"),r=N("v-checkbox"),m=N("v-btn"),u=N("v-progress-circular"),b=N("v-chip"),x=N("v-icon"),k=N("v-pagination"),c=Pt,$=Ft,D=N("v-navigation-drawer"),E=N("v-spacer"),h=N("v-card"),I=N("v-dialog"),q=N("v-card-title"),P=N("v-autocomplete"),F=N("v-card-text"),z=N("v-card-actions"),Q=N("v-app");return p(),j(Q,null,{default:g(()=>[i(c,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[7]||(e[7]=l=>ne.value=!o(ne))},{default:g(()=>[n("div",Qt,[n("div",jt,[n("div",Xt,[n("h1",Jt,w(o(C))+" 도서 관리 ",1),i(s,{modelValue:o(C),"onUpdate:modelValue":[e[0]||(e[0]=l=>U(C)?C.value=l:null),nt],items:fe,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),n("div",Kt,[n("div",Yt,[n("div",Zt,[n("div",eo,[e[16]||(e[16]=d(" 총 ",-1)),n("strong",null,w(o(ct)),1),d("권 ("+w(o(dt))+"종) ",1)]),n("div",to,[e[17]||(e[17]=d(" 대여중 ",-1)),n("strong",null,w(o(vt)),1),e[18]||(e[18]=d("권, 연체중 ",-1)),n("strong",null,w(o(mt)),1),e[19]||(e[19]=d("권, 대여신청 ",-1)),n("strong",null,w(o(pt)),1),e[20]||(e[20]=d("권 ",-1))])]),n("div",oo,[i(a,{modelValue:o(G),"onUpdate:modelValue":[e[1]||(e[1]=l=>U(G)?G.value=l:null),it],label:"도서/라벨번호 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"registered-search-input"},null,8,["modelValue"]),i(s,{modelValue:o(S),"onUpdate:modelValue":e[2]||(e[2]=l=>U(S)?S.value=l:null),items:tt,label:"정렬",variant:"outlined",density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),n("div",so,[i(r,{modelValue:o(me),"onUpdate:modelValue":[e[3]||(e[3]=l=>U(me)?me.value=l:null),ht],label:"전체선택","hide-details":"",class:"select-all-checkbox"},null,8,["modelValue"]),n("div",ao,[o(S)==="label"||o(S)==="location"?(p(),j(s,{key:0,modelValue:o(re),"onUpdate:modelValue":e[4]||(e[4]=l=>U(re)?re.value=l:null),items:et,label:"정렬",variant:"outlined",density:"compact","hide-details":"",class:"sort-order-select"},null,8,["modelValue"])):ee("",!0),o(S)==="location"?(p(),j(s,{key:1,modelValue:o(te),"onUpdate:modelValue":e[5]||(e[5]=l=>U(te)?te.value=l:null),items:o(st),label:"위치",variant:"outlined",density:"compact","hide-details":"",class:"location-filter-select"},null,8,["modelValue","items"])):ee("",!0),i(m,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(T),onClick:Vt},{default:g(()=>[...e[21]||(e[21]=[d(" 도서 삭제 ",-1)])]),_:1},8,["disabled","loading"]),i(m,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(T),onClick:xt},{default:g(()=>[...e[22]||(e[22]=[d(" 대여 처리 ",-1)])]),_:1},8,["disabled","loading"]),i(m,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(T),onClick:Rt},{default:g(()=>[...e[23]||(e[23]=[d(" 반납 처리 ",-1)])]),_:1},8,["disabled","loading"])])])]),o(ge)?(p(),B("div",lo,[i(u,{indeterminate:"",color:"primary"})])):o(se).length>0?(p(),B("div",no,[n("div",ro,[(p(!0),B(ze,null,Me(o(ut),(l,Be)=>(p(),B("div",{key:`group-${Be}`,class:Ge(["book-card",{"book-card-selected":Se(l)||ft(l)}])},[n("div",{class:"book-card-header",onClick:_=>bt(l)},[l.image?(p(),B("img",{key:0,src:l.image,alt:l.title,class:"book-thumbnail"},null,8,uo)):(p(),B("div",co,[...e[24]||(e[24]=[n("span",null,"NO IMAGE",-1)])])),n("div",vo,[n("div",mo,w(l.title),1),l.author?(p(),B("div",po,[e[25]||(e[25]=n("strong",null,"저자:",-1)),d(" "+w(l.author),1)])):ee("",!0),l.publisher?(p(),B("div",fo,[e[26]||(e[26]=n("strong",null,"출판사:",-1)),d(" "+w(l.publisher),1)])):ee("",!0),n("div",go," 등록 "+w(l.totalCount)+"권 ",1)])],8,io),n("div",yo,[(p(!0),B(ze,null,Me(l.copies,_=>(p(),B("div",{key:_.id,class:Ge(["book-copy-item",{selected:Z(_)}]),onClick:ce=>_t(_)},[n("div",_o,[n("div",ho,[n("div",wo,[ae(_)==="rented"?(p(),j(b,{key:0,size:"x-small",color:"primary",variant:"flat"},{default:g(()=>[...e[27]||(e[27]=[d(" 대여중 ",-1)])]),_:1})):ae(_)==="overdue"?(p(),j(b,{key:1,size:"x-small",color:"error",variant:"flat"},{default:g(()=>[...e[28]||(e[28]=[d(" 연체중 ",-1)])]),_:1})):ae(_)==="requested"?(p(),j(b,{key:2,size:"x-small",color:"warning",variant:"flat"},{default:g(()=>[...e[29]||(e[29]=[d(" 대여신청 ",-1)])]),_:1})):(p(),j(b,{key:3,size:"x-small",color:"success",variant:"outlined"},{default:g(()=>[...e[30]||(e[30]=[d(" 대여가능 ",-1)])]),_:1})),Le(_)||Ce(_)?(p(),B("span",ko,w(Le(_)||Ce(_)),1)):ee("",!0)]),n("a",{href:"#",class:"copy-edit-link",onClick:Ve(ce=>Dt(_),["prevent","stop"])}," 정보수정 ",8,Co)]),n("div",Do,[n("span",Bo,w(_.labelNumber||"라벨없음"),1),e[32]||(e[32]=n("span",{class:"copy-divider"},"|",-1)),n("span",Vo,[i(x,{size:"small",class:"mr-1"},{default:g(()=>[...e[31]||(e[31]=[d(" mdi-map-marker ",-1)])]),_:1}),d(" "+w(o(We)(_.location)||"위치없음"),1)])]),n("div",xo,[ae(_)==="rented"||ae(_)==="overdue"?(p(),j(m,{key:0,color:"primary",size:"small",variant:"flat",onClick:Ve(ce=>$t(_),["stop"])},{default:g(()=>[...e[33]||(e[33]=[d(" 반납처리 ",-1)])]),_:1},8,["onClick"])):(p(),j(m,{key:1,color:"primary",size:"small",variant:"flat",onClick:Ve(ce=>Nt(_),["stop"])},{default:g(()=>[d(w(ae(_)==="requested"?"대여승인":"대여처리"),1)]),_:2},1032,["onClick"]))])])],10,bo))),128))])],2))),128))]),o(qe)>1?(p(),B("div",No,[i(k,{modelValue:o(ie),"onUpdate:modelValue":e[6]||(e[6]=l=>U(ie)?ie.value=l:null),length:o(qe),"total-visible":7,density:"comfortable",rounded:"circle",class:"pagination"},null,8,["modelValue","length"])])):ee("",!0)])):(p(),B("div",Eo,[i(x,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:g(()=>[d(w(o(G)?"mdi-book-search-outline":"mdi-book-off-outline"),1)]),_:1}),o(G)?(p(),B("p",Ro,[e[34]||(e[34]=d(" '",-1)),n("strong",null,w(o(G)),1),e[35]||(e[35]=d("'에 대한 검색 결과가 없습니다. ",-1))])):(p(),B("p",$o," 등록된 도서가 없습니다. "))]))])])]),_:1}),i(D,{modelValue:o(ne),"onUpdate:modelValue":e[8]||(e[8]=l=>U(ne)?ne.value=l:null),location:"right",temporary:"",width:o($e),class:"side-navigation"},{default:g(()=>[n("div",Io,[i($)])]),_:1},8,["modelValue","width"]),i(I,{modelValue:o(oe),"onUpdate:modelValue":e[11]||(e[11]=l=>U(oe)?oe.value=l:null),"max-width":"400",persistent:""},{default:g(()=>[i(h,{class:"rent-dialog-card"},{default:g(()=>[e[38]||(e[38]=n("div",{class:"rent-dialog-title text-h6"}," 대여자 정보 입력 ",-1)),n("div",Lo,[n("div",Ao," 대여 처리할 도서: "+w(o(X).length)+"권 ",1),i(s,{modelValue:o(H),"onUpdate:modelValue":e[9]||(e[9]=l=>U(H)?H.value=l:null),items:fe,label:"센터",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),i(a,{modelValue:o(W),"onUpdate:modelValue":e[10]||(e[10]=l=>U(W)?W.value=l:null),label:"이메일",variant:"outlined",density:"comfortable",placeholder:"example@email.com","error-messages":o(M)},null,8,["modelValue","error-messages"])]),n("div",qo,[i(E),i(m,{variant:"text",onClick:Te},{default:g(()=>[...e[36]||(e[36]=[d(" 취소 ",-1)])]),_:1}),i(m,{color:"primary",variant:"flat",loading:o(_e),disabled:!o(H)||!o(W),onClick:Et},{default:g(()=>[...e[37]||(e[37]=[d(" 대여 처리 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1},8,["modelValue"]),i(I,{modelValue:o(ue),"onUpdate:modelValue":e[15]||(e[15]=l=>U(ue)?ue.value=l:null),"max-width":"500",persistent:""},{default:g(()=>[i(h,{class:"edit-dialog-card"},{default:g(()=>[i(q,{class:"edit-dialog-title"},{default:g(()=>[...e[39]||(e[39]=[d(" 도서 정보 수정 ",-1)])]),_:1}),i(F,{class:"edit-dialog-content"},{default:g(()=>[o(R)?(p(),B("div",So,[n("div",Uo,[o(R).image?(p(),B("img",{key:0,src:o(R).image,alt:o(R).title,class:"book-thumbnail"},null,8,Oo)):(p(),B("div",To,[...e[40]||(e[40]=[n("span",null,"No Image",-1)])])),n("div",Po,[n("div",Fo,w(o(R).title),1),n("div",zo,w(o(R).labelNumber||"라벨없음"),1),n("div",Mo,[i(x,{size:"small",class:"mr-1"},{default:g(()=>[...e[41]||(e[41]=[d(" mdi-map-marker ",-1)])]),_:1}),d(" "+w(o(We)(o(R).location)||"위치없음"),1)])])])])):ee("",!0),i(P,{modelValue:o(f).category,"onUpdate:modelValue":e[12]||(e[12]=l=>o(f).category=l),items:o(we),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(ke),class:"mb-3"},null,8,["modelValue","items","loading"]),n("div",Go,[i(a,{"model-value":o(at),label:"센터코드",variant:"outlined",density:"comfortable",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),i(a,{modelValue:o(f).fourDigits,"onUpdate:modelValue":e[13]||(e[13]=l=>o(f).fourDigits=l),label:"4자리 번호 *",variant:"outlined",density:"comfortable",maxlength:"4","error-messages":o(Y),hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:kt,onBlur:Ct},null,8,["modelValue","error-messages"])]),i(s,{modelValue:o(f).location,"onUpdate:modelValue":e[14]||(e[14]=l=>o(f).location=l),items:o(ot),label:"위치 *",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),_:1}),i(z,{class:"edit-dialog-actions"},{default:g(()=>[i(E),i(m,{variant:"text",onClick:Ue},{default:g(()=>[...e[42]||(e[42]=[d(" 취소 ",-1)])]),_:1}),i(m,{color:"primary",variant:"flat",loading:o(he),disabled:!o(Ie),onClick:Bt},{default:g(()=>[...e[43]||(e[43]=[d(" 저장 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},es=Lt(Ho,[["__scopeId","data-v-7fed86ed"]]);export{es as default};
