const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CWgZd2SI.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as ft,N as bt,a as yt,D as _t,r as d,k as x,Y as Oe,o as ze,e as ht,_ as fe,O as be,L as v,g as h,H as m,K as a,P as o,I as l,G as p,T as P,J as w,Q as W,Z as kt,M as f,W as Q,X as le,S as We}from"./CWgZd2SI.js";import{_ as wt}from"./DMJ6dGCq.js";import{_ as Dt}from"./5ZfngIj0.js";import{g as Vt,C as qt,_ as Bt}from"./DWDJZdXV.js";import{_ as Rt}from"./MShn9YHT.js";import{u as Ct,C as xt,g as It,c as j}from"./CR15qF5r.js";import{u as Nt}from"./BslKsjqr.js";import{u as Pt}from"./B-m16083.js";import"./D9b46GtD.js";const Et={class:"books-register-page"},Lt={class:"center-header mb-6"},Ut={class:"center-header-inner"},$t={class:"page-title mb-0"},Mt={class:"search-section mb-6"},St={key:0,class:"search-loading-section mb-8"},Tt={class:"text-center py-8"},At={key:1,class:"search-empty-section mb-8"},Ft={class:"text-center py-8 text-medium-emphasis empty-state"},Ot={class:"mb-2"},zt={class:"empty-actions"},Wt={key:2,class:"search-results-section mb-8"},Qt={class:"search-results-header mb-4"},jt={class:"text-body-1"},Kt={key:0,class:"d-flex justify-center mt-6"},Gt={class:"book-requests-section"},Ht={class:"book-requests-header mb-4"},Xt={key:0,class:"text-body-2 text-medium-emphasis mt-2"},Jt={key:0,class:"text-center py-8"},Yt={key:1,class:"book-requests-grid"},Zt={key:0,class:"d-flex justify-center mt-6"},eo={key:2,class:"text-center py-8 text-medium-emphasis"},to={class:"drawer-content"},oo={key:0,class:"book-info-preview mb-6"},so={class:"book-info-preview-inner"},ao=["src","alt"],lo={key:1,class:"book-thumbnail-placeholder"},no={class:"book-meta"},ro={class:"book-title"},io={key:0,class:"book-author"},uo={key:1,class:"book-publisher"},co={class:"category-section mb-4"},vo={class:"category-header mb-1"},mo={class:"quantity-section mb-4"},go={class:"copies-section"},po={class:"copy-header mb-2"},fo={class:"copy-number"},bo={key:0,class:"copy-label-preview"},yo={class:"copy-inputs"},_o={class:"manual-book-info-section mb-4"},ho={class:"isbn-input-row"},ko={class:"manual-info-notice"},wo={class:"category-section mb-4"},Do={class:"category-header mb-1"},Vo={class:"quantity-section mb-4"},qo={class:"copies-section"},Bo={class:"copy-header mb-2"},Ro={class:"copy-number"},Co={key:0,class:"copy-label-preview"},xo={class:"copy-inputs"},ye=4,Io={__name:"register",setup(No){const{user:K}=Nt(),{searchBooks:Qe,registerBookWithLabel:_e,getBooksByCenter:je,getBestsellers:Ke,getCategories:Ge,checkLabelNumberExists:he}=Ct(),{alert:E}=bt(),{$firebaseFirestore:He}=yt(),L=He,G=_t("navigationDrawer",()=>!1),ke=d(280),we=[...qt],g=d(""),Xe=d(""),$=d(""),M=d([]),H=d(10),ee=d(!1),De=d(null),ne=d(!1),X=x(()=>M.value.slice(0,H.value)),Je=x(()=>M.value.length),Ye=x(()=>H.value<M.value.length),re=d([]),ie=d(!1),J=d([]),ue=d(new Set),q=d([]),ce=d({}),de=d(!1),Y=d(1),Ve=x(()=>q.value.length),qe=x(()=>Math.ceil(Ve.value/ye)),Be=x(()=>{const t=(Y.value-1)*ye,e=t+ye;return q.value.slice(t,e)}),S=d(!1),y=d(null),te=d(null),ve=d(!1),oe=d([]),se=d(!1),T=d(!1),u=d({category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸"}]}),Z=d(!1),me=d(!1),r=d({title:"",author:"",publisher:"",isbn:"",category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸",error:"",labelPreview:""}]}),Re=x(()=>xt[g.value]||"1"),Ce=async()=>{await E("카테고리 관리 기능은 준비 중입니다.",{type:"info"})},xe=x(()=>It()),Ie=[t=>!!t||"4자리 번호를 입력해주세요",t=>/^\d{1,4}$/.test(t)||"숫자만 입력해주세요",t=>t.length===4||"4자리를 입력해주세요"],Ne=()=>{u.value.copies.forEach(t=>{u.value.category&&t.fourDigits&&t.fourDigits.length===4?t.labelPreview=j(u.value.category,g.value,t.fourDigits):t.labelPreview=""})};Oe(()=>u.value.category,()=>{Ne()});const Pe=x(()=>{if(!u.value.category||!u.value.quantity||u.value.quantity<1)return!1;for(const t of u.value.copies)if(!t.fourDigits||t.fourDigits.length!==4||!/^\d{4}$/.test(t.fourDigits)||!t.location||t.error)return!1;return!T.value}),Ee=x(()=>{if(!r.value.title||!r.value.isbn||!r.value.category||!r.value.quantity||r.value.quantity<1)return!1;for(const t of r.value.copies)if(!t.fourDigits||t.fourDigits.length!==4||!/^\d{4}$/.test(t.fourDigits)||!t.location||t.error)return!1;return!T.value});ze(()=>{const t=()=>{ke.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),ht(()=>{window.removeEventListener("resize",t)})});const Ze=async()=>{if(!K.value||!L)return"";try{const{doc:t,getDoc:e}=await fe(async()=>{const{doc:c,getDoc:k}=await import("./CWgZd2SI.js").then(_=>_.aE);return{doc:c,getDoc:k}},__vite__mapDeps([0,1]),import.meta.url),n=t(L,"users",K.value.uid),i=await e(n);if(i.exists())return i.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};ze(async()=>{const t=await Ze();Xe.value=t,g.value=t?Vt(t):we[0],await Promise.all([Le(),ae(),Ue()])});const et=async()=>{Y.value=1,await Promise.all([Le(),ae(),Ue()])},tt=async()=>{if($.value.trim())try{ee.value=!0,De.value=null,H.value=10,ne.value=!0;const t=await Qe($.value);M.value=t.items||[]}catch(t){console.error("도서 검색 오류:",t),De.value=t.message||"도서 검색에 실패했습니다.",M.value=[]}finally{ee.value=!1}},ot=()=>{$.value="",M.value=[],H.value=10,ne.value=!1},st=()=>{H.value+=10},Le=async()=>{try{ie.value=!0;const t=await Ke(10);re.value=t.items||[]}catch(t){console.error("베스트셀러 로드 오류:",t),re.value=[]}finally{ie.value=!1}},ae=async()=>{try{const t=await je(g.value);J.value=t}catch(t){console.error("등록된 도서 로드 오류:",t),J.value=[]}},Ue=async()=>{try{if(de.value=!0,!L){q.value=[];return}const{collection:t,query:e,where:n,getDocs:i,doc:c,getDoc:k}=await fe(async()=>{const{collection:b,query:B,where:R,getDocs:C,doc:U,getDoc:O}=await import("./CWgZd2SI.js").then(z=>z.aE);return{collection:b,query:B,where:R,getDocs:C,doc:U,getDoc:O}},__vite__mapDeps([0,1]),import.meta.url),_=t(L,"bookRequests"),A=e(_,n("center","==",g.value),n("status","==","pending")),F=await i(A),I=[];F.forEach(b=>{I.push({id:b.id,...b.data()})}),I.sort((b,B)=>{const R=b.requestedAt?.toDate?.()||new Date(0);return(B.requestedAt?.toDate?.()||new Date(0))-R}),q.value=I;const N=[...new Set(I.filter(b=>b.requestedBy).map(b=>b.requestedBy))];for(const b of N)if(!ce.value[b])try{const B=c(L,"users",b),R=await k(B);if(R.exists()){const C=R.data(),U=(C.email||"").split("@")[0],O=C.name||"",z=C.workplace||"";ce.value[b]=`${z} ${O}(${U})`}}catch(B){console.error("신청자 정보 로드 오류:",B)}}catch(t){console.error("도서 신청 목록 로드 오류:",t),q.value=[]}finally{de.value=!1}},at=t=>t.requestedBy&&ce.value[t.requestedBy]||"",ge=async()=>{try{se.value=!0;const t=await Ge(g.value);oe.value=t}catch(t){console.error("카테고리 로드 오류:",t),oe.value=[]}finally{se.value=!1}},lt=t=>{const e=Math.max(1,Math.min(20,t||1)),n=u.value.copies;if(e>n.length)for(let i=n.length;i<e;i++)n.push({fourDigits:"",location:"구매칸",error:"",labelPreview:""});else e<n.length&&(u.value.copies=n.slice(0,e));u.value.quantity=e},nt=(t,e)=>{const n=t.target.value.replace(/\D/g,"").slice(0,4);u.value.copies[e].fourDigits=n,u.value.copies[e].error="",Ne()},rt=async t=>{const e=u.value.copies[t];if(!(!u.value.category||!e.fourDigits||e.fourDigits.length!==4))try{T.value=!0;const n=j(u.value.category,g.value,e.fourDigits);if(await he(n,g.value)){e.error="이미 사용중인 라벨번호입니다.";return}for(let c=0;c<u.value.copies.length;c++)if(c!==t&&u.value.copies[c].fourDigits===e.fourDigits){e.error="동일한 라벨번호가 이미 입력되어 있습니다.";return}e.error=""}catch(n){console.error("라벨번호 중복 체크 오류:",n)}finally{T.value=!1}},$e=async t=>{y.value=t,te.value=null,u.value={category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸",error:"",labelPreview:""}]},await ge(),S.value=!0},it=async t=>{y.value=t,te.value=t,u.value={category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸",error:"",labelPreview:""}]},await ge(),S.value=!0},Me=()=>{S.value=!1,y.value=null,te.value=null},ut=async()=>{r.value={title:"",author:"",publisher:"",isbn:"",category:"",quantity:1,copies:[{fourDigits:"",location:"구매칸",error:"",labelPreview:""}]},await ge(),Z.value=!0},Se=()=>{Z.value=!1},ct=t=>{const e=Math.max(1,Math.min(20,parseInt(t)||1)),n=r.value.copies;if(e>n.length)for(let i=n.length;i<e;i++)n.push({fourDigits:"",location:"구매칸",error:"",labelPreview:""});else e<n.length&&n.splice(e);r.value.quantity=e,pe()},pe=()=>{r.value.copies.forEach(t=>{r.value.category&&t.fourDigits&&t.fourDigits.length===4?t.labelPreview=j(r.value.category,g.value,t.fourDigits):t.labelPreview=""})};Oe(()=>r.value.category,()=>{pe()});const dt=(t,e)=>{const n=t.target.value.replace(/[^0-9]/g,"");r.value.copies[e].fourDigits=n,r.value.copies[e].error="",pe()},vt=async t=>{const e=r.value.copies[t];if(!e.fourDigits||e.fourDigits.length!==4||!r.value.category)return;const n=j(r.value.category,g.value,e.fourDigits);if(r.value.copies.some((c,k)=>k!==t&&c.fourDigits===e.fourDigits)){e.error="폼 내에서 중복된 라벨번호입니다.";return}try{T.value=!0,await he(n,g.value)?e.error="이미 사용중인 라벨번호입니다.":e.error=""}catch(c){console.error("라벨번호 중복 체크 오류:",c)}finally{T.value=!1}},mt=async()=>{if(!Ee.value)return;const t=r.value.isbn.trim();try{me.value=!0;const e={title:r.value.title.trim(),author:r.value.author.trim(),publisher:r.value.publisher.trim(),isbn13:t.length===13?t:"",isbn:(t.length===10,t),image:"",cover:""},n=[];for(const i of r.value.copies){const c=j(r.value.category,g.value,i.fourDigits);await _e(e,g.value,K.value.uid,r.value.category,c,i.location),n.push(c)}await ae(),Se(),n.length===1?await E(`도서가 성공적으로 등록되었습니다.
라벨번호: ${n[0]}`,{type:"success"}):await E(`${n.length}권의 도서가 성공적으로 등록되었습니다.
라벨번호:
${n.join(`
`)}`,{type:"success"})}catch(e){console.error("도서 직접 등록 오류:",e),await E(e.message||"도서 등록에 실패했습니다.",{type:"error"})}finally{me.value=!1}},gt=async()=>{if(!y.value||!Pe.value)return;const t=y.value,e=t.isbn13||t.isbn||"";if(!e){await E("ISBN 정보가 없어 등록할 수 없습니다.",{type:"error"});return}if(!ue.value.has(e))try{ve.value=!0,ue.value.add(e);const n=[];for(const c of u.value.copies){const k=j(u.value.category,g.value,c.fourDigits);await _e(t,g.value,K.value.uid,u.value.category,k,c.location),n.push(k)}const i=te.value||q.value.find(c=>(c.isbn13||c.isbn||"")===e);if(i&&L){const{doc:c,updateDoc:k,serverTimestamp:_,addDoc:A,collection:F}=await fe(async()=>{const{doc:N,updateDoc:b,serverTimestamp:B,addDoc:R,collection:C}=await import("./CWgZd2SI.js").then(U=>U.aE);return{doc:N,updateDoc:b,serverTimestamp:B,addDoc:R,collection:C}},__vite__mapDeps([0,1]),import.meta.url),I=c(L,"bookRequests",i.id);if(await k(I,{status:"approved",approvedAt:_(),approvedBy:K.value.uid}),i.requestedBy){const N=F(L,"notifications");await A(N,{userId:i.requestedBy,type:"book_registered",title:"신청 도서 등록 완료",message:`신청하신 도서 "${t.title}"이(가) ${g.value}에 등록되었습니다.`,bookTitle:t.title,bookIsbn:e,center:g.value,isRead:!1,createdAt:_()})}q.value=q.value.filter(N=>N.id!==i.id)}await ae(),Me(),n.length===1?await E(`도서가 성공적으로 등록되었습니다.
라벨번호: ${n[0]}`,{type:"success"}):await E(`${n.length}권의 도서가 성공적으로 등록되었습니다.
라벨번호:
${n.join(`
`)}`,{type:"success"})}catch(n){console.error("도서 등록 오류:",n),await E(n.message||"도서 등록에 실패했습니다.",{type:"error"})}finally{ve.value=!1,ue.value.delete(e)}};return Pt({title:"도서 등록 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록"}]}),(t,e)=>{const n=h("v-select"),i=h("v-text-field"),c=h("v-progress-circular"),k=h("v-icon"),_=h("v-btn"),A=wt,F=h("v-col"),I=h("v-row"),N=Dt,b=h("v-pagination"),B=Bt,R=Rt,C=h("v-navigation-drawer"),U=h("v-card-title"),O=h("v-card-text"),z=h("v-spacer"),Te=h("v-card-actions"),Ae=h("v-card"),Fe=h("v-dialog"),pt=h("v-app");return m(),be(pt,null,{default:v(()=>[a(B,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[3]||(e[3]=s=>G.value=!o(G))},{default:v(()=>[l("div",Et,[l("div",Lt,[l("div",Ut,[l("h1",$t,w(o(g))+" 도서 등록 ",1),a(n,{modelValue:o(g),"onUpdate:modelValue":[e[0]||(e[0]=s=>W(g)?g.value=s:null),et],items:we,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),l("div",Mt,[a(i,{modelValue:o($),"onUpdate:modelValue":e[1]||(e[1]=s=>W($)?$.value=s:null),label:"도서 검색",placeholder:"도서명 또는 ISBN-13으로 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable",loading:o(ee),clearable:"",class:"search-input",onKeyup:kt(tt,["enter"]),"onClick:clear":ot},null,8,["modelValue","loading"])]),o(ee)?(m(),p("div",St,[l("div",Tt,[a(c,{indeterminate:"",color:"primary"}),e[15]||(e[15]=l("p",{class:"mt-4 text-medium-emphasis"}," 검색 중... ",-1))])])):o(ne)&&o(X).length===0?(m(),p("div",At,[l("div",Ft,[a(k,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:v(()=>[...e[16]||(e[16]=[f(" mdi-book-search-outline ",-1)])]),_:1}),l("p",Ot,[e[17]||(e[17]=f(" '",-1)),l("strong",null,w(o($)),1),e[18]||(e[18]=f("'에 대한 검색 결과가 없습니다. ",-1))]),e[21]||(e[21]=l("p",{class:"text-body-2 mb-2"}," ISBN-13으로 다시 검색하거나, 직접 등록해보세요. ",-1)),e[22]||(e[22]=l("p",{class:"text-body-2 text-grey mb-4"}," ISBN을 모르시면 아래 버튼을 통해 조회할 수 있습니다. ",-1)),l("div",zt,[a(_,{color:"primary",variant:"outlined",size:"small",href:"https://isbnsearch.org/",target:"_blank"},{default:v(()=>[...e[19]||(e[19]=[f(" ISBN 조회하기 ",-1)])]),_:1}),a(_,{color:"primary",variant:"flat",size:"small",onClick:ut},{default:v(()=>[...e[20]||(e[20]=[f(" 직접 등록하기 ",-1)])]),_:1})])])])):o(X).length>0?(m(),p("div",Wt,[l("div",Qt,[l("div",jt,[o(Je)>=10?(m(),p(Q,{key:0},[e[23]||(e[23]=f(" 검색 결과가 많습니다. (현재 ",-1)),l("strong",null,w(o(X).length),1),e[24]||(e[24]=f("개 표시 중) ",-1))],64)):(m(),p(Q,{key:1},[e[25]||(e[25]=f(" 총 ",-1)),l("strong",null,w(o(X).length),1),e[26]||(e[26]=f("개의 검색 결과 ",-1))],64))]),a(_,{color:"primary",variant:"outlined",size:"small",href:"https://isbnsearch.org/",target:"_blank"},{default:v(()=>[...e[27]||(e[27]=[f(" ISBN 조회하기 ",-1)])]),_:1})]),a(I,{class:"book-list-row"},{default:v(()=>[(m(!0),p(Q,null,le(o(X),(s,D)=>(m(),be(F,{key:`search-${D}`,cols:"12",sm:"6",class:"book-list-col"},{default:v(()=>[a(A,{book:s,center:o(g),"registered-books":o(J),"requested-books":o(q),selectable:!1,"show-action":!0,"allow-register-requested":!0,"allow-additional-register":!0,onRegister:$e},null,8,["book","center","registered-books","requested-books"])]),_:2},1024))),128))]),_:1}),o(Ye)?(m(),p("div",Kt,[a(_,{variant:"outlined",color:"primary",onClick:st},{default:v(()=>[...e[28]||(e[28]=[f(" 더보기 ",-1)])]),_:1})])):P("",!0)])):P("",!0),a(N,{books:o(re),center:o(g),"registered-books":o(J),"requested-books":o(q),title:"베스트셀러",loading:o(ie),"empty-message":"베스트셀러를 불러올 수 없습니다.","allow-register-requested":!0,"allow-additional-register":!0,"nav-id":"bestseller",class:"mb-8",onRegister:$e},null,8,["books","center","registered-books","requested-books","loading"]),l("div",Gt,[l("div",Ht,[e[31]||(e[31]=l("h2",{class:"section-title mb-0"}," 도서 신청 목록 ",-1)),o(q).length>0?(m(),p("div",Xt,[e[29]||(e[29]=f(" 총 ",-1)),l("strong",null,w(o(Ve)),1),e[30]||(e[30]=f("건의 신청 ",-1))])):P("",!0)]),o(de)?(m(),p("div",Jt,[a(c,{indeterminate:"",color:"primary"})])):o(Be).length>0?(m(),p("div",Yt,[a(I,{class:"book-list-row"},{default:v(()=>[(m(!0),p(Q,null,le(o(Be),(s,D)=>(m(),be(F,{key:`request-${D}`,cols:"12",sm:"6",class:"book-list-col"},{default:v(()=>[a(A,{book:s,center:o(g),"registered-books":o(J),selectable:!1,"show-action":!0,"action-button-text":`${o(g)}에 등록하기`,"requester-info":at(s),onRegister:it},null,8,["book","center","registered-books","action-button-text","requester-info"])]),_:2},1024))),128))]),_:1}),o(qe)>1?(m(),p("div",Zt,[a(b,{modelValue:o(Y),"onUpdate:modelValue":e[2]||(e[2]=s=>W(Y)?Y.value=s:null),length:o(qe),"total-visible":7},null,8,["modelValue","length"])])):P("",!0)])):(m(),p("div",eo," 신청된 도서가 없습니다. "))])])]),_:1}),a(C,{modelValue:o(G),"onUpdate:modelValue":e[4]||(e[4]=s=>W(G)?G.value=s:null),location:"right",temporary:"",width:o(ke),class:"side-navigation"},{default:v(()=>[l("div",to,[a(R)])]),_:1},8,["modelValue","width"]),a(Fe,{modelValue:o(S),"onUpdate:modelValue":e[7]||(e[7]=s=>W(S)?S.value=s:null),"max-width":"600",persistent:""},{default:v(()=>[a(Ae,{class:"register-dialog-card"},{default:v(()=>[a(U,{class:"register-dialog-title"},{default:v(()=>[...e[32]||(e[32]=[f(" 도서 등록 ",-1)])]),_:1}),a(O,{class:"register-dialog-content"},{default:v(()=>[o(y)?(m(),p("div",oo,[l("div",so,[o(y).cover||o(y).image?(m(),p("img",{key:0,src:o(y).cover||o(y).image,alt:o(y).title,class:"book-thumbnail"},null,8,ao)):(m(),p("div",lo,[...e[33]||(e[33]=[l("span",null,"No Image",-1)])])),l("div",no,[l("div",ro,w(o(y).title),1),o(y).author?(m(),p("div",io,[e[34]||(e[34]=l("strong",null,"저자:",-1)),f(" "+w(o(y).author),1)])):P("",!0),o(y).publisher?(m(),p("div",uo,[e[35]||(e[35]=l("strong",null,"출판사:",-1)),f(" "+w(o(y).publisher),1)])):P("",!0)])])])):P("",!0),l("div",co,[l("div",vo,[l("a",{href:"#",class:"category-manage-link",onClick:We(Ce,["prevent"])}," 카테고리 관리 ")]),a(n,{modelValue:o(u).category,"onUpdate:modelValue":e[5]||(e[5]=s=>o(u).category=s),items:o(oe),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(se),rules:[s=>!!s||"카테고리를 선택해주세요"]},null,8,["modelValue","items","loading","rules"])]),l("div",mo,[a(i,{modelValue:o(u).quantity,"onUpdate:modelValue":[e[6]||(e[6]=s=>o(u).quantity=s),lt],modelModifiers:{number:!0},label:"등록 권수",variant:"outlined",density:"comfortable",type:"number",min:"1",max:"20",rules:[s=>s>=1&&s<=20||"1~20권까지 등록 가능합니다"],hint:"같은 도서를 여러 권 등록할 수 있습니다","persistent-hint":""},null,8,["modelValue","rules"])]),l("div",go,[(m(!0),p(Q,null,le(o(u).copies,(s,D)=>(m(),p("div",{key:D,class:"copy-entry mb-4"},[l("div",po,[l("span",fo,w(D+1)+"권",1),s.labelPreview?(m(),p("span",bo,w(s.labelPreview),1)):P("",!0)]),l("div",yo,[a(i,{"model-value":o(Re),label:"센터코드",variant:"outlined",density:"compact",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),a(i,{modelValue:s.fourDigits,"onUpdate:modelValue":V=>s.fourDigits=V,label:"4자리 번호 *",variant:"outlined",density:"compact",maxlength:"4",rules:Ie,"error-messages":s.error,hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:V=>nt(V,D),onBlur:()=>rt(D)},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","onBlur"]),a(n,{modelValue:s.location,"onUpdate:modelValue":V=>s.location=V,items:o(xe),label:"위치 *",variant:"outlined",density:"compact",rules:[V=>!!V||"위치를 선택해주세요"],class:"location-select"},null,8,["modelValue","onUpdate:modelValue","items","rules"])])]))),128))])]),_:1}),a(Te,{class:"register-dialog-actions"},{default:v(()=>[a(z),a(_,{variant:"text",onClick:Me},{default:v(()=>[...e[36]||(e[36]=[f(" 취소 ",-1)])]),_:1}),a(_,{color:"primary",variant:"flat",loading:o(ve),disabled:!o(Pe),onClick:gt},{default:v(()=>[f(w(o(u).quantity>1?`${o(u).quantity}권 등록`:"등록"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Fe,{modelValue:o(Z),"onUpdate:modelValue":e[14]||(e[14]=s=>W(Z)?Z.value=s:null),"max-width":"600",persistent:""},{default:v(()=>[a(Ae,{class:"register-dialog-card"},{default:v(()=>[a(U,{class:"register-dialog-title"},{default:v(()=>[...e[37]||(e[37]=[f(" 도서 직접 등록 ",-1)])]),_:1}),a(O,{class:"register-dialog-content"},{default:v(()=>[l("div",_o,[e[41]||(e[41]=l("div",{class:"manual-section-title mb-2"}," 도서 정보 ",-1)),a(i,{modelValue:o(r).title,"onUpdate:modelValue":e[8]||(e[8]=s=>o(r).title=s),label:"도서명 *",variant:"outlined",density:"compact","hide-details":!o(r).title||o(r).title.length>0?"auto":!1,class:"manual-input"},null,8,["modelValue","hide-details"]),a(i,{modelValue:o(r).author,"onUpdate:modelValue":e[9]||(e[9]=s=>o(r).author=s),label:"저자",variant:"outlined",density:"compact","hide-details":"",class:"manual-input"},null,8,["modelValue"]),a(i,{modelValue:o(r).publisher,"onUpdate:modelValue":e[10]||(e[10]=s=>o(r).publisher=s),label:"출판사",variant:"outlined",density:"compact","hide-details":"",class:"manual-input"},null,8,["modelValue"]),l("div",ho,[a(i,{modelValue:o(r).isbn,"onUpdate:modelValue":e[11]||(e[11]=s=>o(r).isbn=s),label:"ISBN *",variant:"outlined",density:"compact","hide-details":!o(r).isbn||o(r).isbn.length>0?"auto":!1,class:"isbn-input"},null,8,["modelValue","hide-details"]),a(_,{variant:"outlined",size:"small",color:"primary",href:"https://isbnsearch.org/",target:"_blank",class:"isbn-lookup-btn"},{default:v(()=>[...e[38]||(e[38]=[f(" ISBN 조회 ",-1)])]),_:1})]),l("div",ko,[a(k,{size:"small",class:"mr-1"},{default:v(()=>[...e[39]||(e[39]=[f(" mdi-information-outline ",-1)])]),_:1}),e[40]||(e[40]=f(" 표지 이미지는 기본 이미지로 대체됩니다. ",-1))])]),l("div",wo,[l("div",Do,[l("a",{href:"#",class:"category-manage-link",onClick:We(Ce,["prevent"])}," 카테고리 관리 ")]),a(n,{modelValue:o(r).category,"onUpdate:modelValue":e[12]||(e[12]=s=>o(r).category=s),items:o(oe),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(se)},null,8,["modelValue","items","loading"])]),l("div",Vo,[a(i,{modelValue:o(r).quantity,"onUpdate:modelValue":[e[13]||(e[13]=s=>o(r).quantity=s),ct],modelModifiers:{number:!0},label:"등록 권수",variant:"outlined",density:"comfortable",type:"number",min:"1",max:"20",hint:"같은 도서를 여러 권 등록할 수 있습니다","persistent-hint":""},null,8,["modelValue"])]),l("div",qo,[(m(!0),p(Q,null,le(o(r).copies,(s,D)=>(m(),p("div",{key:D,class:"copy-entry mb-4"},[l("div",Bo,[l("span",Ro,w(D+1)+"권",1),s.labelPreview?(m(),p("span",Co,w(s.labelPreview),1)):P("",!0)]),l("div",xo,[a(i,{"model-value":o(Re),label:"센터코드",variant:"outlined",density:"compact",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),a(i,{modelValue:s.fourDigits,"onUpdate:modelValue":V=>s.fourDigits=V,label:"4자리 번호 *",variant:"outlined",density:"compact",maxlength:"4",rules:Ie,"error-messages":s.error,hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:V=>dt(V,D),onBlur:()=>vt(D)},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","onBlur"]),a(n,{modelValue:s.location,"onUpdate:modelValue":V=>s.location=V,items:o(xe),label:"위치 *",variant:"outlined",density:"compact",class:"location-select"},null,8,["modelValue","onUpdate:modelValue","items"])])]))),128))])]),_:1}),a(Te,{class:"register-dialog-actions"},{default:v(()=>[a(z),a(_,{variant:"text",onClick:Se},{default:v(()=>[...e[42]||(e[42]=[f(" 취소 ",-1)])]),_:1}),a(_,{color:"primary",variant:"flat",loading:o(me),disabled:!o(Ee),onClick:mt},{default:v(()=>[f(w(o(r).quantity>1?`${o(r).quantity}권 등록`:"등록"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Fo=ft(Io,[["__scopeId","data-v-df57aa08"]]);export{Fo as default};
