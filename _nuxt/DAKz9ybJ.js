const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D4meORf1.js","./entry.yfGVSS21.css"])))=>i.map(i=>d[i]);
import{F as ht,N as kt,a as wt,r as d,k as P,Y as Qe,o as je,e as Dt,_ as _e,O as he,L as v,g as k,H as m,K as a,P as o,I as l,G as p,U as N,J as w,Q,$ as Vt,M as f,R as j,S as re,W as Ke}from"./D4meORf1.js";import{_ as qt}from"./DovEHTV2.js";import{_ as Bt}from"./HewfiHLd.js";import{g as Rt,C as Ct,_ as xt}from"./BQA3864d.js";import{u as It,_ as Lt}from"./CXBglKcO.js";import{u as Pt,C as Nt,c as K}from"./C4Xq6-4w.js";import{b as ie}from"./C-xtXPWq.js";import{u as Ut}from"./CSLLkWyk.js";import{u as $t}from"./BF39NsgA.js";import{u as Et}from"./BnmRTHMY.js";import"./BKoeciCV.js";const Mt={class:"books-register-page"},St={class:"center-header mb-6"},Tt={class:"center-header-inner"},At={class:"page-title mb-0"},zt={class:"search-section mb-6"},Ft={key:0,class:"search-loading-section mb-8"},Ot={class:"text-center py-8"},Wt={key:1,class:"search-empty-section mb-8"},Qt={class:"text-center py-8 text-medium-emphasis empty-state"},jt={class:"mb-2"},Kt={class:"empty-actions"},Gt={key:2,class:"search-results-section mb-8"},Ht={class:"search-results-header mb-4"},Jt={class:"text-body-1"},Xt={key:0,class:"d-flex justify-center mt-6"},Yt={class:"book-requests-section"},Zt={class:"book-requests-header mb-4"},eo={key:0,class:"text-body-2 text-medium-emphasis mt-2"},to={key:0,class:"text-center py-8"},oo={key:1,class:"book-requests-grid"},so={key:0,class:"pagination-section"},ao={key:2,class:"text-center py-8 text-medium-emphasis"},lo={class:"drawer-content"},no={key:0,class:"book-info-preview mb-6"},ro={class:"book-info-preview-inner"},io=["src","alt"],uo={key:1,class:"book-thumbnail-placeholder"},co={class:"book-meta"},vo={class:"book-title"},mo={key:0,class:"book-author"},go={key:1,class:"book-publisher"},po={class:"category-section mb-4"},fo={class:"category-header mb-1"},bo={class:"quantity-section mb-4"},yo={class:"copies-section"},_o={class:"copy-header mb-2"},ho={class:"copy-number"},ko={key:0,class:"copy-label-preview"},wo={class:"copy-inputs"},Do={class:"manual-book-info-section mb-4"},Vo={class:"isbn-input-row"},qo={class:"manual-info-notice"},Bo={class:"category-section mb-4"},Ro={class:"category-header mb-1"},Co={class:"quantity-section mb-4"},xo={class:"copies-section"},Io={class:"copy-header mb-2"},Lo={class:"copy-number"},Po={key:0,class:"copy-label-preview"},No={class:"copy-inputs"},ke=10,Uo={__name:"register",setup($o){const{user:G}=Ut(),{searchBooks:Ge,registerBookWithLabel:we,getBooksByCenter:He,getBestsellers:Je,getCategories:Xe,checkLabelNumberExists:De}=$t(),{loadCenterLocations:Ye}=Pt(),{alert:U}=kt(),{$firebaseFirestore:Ze}=wt(),$=Ze,{drawer:H,drawerWidth:Ve}=It(),qe=[...Ct],g=d(""),et=d(""),M=d(""),S=d([]),J=d(10),oe=d(!1),Be=d(null),ue=d(!1),X=P(()=>S.value.slice(0,J.value)),tt=P(()=>S.value.length),ot=P(()=>J.value<S.value.length),ce=d([]),de=d(!1),Y=d([]),ve=d(new Set),q=d([]),me=d({}),ge=d(!1),Z=d(1),Re=P(()=>q.value.length),Ce=P(()=>Math.ceil(Re.value/ke)),xe=P(()=>{const t=(Z.value-1)*ke,e=t+ke;return q.value.slice(t,e)}),T=d(!1),h=d(null),se=d(null),pe=d(!1),ae=d([]),le=d(!1),A=d(!1),u=d({category:"",quantity:1,copies:[{fourDigits:"",location:"",error:"",labelPreview:""}]}),ee=d(!1),fe=d(!1),n=d({title:"",author:"",publisher:"",isbn:"",category:"",quantity:1,copies:[{fourDigits:"",location:"",error:"",labelPreview:""}]}),te=()=>z.value.length>0?z.value[0].value:"",Ie=P(()=>Nt[g.value]||"1"),Le=async()=>{await U("카테고리 관리 기능은 준비 중입니다.",{type:"info"})},z=d([]),Pe=async()=>{try{const t=await Ye(g.value);z.value=t.map(e=>({title:e.name,value:e.name}))}catch(t){console.error("위치 옵션 로드 오류:",t),z.value=[]}},Ne=[t=>!!t||"4자리 번호를 입력해주세요",t=>/^\d{1,4}$/.test(t)||"숫자만 입력해주세요",t=>t.length===4||"4자리를 입력해주세요"],Ue=()=>{u.value.copies.forEach(t=>{u.value.category&&t.fourDigits&&t.fourDigits.length===4?t.labelPreview=K(u.value.category,g.value,t.fourDigits):t.labelPreview=""})};Qe(()=>u.value.category,()=>{Ue()});const $e=P(()=>{if(!u.value.category||!u.value.quantity||u.value.quantity<1)return!1;for(const t of u.value.copies)if(!t.fourDigits||t.fourDigits.length!==4||!/^\d{4}$/.test(t.fourDigits)||!t.location||t.error)return!1;return!A.value}),Ee=P(()=>{if(!n.value.title||!n.value.isbn||!n.value.category||!n.value.quantity||n.value.quantity<1)return!1;for(const t of n.value.copies)if(!t.fourDigits||t.fourDigits.length!==4||!/^\d{4}$/.test(t.fourDigits)||!t.location||t.error)return!1;return!A.value});je(()=>{const t=()=>{Ve.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),Dt(()=>{window.removeEventListener("resize",t)})});const st=async()=>{if(!G.value||!$)return"";try{const{doc:t,getDoc:e}=await _e(async()=>{const{doc:i,getDoc:b}=await import("./D4meORf1.js").then(y=>y.b2);return{doc:i,getDoc:b}},__vite__mapDeps([0,1]),import.meta.url),r=t($,"users",G.value.uid),c=await e(r);if(c.exists())return c.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};je(async()=>{const t=await st();et.value=t,g.value=t?Rt(t):qe[0],await Promise.all([Me(),ne(),Se(),Pe()])});const at=async()=>{Z.value=1,await Promise.all([Me(),ne(),Se(),Pe()])},lt=async()=>{if(M.value.trim())try{oe.value=!0,Be.value=null,J.value=10,ue.value=!0;const t=await Ge(M.value);S.value=t.items||[]}catch(t){console.error("도서 검색 오류:",t),Be.value=t.message||"도서 검색에 실패했습니다.",S.value=[]}finally{oe.value=!1}},nt=()=>{M.value="",S.value=[],J.value=10,ue.value=!1},rt=()=>{J.value+=10},Me=async()=>{try{de.value=!0;const t=await Je(10);ce.value=t.items||[]}catch(t){console.error("베스트셀러 로드 오류:",t),ce.value=[]}finally{de.value=!1}},ne=async()=>{try{const t=await He(g.value);Y.value=t}catch(t){console.error("등록된 도서 로드 오류:",t),Y.value=[]}},Se=async()=>{try{if(ge.value=!0,!$){q.value=[];return}const{collection:t,query:e,where:r,getDocs:c,doc:i,getDoc:b}=await _e(async()=>{const{collection:_,query:B,where:R,getDocs:C,doc:E,getDoc:O}=await import("./D4meORf1.js").then(W=>W.b2);return{collection:_,query:B,where:R,getDocs:C,doc:E,getDoc:O}},__vite__mapDeps([0,1]),import.meta.url),y=t($,"bookRequests"),x=e(y,r("center","==",g.value),r("status","==","pending")),F=await c(x),I=[];F.forEach(_=>{I.push({id:_.id,..._.data()})}),I.sort((_,B)=>{const R=_.requestedAt?.toDate?.()||new Date(0);return(B.requestedAt?.toDate?.()||new Date(0))-R}),q.value=I;const L=[...new Set(I.filter(_=>_.requestedBy).map(_=>_.requestedBy))];for(const _ of L)if(!me.value[_])try{const B=i($,"users",_),R=await b(B);if(R.exists()){const C=R.data(),E=(C.email||"").split("@")[0],O=C.name||"",W=C.workplace||"";me.value[_]=`${W} ${O}(${E})`}}catch(B){console.error("신청자 정보 로드 오류:",B)}}catch(t){console.error("도서 신청 목록 로드 오류:",t),q.value=[]}finally{ge.value=!1}},it=t=>t.requestedBy&&me.value[t.requestedBy]||"",be=async()=>{try{le.value=!0;const t=await Xe(g.value);ae.value=t}catch(t){console.error("카테고리 로드 오류:",t),ae.value=[]}finally{le.value=!1}},ut=t=>{const e=Math.max(1,Math.min(20,t||1)),r=u.value.copies,c=te();if(e>r.length)for(let i=r.length;i<e;i++)r.push({fourDigits:"",location:c,error:"",labelPreview:""});else e<r.length&&(u.value.copies=r.slice(0,e));u.value.quantity=e},ct=(t,e)=>{const r=t.target.value.replace(/\D/g,"").slice(0,4);u.value.copies[e].fourDigits=r,u.value.copies[e].error="",Ue()},dt=async t=>{const e=u.value.copies[t];if(!(!u.value.category||!e.fourDigits||e.fourDigits.length!==4))try{A.value=!0;const r=K(u.value.category,g.value,e.fourDigits);if(await De(r,g.value)){e.error="이미 사용중인 라벨번호입니다.";return}for(let i=0;i<u.value.copies.length;i++)if(i!==t&&u.value.copies[i].fourDigits===e.fourDigits){e.error="동일한 라벨번호가 이미 입력되어 있습니다.";return}e.error=""}catch(r){console.error("라벨번호 중복 체크 오류:",r)}finally{A.value=!1}},Te=async t=>{h.value=t,se.value=null;const e=te();u.value={category:"",quantity:1,copies:[{fourDigits:"",location:e,error:"",labelPreview:""}]},await be(),T.value=!0},vt=async t=>{h.value=t,se.value=t;const e=te();u.value={category:"",quantity:1,copies:[{fourDigits:"",location:e,error:"",labelPreview:""}]},await be(),T.value=!0},Ae=()=>{T.value=!1,h.value=null,se.value=null},mt=async()=>{const t=te();n.value={title:"",author:"",publisher:"",isbn:"",category:"",quantity:1,copies:[{fourDigits:"",location:t,error:"",labelPreview:""}]},await be(),ee.value=!0},ze=()=>{ee.value=!1},gt=t=>{const e=Math.max(1,Math.min(20,parseInt(t)||1)),r=n.value.copies,c=te();if(e>r.length)for(let i=r.length;i<e;i++)r.push({fourDigits:"",location:c,error:"",labelPreview:""});else e<r.length&&r.splice(e);n.value.quantity=e,ye()},ye=()=>{n.value.copies.forEach(t=>{n.value.category&&t.fourDigits&&t.fourDigits.length===4?t.labelPreview=K(n.value.category,g.value,t.fourDigits):t.labelPreview=""})};Qe(()=>n.value.category,()=>{ye()});const pt=(t,e)=>{const r=t.target.value.replace(/[^0-9]/g,"");n.value.copies[e].fourDigits=r,n.value.copies[e].error="",ye()},ft=async t=>{const e=n.value.copies[t];if(!e.fourDigits||e.fourDigits.length!==4||!n.value.category)return;const r=K(n.value.category,g.value,e.fourDigits);if(n.value.copies.some((i,b)=>b!==t&&i.fourDigits===e.fourDigits)){e.error="폼 내에서 중복된 라벨번호입니다.";return}try{A.value=!0,await De(r,g.value)?e.error="이미 사용중인 라벨번호입니다.":e.error=""}catch(i){console.error("라벨번호 중복 체크 오류:",i)}finally{A.value=!1}},bt=async()=>{if(!Ee.value)return;const t=ie(n.value.isbn.trim()),e=ie(n.value.title.trim()),r=ie(n.value.author.trim()),c=ie(n.value.publisher.trim());try{fe.value=!0;const i={title:e,author:r,publisher:c,isbn13:t.length===13?t:"",isbn:(t.length===10,t),image:"",cover:""},b=[];for(const y of n.value.copies){const x=K(n.value.category,g.value,y.fourDigits);await we(i,g.value,G.value.uid,n.value.category,x,y.location),b.push(x)}await ne(),ze(),b.length===1?await U(`도서가 성공적으로 등록되었습니다.
라벨번호: ${b[0]}`,{type:"success"}):await U(`${b.length}권의 도서가 성공적으로 등록되었습니다.
라벨번호:
${b.join(`
`)}`,{type:"success"})}catch(i){console.error("도서 직접 등록 오류:",i),await U(i.message||"도서 등록에 실패했습니다.",{type:"error"})}finally{fe.value=!1}},yt=async()=>{if(!h.value||!$e.value)return;const t=h.value,e=t.isbn13||t.isbn||"";if(!e){await U("ISBN 정보가 없어 등록할 수 없습니다.",{type:"error"});return}if(!ve.value.has(e))try{pe.value=!0,ve.value.add(e);const r=[];for(const i of u.value.copies){const b=K(u.value.category,g.value,i.fourDigits);await we(t,g.value,G.value.uid,u.value.category,b,i.location),r.push(b)}const c=se.value||q.value.find(i=>(i.isbn13||i.isbn||"")===e);if(c&&$){const{doc:i,updateDoc:b,serverTimestamp:y,addDoc:x,collection:F}=await _e(async()=>{const{doc:L,updateDoc:_,serverTimestamp:B,addDoc:R,collection:C}=await import("./D4meORf1.js").then(E=>E.b2);return{doc:L,updateDoc:_,serverTimestamp:B,addDoc:R,collection:C}},__vite__mapDeps([0,1]),import.meta.url),I=i($,"bookRequests",c.id);if(await b(I,{status:"approved",approvedAt:y(),approvedBy:G.value.uid}),c.requestedBy){const L=F($,"notifications");await x(L,{userId:c.requestedBy,type:"book_registered",title:"신청 도서 등록 완료",message:`신청하신 도서 "${t.title}"이(가) ${g.value}에 등록되었습니다.`,bookTitle:t.title,bookIsbn:e,center:g.value,isRead:!1,createdAt:y()})}q.value=q.value.filter(L=>L.id!==c.id)}await ne(),Ae(),r.length===1?await U(`도서가 성공적으로 등록되었습니다.
라벨번호: ${r[0]}`,{type:"success"}):await U(`${r.length}권의 도서가 성공적으로 등록되었습니다.
라벨번호:
${r.join(`
`)}`,{type:"success"})}catch(r){console.error("도서 등록 오류:",r),await U(r.message||"도서 등록에 실패했습니다.",{type:"error"})}finally{pe.value=!1,ve.value.delete(e)}};return Et({title:"도서 등록 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록"}]}),(t,e)=>{const r=k("v-select"),c=k("v-text-field"),i=k("v-progress-circular"),b=k("v-icon"),y=k("v-btn"),x=qt,F=k("v-col"),I=k("v-row"),L=Bt,_=k("v-pagination"),B=xt,R=Lt,C=k("v-navigation-drawer"),E=k("v-card-title"),O=k("v-card-text"),W=k("v-spacer"),Fe=k("v-card-actions"),Oe=k("v-card"),We=k("v-dialog"),_t=k("v-app");return m(),he(_t,null,{default:v(()=>[a(B,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[3]||(e[3]=s=>H.value=!o(H))},{default:v(()=>[l("div",Mt,[l("div",St,[l("div",Tt,[l("h1",At,w(o(g))+" 도서 등록 ",1),a(r,{modelValue:o(g),"onUpdate:modelValue":[e[0]||(e[0]=s=>Q(g)?g.value=s:null),at],items:qe,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),l("div",zt,[a(c,{modelValue:o(M),"onUpdate:modelValue":e[1]||(e[1]=s=>Q(M)?M.value=s:null),label:"도서 검색",placeholder:"도서명 또는 ISBN-13으로 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable",loading:o(oe),clearable:"",class:"search-input",onKeyup:Vt(lt,["enter"]),"onClick:clear":nt},null,8,["modelValue","loading"])]),o(oe)?(m(),p("div",Ft,[l("div",Ot,[a(i,{indeterminate:"",color:"primary"}),e[15]||(e[15]=l("p",{class:"mt-4 text-medium-emphasis"}," 검색 중... ",-1))])])):o(ue)&&o(X).length===0?(m(),p("div",Wt,[l("div",Qt,[a(b,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:v(()=>[...e[16]||(e[16]=[f(" mdi-book-search-outline ",-1)])]),_:1}),l("p",jt,[e[17]||(e[17]=f(" '",-1)),l("strong",null,w(o(M)),1),e[18]||(e[18]=f("'에 대한 검색 결과가 없습니다. ",-1))]),e[21]||(e[21]=l("p",{class:"text-body-2 mb-2"}," ISBN-13으로 다시 검색하거나, 직접 등록해보세요. ",-1)),e[22]||(e[22]=l("p",{class:"text-body-2 text-grey mb-4"}," ISBN을 모르시면 아래 버튼을 통해 조회할 수 있습니다. ",-1)),l("div",Kt,[a(y,{color:"primary",variant:"outlined",size:"small",href:"https://isbnsearch.org/",target:"_blank"},{default:v(()=>[...e[19]||(e[19]=[f(" ISBN 조회하기 ",-1)])]),_:1}),a(y,{color:"primary",variant:"flat",size:"small",onClick:mt},{default:v(()=>[...e[20]||(e[20]=[f(" 직접 등록하기 ",-1)])]),_:1})])])])):o(X).length>0?(m(),p("div",Gt,[l("div",Ht,[l("div",Jt,[o(tt)>=10?(m(),p(j,{key:0},[e[23]||(e[23]=f(" 검색 결과가 많습니다. (현재 ",-1)),l("strong",null,w(o(X).length),1),e[24]||(e[24]=f("개 표시 중) ",-1))],64)):(m(),p(j,{key:1},[e[25]||(e[25]=f(" 총 ",-1)),l("strong",null,w(o(X).length),1),e[26]||(e[26]=f("개의 검색 결과 ",-1))],64))]),a(y,{color:"primary",variant:"outlined",size:"small",href:"https://isbnsearch.org/",target:"_blank"},{default:v(()=>[...e[27]||(e[27]=[f(" ISBN 조회하기 ",-1)])]),_:1})]),a(I,{class:"book-list-row"},{default:v(()=>[(m(!0),p(j,null,re(o(X),(s,D)=>(m(),he(F,{key:`search-${D}`,cols:"12",sm:"6",class:"book-list-col"},{default:v(()=>[a(x,{book:s,center:o(g),"registered-books":o(Y),"requested-books":o(q),selectable:!1,"show-action":!0,"allow-register-requested":!0,"allow-additional-register":!0,onRegister:Te},null,8,["book","center","registered-books","requested-books"])]),_:2},1024))),128))]),_:1}),o(ot)?(m(),p("div",Xt,[a(y,{variant:"outlined",color:"primary",onClick:rt},{default:v(()=>[...e[28]||(e[28]=[f(" 더보기 ",-1)])]),_:1})])):N("",!0)])):N("",!0),a(L,{books:o(ce),center:o(g),"registered-books":o(Y),"requested-books":o(q),title:"베스트셀러",loading:o(de),"empty-message":"베스트셀러를 불러올 수 없습니다.","allow-register-requested":!0,"allow-additional-register":!0,"nav-id":"bestseller",class:"mb-8",onRegister:Te},null,8,["books","center","registered-books","requested-books","loading"]),l("div",Yt,[l("div",Zt,[e[31]||(e[31]=l("h2",{class:"section-title mb-0"}," 도서 신청 목록 ",-1)),o(q).length>0?(m(),p("div",eo,[e[29]||(e[29]=f(" 총 ",-1)),l("strong",null,w(o(Re)),1),e[30]||(e[30]=f("건의 신청 ",-1))])):N("",!0)]),o(ge)?(m(),p("div",to,[a(i,{indeterminate:"",color:"primary"})])):o(xe).length>0?(m(),p("div",oo,[a(I,{class:"book-list-row"},{default:v(()=>[(m(!0),p(j,null,re(o(xe),(s,D)=>(m(),he(F,{key:`request-${D}`,cols:"12",sm:"6",class:"book-list-col"},{default:v(()=>[a(x,{book:s,center:o(g),"registered-books":o(Y),selectable:!1,"show-action":!0,"action-button-text":`${o(g)}에 등록하기`,"requester-info":it(s),onRegister:vt},null,8,["book","center","registered-books","action-button-text","requester-info"])]),_:2},1024))),128))]),_:1}),o(Ce)>1?(m(),p("div",so,[a(_,{modelValue:o(Z),"onUpdate:modelValue":e[2]||(e[2]=s=>Q(Z)?Z.value=s:null),length:o(Ce),"total-visible":7,class:"pagination"},null,8,["modelValue","length"])])):N("",!0)])):(m(),p("div",ao," 신청된 도서가 없습니다. "))])])]),_:1}),a(C,{modelValue:o(H),"onUpdate:modelValue":e[4]||(e[4]=s=>Q(H)?H.value=s:null),location:"right",temporary:"",width:o(Ve),class:"side-navigation"},{default:v(()=>[l("div",lo,[a(R)])]),_:1},8,["modelValue","width"]),a(We,{modelValue:o(T),"onUpdate:modelValue":e[7]||(e[7]=s=>Q(T)?T.value=s:null),"max-width":"600"},{default:v(()=>[a(Oe,{class:"register-dialog-card"},{default:v(()=>[a(E,{class:"register-dialog-title"},{default:v(()=>[...e[32]||(e[32]=[f(" 도서 등록 ",-1)])]),_:1}),a(O,{class:"register-dialog-content"},{default:v(()=>[o(h)?(m(),p("div",no,[l("div",ro,[o(h).cover||o(h).image?(m(),p("img",{key:0,src:o(h).cover||o(h).image,alt:o(h).title,class:"book-thumbnail"},null,8,io)):(m(),p("div",uo,[...e[33]||(e[33]=[l("span",null,"No Image",-1)])])),l("div",co,[l("div",vo,w(o(h).title),1),o(h).author?(m(),p("div",mo,[e[34]||(e[34]=l("strong",null,"저자:",-1)),f(" "+w(o(h).author),1)])):N("",!0),o(h).publisher?(m(),p("div",go,[e[35]||(e[35]=l("strong",null,"출판사:",-1)),f(" "+w(o(h).publisher),1)])):N("",!0)])])])):N("",!0),l("div",po,[l("div",fo,[l("a",{href:"#",class:"category-manage-link",onClick:Ke(Le,["prevent"])}," 카테고리 관리 ")]),a(r,{modelValue:o(u).category,"onUpdate:modelValue":e[5]||(e[5]=s=>o(u).category=s),items:o(ae),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(le),rules:[s=>!!s||"카테고리를 선택해주세요"]},null,8,["modelValue","items","loading","rules"])]),l("div",bo,[a(c,{modelValue:o(u).quantity,"onUpdate:modelValue":[e[6]||(e[6]=s=>o(u).quantity=s),ut],modelModifiers:{number:!0},label:"등록 권수",variant:"outlined",density:"comfortable",type:"number",min:"1",max:"20",rules:[s=>s>=1&&s<=20||"1~20권까지 등록 가능합니다"],hint:"같은 도서를 여러 권 등록할 수 있습니다","persistent-hint":""},null,8,["modelValue","rules"])]),l("div",yo,[(m(!0),p(j,null,re(o(u).copies,(s,D)=>(m(),p("div",{key:D,class:"copy-entry mb-4"},[l("div",_o,[l("span",ho,w(D+1)+"권",1),s.labelPreview?(m(),p("span",ko,w(s.labelPreview),1)):N("",!0)]),l("div",wo,[a(c,{"model-value":o(Ie),label:"센터코드",variant:"outlined",density:"compact",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),a(c,{modelValue:s.fourDigits,"onUpdate:modelValue":V=>s.fourDigits=V,label:"4자리 번호 *",variant:"outlined",density:"compact",maxlength:"4",rules:Ne,"error-messages":s.error,hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:V=>ct(V,D),onBlur:()=>dt(D)},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","onBlur"]),a(r,{modelValue:s.location,"onUpdate:modelValue":V=>s.location=V,items:o(z),label:"위치 *",variant:"outlined",density:"compact",rules:[V=>!!V||"위치를 선택해주세요"],class:"location-select"},null,8,["modelValue","onUpdate:modelValue","items","rules"])])]))),128))])]),_:1}),a(Fe,{class:"register-dialog-actions"},{default:v(()=>[a(W),a(y,{variant:"text",onClick:Ae},{default:v(()=>[...e[36]||(e[36]=[f(" 취소 ",-1)])]),_:1}),a(y,{color:"primary",variant:"flat",loading:o(pe),disabled:!o($e),onClick:yt},{default:v(()=>[f(w(o(u).quantity>1?`${o(u).quantity}권 등록`:"등록"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(We,{modelValue:o(ee),"onUpdate:modelValue":e[14]||(e[14]=s=>Q(ee)?ee.value=s:null),"max-width":"600"},{default:v(()=>[a(Oe,{class:"register-dialog-card"},{default:v(()=>[a(E,{class:"register-dialog-title"},{default:v(()=>[...e[37]||(e[37]=[f(" 도서 직접 등록 ",-1)])]),_:1}),a(O,{class:"register-dialog-content"},{default:v(()=>[l("div",Do,[e[41]||(e[41]=l("div",{class:"manual-section-title mb-2"}," 도서 정보 ",-1)),a(c,{modelValue:o(n).title,"onUpdate:modelValue":e[8]||(e[8]=s=>o(n).title=s),label:"도서명 *",variant:"outlined",density:"compact","hide-details":!o(n).title||o(n).title.length>0?"auto":!1,class:"manual-input"},null,8,["modelValue","hide-details"]),a(c,{modelValue:o(n).author,"onUpdate:modelValue":e[9]||(e[9]=s=>o(n).author=s),label:"저자",variant:"outlined",density:"compact","hide-details":"",class:"manual-input"},null,8,["modelValue"]),a(c,{modelValue:o(n).publisher,"onUpdate:modelValue":e[10]||(e[10]=s=>o(n).publisher=s),label:"출판사",variant:"outlined",density:"compact","hide-details":"",class:"manual-input"},null,8,["modelValue"]),l("div",Vo,[a(c,{modelValue:o(n).isbn,"onUpdate:modelValue":e[11]||(e[11]=s=>o(n).isbn=s),label:"ISBN *",variant:"outlined",density:"compact","hide-details":!o(n).isbn||o(n).isbn.length>0?"auto":!1,class:"isbn-input"},null,8,["modelValue","hide-details"]),a(y,{variant:"outlined",size:"small",color:"primary",href:"https://isbnsearch.org/",target:"_blank",class:"isbn-lookup-btn"},{default:v(()=>[...e[38]||(e[38]=[f(" ISBN 조회 ",-1)])]),_:1})]),l("div",qo,[a(b,{size:"small",class:"mr-1"},{default:v(()=>[...e[39]||(e[39]=[f(" mdi-information-outline ",-1)])]),_:1}),e[40]||(e[40]=f(" 표지 이미지는 기본 이미지로 대체됩니다. ",-1))])]),l("div",Bo,[l("div",Ro,[l("a",{href:"#",class:"category-manage-link",onClick:Ke(Le,["prevent"])}," 카테고리 관리 ")]),a(r,{modelValue:o(n).category,"onUpdate:modelValue":e[12]||(e[12]=s=>o(n).category=s),items:o(ae),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(le)},null,8,["modelValue","items","loading"])]),l("div",Co,[a(c,{modelValue:o(n).quantity,"onUpdate:modelValue":[e[13]||(e[13]=s=>o(n).quantity=s),gt],modelModifiers:{number:!0},label:"등록 권수",variant:"outlined",density:"comfortable",type:"number",min:"1",max:"20",hint:"같은 도서를 여러 권 등록할 수 있습니다","persistent-hint":""},null,8,["modelValue"])]),l("div",xo,[(m(!0),p(j,null,re(o(n).copies,(s,D)=>(m(),p("div",{key:D,class:"copy-entry mb-4"},[l("div",Io,[l("span",Lo,w(D+1)+"권",1),s.labelPreview?(m(),p("span",Po,w(s.labelPreview),1)):N("",!0)]),l("div",No,[a(c,{"model-value":o(Ie),label:"센터코드",variant:"outlined",density:"compact",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),a(c,{modelValue:s.fourDigits,"onUpdate:modelValue":V=>s.fourDigits=V,label:"4자리 번호 *",variant:"outlined",density:"compact",maxlength:"4",rules:Ne,"error-messages":s.error,hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:V=>pt(V,D),onBlur:()=>ft(D)},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","onBlur"]),a(r,{modelValue:s.location,"onUpdate:modelValue":V=>s.location=V,items:o(z),label:"위치 *",variant:"outlined",density:"compact",class:"location-select"},null,8,["modelValue","onUpdate:modelValue","items"])])]))),128))])]),_:1}),a(Fe,{class:"register-dialog-actions"},{default:v(()=>[a(W),a(y,{variant:"text",onClick:ze},{default:v(()=>[...e[42]||(e[42]=[f(" 취소 ",-1)])]),_:1}),a(y,{color:"primary",variant:"flat",loading:o(fe),disabled:!o(Ee),onClick:bt},{default:v(()=>[f(w(o(n).quantity>1?`${o(n).quantity}권 등록`:"등록"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Ko=ht(Uo,[["__scopeId","data-v-8fcc1773"]]);export{Ko as default};
