const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./wyANdtPh.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as kt,N as Ct,a as Dt,D as Bt,r as f,k as O,o as Le,e as xt,_ as oe,Y as Vt,O as Z,L as p,g as E,H as y,K as i,P as a,I as n,J as w,Q as H,G as V,M as d,W as Ie,X as qe,U as Se,T as ue,S as we}from"./wyANdtPh.js";import{g as Nt,C as Et,_ as Rt}from"./DNeCsh3R.js";import{_ as $t}from"./iDpGS3yz.js";import{u as At,g as Lt,C as It,c as ke,f as Ue,p as qt}from"./iFRMrSEa.js";import{u as St}from"./CAhmV6Zb.js";import{u as Ut}from"./Dfo66jSH.js";import"./hlVow6pZ.js";const Tt={class:"books-admin-page"},zt={class:"center-header mb-6"},Ot={class:"center-header-inner"},Ft={class:"page-title mb-0"},Pt={class:"registered-books-section"},Mt={class:"registered-books-header mb-0"},Gt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},Ht={class:"text-body-1"},Wt={class:"text-body-2 text-medium-emphasis"},Qt={class:"d-flex align-center registered-search-group"},jt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mt-4"},Xt={class:"d-flex action-buttons"},Jt={key:0,class:"text-center py-8"},Kt={key:1,class:"registered-books-grid"},Yt=["onClick"],Zt=["src","alt"],eo={key:1,class:"book-thumbnail-placeholder"},to={class:"book-meta"},oo={class:"book-title"},so={key:0,class:"book-author"},ao={key:1,class:"book-publisher"},lo={class:"book-count"},no={class:"book-copies-list"},ro=["onClick"],io={class:"copy-content"},uo={class:"copy-row-top"},co={class:"copy-status"},vo={key:4,class:"copy-user-info"},mo=["onClick"],po={class:"copy-info-row"},fo={class:"copy-label-number"},go={class:"copy-location"},yo={class:"copy-actions"},bo={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},_o={key:0},ho={key:1},wo={class:"drawer-content"},ko={class:"rent-dialog-content"},Co={class:"mb-4 text-body-2 text-medium-emphasis"},Do={class:"rent-dialog-actions"},Bo={key:0,class:"book-info-preview mb-4"},xo={class:"book-info-preview-inner"},Vo=["src","alt"],No={key:1,class:"book-thumbnail-placeholder"},Eo={class:"book-meta"},Ro={class:"book-title"},$o={class:"book-current-label"},Ao={class:"book-current-location"},Lo={class:"label-number-inputs mb-3"},ce=5,Io={__name:"index",setup(qo){const{user:Ce}=St(),{getBooksByCenter:Te,rentBook:De,deleteBook:ze,updateBookInfo:Oe,checkLabelNumberExists:Fe,getCategories:Pe,calculateBookStatus:q}=At(),{confirm:re,alert:B}=Ct(),{$firebaseFirestore:Me}=Dt(),A=Me,se=Bt("navigationDrawer",()=>!1),Be=f(280),de=[...Et],D=f(""),Ge=f(""),X=f([]),ve=f(!1),W=f(""),P=f("date"),He=[{title:"등록일순",value:"date"},{title:"제목순",value:"title"},{title:"대여중도서",value:"rented"},{title:"연체중도서",value:"overdue"},{title:"대여신청도서",value:"requested"},{title:"신규등록도서",value:"new"}],g=f([]),ie=f(!1),S=f(!1),me=f({}),pe=f({}),ee=f(!1),Q=f([]),fe=f(!1),M=f(""),G=f(""),F=f(""),ae=f(!1),R=f(null),ge=f(!1),ye=f([]),be=f(!1),J=f(""),m=f({category:"",fourDigits:"",location:""}),We=O(()=>Lt()),Qe=O(()=>It[D.value]||"1");O(()=>!m.value.category||!m.value.fourDigits?"":ke(m.value.category,D.value,m.value.fourDigits));const xe=O(()=>m.value.category&&m.value.fourDigits&&m.value.fourDigits.length===4&&/^\d{4}$/.test(m.value.fourDigits)&&m.value.location&&!J.value);Le(()=>{const t=()=>{Be.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),xt(()=>{window.removeEventListener("resize",t)})});const je=async()=>{if(!Ce.value||!A)return"";try{const{doc:t,getDoc:e}=await oe(async()=>{const{doc:r,getDoc:v}=await import("./wyANdtPh.js").then(u=>u.aE);return{doc:r,getDoc:v}},__vite__mapDeps([0,1]),import.meta.url),o=t(A,"users",Ce.value.uid),s=await e(o);if(s.exists())return s.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Le(async()=>{const t=await je();Ge.value=t,D.value=t?Nt(t):de[0],await j()});const Xe=async()=>{g.value=[],await j()},j=async()=>{try{ve.value=!0;const t=await Te(D.value);X.value=t,await Je(t)}catch(t){console.error("등록된 도서 로드 오류:",t),X.value=[]}finally{ve.value=!1}},Je=async t=>{if(!A)return;const{doc:e,getDoc:o}=await oe(async()=>{const{doc:u,getDoc:b}=await import("./wyANdtPh.js").then(x=>x.aE);return{doc:u,getDoc:b}},__vite__mapDeps([0,1]),import.meta.url),s=[...new Set(t.filter(u=>u.rentedBy).map(u=>u.rentedBy))],r=[...new Set(t.filter(u=>u.requestedBy).map(u=>u.requestedBy))],v=[...new Set([...s,...r])];for(const u of v)if(!(me.value[u]&&pe.value[u]))try{const b=e(A,"users",u),x=await o(b);if(x.exists()){const k=x.data(),$=(k.email||"").split("@")[0]||"",C=k.name||"",h=`${k.workplace||""} ${C}(${$})`;me.value[u]=h,pe.value[u]=h}}catch(b){console.error("대여자/신청자 정보 로드 오류:",b)}},Ve=t=>t.rentedBy&&me.value[t.rentedBy]||"",_e=t=>t.requestedBy&&pe.value[t.requestedBy]||"",Ke=()=>{},Ne=O(()=>{const t=new Map;for(const e of X.value){const o=e.isbn13||e.isbn||e.id;t.has(o)||t.set(o,{isbn:o,title:e.title,author:e.author,publisher:e.publisher,image:e.image,copies:[],totalCount:0,availableCount:0,rentedCount:0,requestedCount:0,locations:[]});const s=t.get(o);s.copies.push(e),s.totalCount++;const r=q(e);r?r==="rented"||r==="overdue"?s.rentedCount++:r==="requested"&&s.requestedCount++:s.availableCount++,e.location&&!s.locations.includes(e.location)&&s.locations.push(e.location)}for(const e of t.values())e.copies.sort((o,s)=>{const r=o.labelNumber||"",v=s.labelNumber||"";return r.localeCompare(v,"ko")});return Array.from(t.values())}),le=O(()=>{let t=[...Ne.value];if(W.value.trim()){const e=W.value.toLowerCase();t=t.filter(o=>{const s=(o.title||"").toLowerCase(),r=(o.author||"").toLowerCase(),v=(o.publisher||"").toLowerCase();return s.includes(e)||r.includes(e)||v.includes(e)?!0:o.copies.some(u=>(u.labelNumber||"").toLowerCase().includes(e))})}return P.value==="title"?t.sort((e,o)=>{const s=(e.title||"").toLowerCase(),r=(o.title||"").toLowerCase();return s.localeCompare(r,"ko")}):P.value==="date"?t.sort((e,o)=>{const s=e.copies[0]?.registeredAt?.toDate?.()||new Date(0);return(o.copies[0]?.registeredAt?.toDate?.()||new Date(0))-s}):P.value==="rented"?t=t.filter(e=>e.rentedCount>0):P.value==="overdue"?t=t.filter(e=>e.copies.some(o=>q(o)==="overdue")):P.value==="requested"?t=t.filter(e=>e.requestedCount>0):P.value==="new"&&(t=t.filter(e=>e.copies.some(o=>o.location==="구매칸"))),t}),Ye=O(()=>X.value.length),Ze=O(()=>Ne.value.length),et=O(()=>X.value.filter(t=>q(t)==="rented").length),tt=O(()=>X.value.filter(t=>q(t)==="overdue").length),ot=O(()=>X.value.filter(t=>q(t)==="requested").length),te=t=>q(t),K=t=>g.value.some(e=>e.id===t.id),Ee=t=>t.copies.every(e=>K(e)),st=t=>{const e=t.copies.filter(o=>K(o)).length;return e>0&&e<t.copies.length},at=(t,e)=>{e?K(t)||g.value.push(t):g.value=g.value.filter(o=>o.id!==t.id),he()},lt=(t,e)=>{if(e)for(const o of t.copies)K(o)||g.value.push(o);else{const o=t.copies.map(s=>s.id);g.value=g.value.filter(s=>!o.includes(s.id))}he()},nt=t=>{const e=Ee(t);lt(t,!e)},rt=t=>{at(t,!K(t))},it=t=>{t?g.value=le.value.flatMap(e=>e.copies):g.value=[]},he=()=>{const t=le.value.flatMap(e=>e.copies);ie.value=t.length>0&&t.every(e=>K(e))};Vt(()=>le.value,()=>{he()});const ut=async()=>{try{be.value=!0;const t=await Pe(D.value);ye.value=t}catch(t){console.error("카테고리 로드 오류:",t),ye.value=[]}finally{be.value=!1}},ct=t=>{const e=t.target.value.replace(/\D/g,"").slice(0,4);m.value.fourDigits=e,J.value=""},dt=async()=>{if(!m.value.category||!m.value.fourDigits||m.value.fourDigits.length!==4)return;const t=ke(m.value.category,D.value,m.value.fourDigits);if(R.value&&t===R.value.labelNumber){J.value="";return}try{await Fe(t,D.value)?J.value="이미 사용중인 라벨번호입니다.":J.value=""}catch(e){console.error("라벨번호 중복 체크 오류:",e)}},vt=async t=>{R.value=t;const e=qt(t.labelNumber);m.value={category:t.category||e?.category||"",fourDigits:e?.fourDigits||"",location:t.location||"구매칸"},J.value="",await ut(),ae.value=!0},Re=()=>{ae.value=!1,R.value=null},mt=async()=>{if(!(!R.value||!xe.value))try{ge.value=!0;const t=ke(m.value.category,D.value,m.value.fourDigits);await Oe(R.value.labelNumber||R.value.id.split("_")[0],D.value,{category:m.value.category,labelNumber:t,location:m.value.location}),Re(),await j(),await B("도서 정보가 수정되었습니다.",{type:"success"})}catch(t){console.error("도서 정보 수정 오류:",t),await B(t.message||"도서 정보 수정에 실패했습니다.",{type:"error"})}finally{ge.value=!1}},pt=async()=>{if(g.value.length===0)return;const t=[],e=[];for(const s of g.value){const r=q(s);r==="rented"||r==="overdue"?e.push({book:s,reason:"대여중"}):r==="requested"?e.push({book:s,reason:"대여신청중"}):t.push(s)}if(t.length===0){const s=e.map(r=>`• ${r.book.title} (${r.reason})`).join(`
`);await B(`선택한 도서를 삭제할 수 없습니다.

${s}

대여중/대여신청중인 도서는 반납 또는 신청 취소 후 삭제해주세요.`,{type:"warning"});return}let o=`선택한 ${g.value.length}권 중 ${t.length}권의 도서를 삭제하시겠습니까?`;if(e.length>0){const s=e.map(r=>`• ${r.book.title} (${r.reason})`).join(`
`);o+=`

⚠️ 다음 도서는 삭제할 수 없습니다:
${s}`}if(await re(o))try{S.value=!0;const s=t.map(r=>{const v=r.labelNumber||r.id.split("_")[0];return ze(v,D.value)});await Promise.all(s),g.value=[],await j(),e.length>0?await B(`${t.length}권의 도서가 삭제되었습니다.
(${e.length}권은 대여중/대여신청중으로 삭제되지 않았습니다.)`,{type:"success"}):await B(`${t.length}권의 도서가 삭제되었습니다.`,{type:"success"})}catch(s){console.error("도서 삭제 오류:",s),await B("도서 삭제에 실패했습니다.",{type:"error"})}finally{S.value=!1}},ft=async()=>{if(g.value.length===0)return;const t=g.value.filter(e=>{const o=q(e);return o!=="rented"&&o!=="overdue"});if(t.length===0){await B("선택한 도서가 모두 대여중입니다.",{type:"warning"});return}Q.value=t,M.value=D.value,G.value="",F.value="",ee.value=!0},$e=async t=>{if(!A||!t)return 0;try{const{collection:e,query:o,where:s,getDocs:r}=await oe(async()=>{const{collection:k,query:c,where:$,getDocs:C}=await import("./wyANdtPh.js").then(N=>N.aE);return{collection:k,query:c,where:$,getDocs:C}},__vite__mapDeps([0,1]),import.meta.url),v=e(A,"books"),u=o(v,s("rentedBy","==",t)),b=await r(u);let x=0;return b.forEach(k=>{const c=k.data();(c.status==="rented"||c.status==="overdue")&&x++}),x}catch(e){return console.error("대여 권수 조회 오류:",e),0}},gt=async t=>{if(q(t)==="requested"&&t.requestedBy){if(await $e(t.requestedBy)>=ce){await B(`신청자가 이미 ${ce}권을 대여중입니다.
반납 후 대여 처리해주세요.`,{type:"warning"});return}if(!await re(`신청자 정보로 대여 처리하시겠습니까?

도서: ${t.title}
라벨번호: ${t.labelNumber||"-"}
신청자: ${_e(t)}`))return;try{S.value=!0;const s=t.labelNumber||t.id.split("_")[0];await De(s,D.value,t.requestedBy,t.isbn),await j(),await B("대여 처리가 완료되었습니다.",{type:"success"})}catch(s){console.error("대여 처리 오류:",s),await B(s.message||"대여 처리에 실패했습니다.",{type:"error"})}finally{S.value=!1}return}Q.value=[t],M.value=D.value,G.value="",F.value="",ee.value=!0},Ae=()=>{ee.value=!1,Q.value=[],M.value="",G.value="",F.value=""},yt=async()=>{if(!(!M.value||!G.value))try{fe.value=!0,F.value="";const{collection:t,query:e,where:o,getDocs:s}=await oe(async()=>{const{collection:h,query:L,where:I,getDocs:U}=await import("./wyANdtPh.js").then(T=>T.aE);return{collection:h,query:L,where:I,getDocs:U}},__vite__mapDeps([0,1]),import.meta.url),r=t(A,"users"),v=e(r,o("email","==",G.value)),u=await s(v);if(u.empty){F.value="해당 이메일의 사용자를 찾을 수 없습니다.";return}const b=u.docs[0].data();if(b.center!==M.value){F.value=`해당 사용자는 ${b.center} 소속입니다.`;return}const k=u.docs[0].id,c=await $e(k),$=Q.value.length,C=ce-c;if(C<=0){F.value=`해당 사용자가 이미 ${ce}권을 대여중입니다.`;return}if($>C){F.value=`해당 사용자는 ${C}권까지만 추가 대여 가능합니다. (현재 ${c}권 대여중)`;return}for(const h of Q.value){const L=h.labelNumber||h.id.split("_")[0];await De(L,D.value,k,h.isbn)}const N=Q.value.length;await j(),g.value=g.value.filter(h=>!Q.value.some(L=>L.id===h.id)),Ae(),await B(`${N}권의 도서가 대여 처리되었습니다.`,{type:"success"})}catch(t){console.error("도서 대여 오류:",t),F.value=t.message||"대여 처리에 실패했습니다."}finally{fe.value=!1}},bt=async()=>{if(g.value.length===0)return;const t=g.value.filter(e=>{const o=q(e);return o==="rented"||o==="overdue"});if(t.length===0){await B("선택한 도서 중 대여중인 도서가 없습니다.",{type:"warning"});return}if(await re(`선택한 ${t.length}권의 도서를 반납 처리하시겠습니까?`))try{S.value=!0;const{doc:e,updateDoc:o,collection:s,addDoc:r,query:v,where:u,getDocs:b,serverTimestamp:x,deleteField:k}=await oe(async()=>{const{doc:c,updateDoc:$,collection:C,addDoc:N,query:h,where:L,getDocs:I,serverTimestamp:U,deleteField:T}=await import("./wyANdtPh.js").then(z=>z.aE);return{doc:c,updateDoc:$,collection:C,addDoc:N,query:h,where:L,getDocs:I,serverTimestamp:U,deleteField:T}},__vite__mapDeps([0,1]),import.meta.url);for(const c of t){const $=c.labelNumber||c.id.split("_")[0],C=c.id,N=c.rentedBy,h=c.rentedAt,L=e(A,"books",C);if(await o(L,{status:"available",rentedBy:k(),rentedAt:k(),expectedReturnDate:k()}),N){const I=s(A,"rentalHistory"),U=c.isbn13||c.isbn||"",T=v(I,u("userId","==",N),u("isbn13","==",U)),z=await b(T);if(z.empty)await r(I,{bookId:C,labelNumber:$,isbn13:c.isbn13||"",isbn:c.isbn||"",title:c.title||"",author:c.author||"",publisher:c.publisher||"",cover:c.cover||c.image||"",center:c.center||"",userId:N,rentedAt:h,returnedAt:x(),rentCount:1});else{const l=z.docs[0],Y=l.data();await o(e(A,"rentalHistory",l.id),{rentedAt:h,returnedAt:x(),rentCount:(Y.rentCount||1)+1})}}}g.value=[],await j(),await B(`${t.length}권의 도서가 반납 처리되었습니다.`,{type:"success"})}catch(e){console.error("도서 반납 오류:",e),await B("도서 반납에 실패했습니다.",{type:"error"})}finally{S.value=!1}},_t=async t=>{const e=q(t);if(e!=="rented"&&e!=="overdue"){await B("대여중인 도서가 아닙니다.",{type:"warning"});return}if(await re(`"${t.title}" 도서를 반납 처리하시겠습니까?
라벨번호: ${t.labelNumber||"-"}`))try{S.value=!0;const{doc:o,updateDoc:s,collection:r,addDoc:v,query:u,where:b,getDocs:x,serverTimestamp:k,deleteField:c}=await oe(async()=>{const{doc:I,updateDoc:U,collection:T,addDoc:z,query:l,where:Y,getDocs:_,serverTimestamp:ne,deleteField:ht}=await import("./wyANdtPh.js").then(wt=>wt.aE);return{doc:I,updateDoc:U,collection:T,addDoc:z,query:l,where:Y,getDocs:_,serverTimestamp:ne,deleteField:ht}},__vite__mapDeps([0,1]),import.meta.url),$=t.id,C=t.rentedBy,N=t.rentedAt,h=t.labelNumber||t.id.split("_")[0],L=o(A,"books",$);if(await s(L,{status:"available",rentedBy:c(),rentedAt:c(),expectedReturnDate:c()}),C){const I=r(A,"rentalHistory"),U=t.isbn13||t.isbn||"",T=u(I,b("userId","==",C),b("isbn13","==",U)),z=await x(T);if(z.empty)await v(I,{bookId:$,labelNumber:h,isbn13:t.isbn13||"",isbn:t.isbn||"",title:t.title||"",author:t.author||"",publisher:t.publisher||"",cover:t.cover||t.image||"",center:t.center||"",userId:C,rentedAt:N,returnedAt:k(),rentCount:1});else{const l=z.docs[0],Y=l.data();await s(o(A,"rentalHistory",l.id),{rentedAt:N,returnedAt:k(),rentCount:(Y.rentCount||1)+1})}}await j(),await B("도서가 반납 처리되었습니다.",{type:"success"})}catch(o){console.error("도서 반납 오류:",o),await B("도서 반납에 실패했습니다.",{type:"error"})}finally{S.value=!1}};return Ut({title:"도서 관리 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록 관리"}]}),(t,e)=>{const o=E("v-select"),s=E("v-text-field"),r=E("v-checkbox"),v=E("v-btn"),u=E("v-progress-circular"),b=E("v-chip"),x=E("v-icon"),k=Rt,c=$t,$=E("v-navigation-drawer"),C=E("v-spacer"),N=E("v-card"),h=E("v-dialog"),L=E("v-card-title"),I=E("v-autocomplete"),U=E("v-card-text"),T=E("v-card-actions"),z=E("v-app");return y(),Z(z,null,{default:p(()=>[i(k,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[4]||(e[4]=l=>se.value=!a(se))},{default:p(()=>[n("div",Tt,[n("div",zt,[n("div",Ot,[n("h1",Ft,w(a(D))+" 도서 관리 ",1),i(o,{modelValue:a(D),"onUpdate:modelValue":[e[0]||(e[0]=l=>H(D)?D.value=l:null),Xe],items:de,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),n("div",Pt,[n("div",Mt,[n("div",Gt,[n("div",Ht,[e[13]||(e[13]=d(" 총 ",-1)),n("strong",null,w(a(Ye)),1),d("권 ("+w(a(Ze))+"종) ",1)]),n("div",Wt,[e[14]||(e[14]=d(" 대여중 ",-1)),n("strong",null,w(a(et)),1),e[15]||(e[15]=d("권, 연체중 ",-1)),n("strong",null,w(a(tt)),1),e[16]||(e[16]=d("권, 대여신청 ",-1)),n("strong",null,w(a(ot)),1),e[17]||(e[17]=d("권 ",-1))])]),n("div",Qt,[i(s,{modelValue:a(W),"onUpdate:modelValue":[e[1]||(e[1]=l=>H(W)?W.value=l:null),Ke],label:"도서/라벨번호 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"registered-search-input"},null,8,["modelValue"]),i(o,{modelValue:a(P),"onUpdate:modelValue":e[2]||(e[2]=l=>H(P)?P.value=l:null),items:He,label:"정렬",variant:"outlined",density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),n("div",jt,[i(r,{modelValue:a(ie),"onUpdate:modelValue":[e[3]||(e[3]=l=>H(ie)?ie.value=l:null),it],label:"전체선택","hide-details":"",class:"select-all-checkbox"},null,8,["modelValue"]),n("div",Xt,[i(v,{class:"action-btn",variant:"flat",size:"small",disabled:a(g).length===0,loading:a(S),onClick:pt},{default:p(()=>[...e[18]||(e[18]=[d(" 도서 삭제 ",-1)])]),_:1},8,["disabled","loading"]),i(v,{class:"action-btn",variant:"flat",size:"small",disabled:a(g).length===0,loading:a(S),onClick:ft},{default:p(()=>[...e[19]||(e[19]=[d(" 대여 처리 ",-1)])]),_:1},8,["disabled","loading"]),i(v,{class:"action-btn",variant:"flat",size:"small",disabled:a(g).length===0,loading:a(S),onClick:bt},{default:p(()=>[...e[20]||(e[20]=[d(" 반납 처리 ",-1)])]),_:1},8,["disabled","loading"])])])]),a(ve)?(y(),V("div",Jt,[i(u,{indeterminate:"",color:"primary"})])):a(le).length>0?(y(),V("div",Kt,[(y(!0),V(Ie,null,qe(a(le),(l,Y)=>(y(),V("div",{key:`group-${Y}`,class:Se(["book-card",{"book-card-selected":Ee(l)||st(l)}])},[n("div",{class:"book-card-header",onClick:_=>nt(l)},[l.image?(y(),V("img",{key:0,src:l.image,alt:l.title,class:"book-thumbnail"},null,8,Zt)):(y(),V("div",eo,[...e[21]||(e[21]=[n("span",null,"NO IMAGE",-1)])])),n("div",to,[n("div",oo,w(l.title),1),l.author?(y(),V("div",so,[e[22]||(e[22]=n("strong",null,"저자:",-1)),d(" "+w(l.author),1)])):ue("",!0),l.publisher?(y(),V("div",ao,[e[23]||(e[23]=n("strong",null,"출판사:",-1)),d(" "+w(l.publisher),1)])):ue("",!0),n("div",lo," 등록 "+w(l.totalCount)+"권 ",1)])],8,Yt),n("div",no,[(y(!0),V(Ie,null,qe(l.copies,_=>(y(),V("div",{key:_.id,class:Se(["book-copy-item",{selected:K(_)}]),onClick:ne=>rt(_)},[n("div",io,[n("div",uo,[n("div",co,[te(_)==="rented"?(y(),Z(b,{key:0,size:"x-small",color:"primary",variant:"flat"},{default:p(()=>[...e[24]||(e[24]=[d(" 대여중 ",-1)])]),_:1})):te(_)==="overdue"?(y(),Z(b,{key:1,size:"x-small",color:"error",variant:"flat"},{default:p(()=>[...e[25]||(e[25]=[d(" 연체중 ",-1)])]),_:1})):te(_)==="requested"?(y(),Z(b,{key:2,size:"x-small",color:"warning",variant:"flat"},{default:p(()=>[...e[26]||(e[26]=[d(" 대여신청 ",-1)])]),_:1})):(y(),Z(b,{key:3,size:"x-small",color:"success",variant:"outlined"},{default:p(()=>[...e[27]||(e[27]=[d(" 대여가능 ",-1)])]),_:1})),Ve(_)||_e(_)?(y(),V("span",vo,w(Ve(_)||_e(_)),1)):ue("",!0)]),n("a",{href:"#",class:"copy-edit-link",onClick:we(ne=>vt(_),["prevent","stop"])}," 정보수정 ",8,mo)]),n("div",po,[n("span",fo,w(_.labelNumber||"라벨없음"),1),e[29]||(e[29]=n("span",{class:"copy-divider"},"|",-1)),n("span",go,[i(x,{size:"small",class:"mr-1"},{default:p(()=>[...e[28]||(e[28]=[d(" mdi-map-marker ",-1)])]),_:1}),d(" "+w(a(Ue)(_.location)||"위치없음"),1)])]),n("div",yo,[te(_)==="rented"||te(_)==="overdue"?(y(),Z(v,{key:0,color:"primary",size:"small",variant:"flat",onClick:we(ne=>_t(_),["stop"])},{default:p(()=>[...e[30]||(e[30]=[d(" 반납처리 ",-1)])]),_:1},8,["onClick"])):(y(),Z(v,{key:1,color:"primary",size:"small",variant:"flat",onClick:we(ne=>gt(_),["stop"])},{default:p(()=>[d(w(te(_)==="requested"?"대여승인":"대여처리"),1)]),_:2},1032,["onClick"]))])])],10,ro))),128))])],2))),128))])):(y(),V("div",bo,[i(x,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:p(()=>[d(w(a(W)?"mdi-book-search-outline":"mdi-book-off-outline"),1)]),_:1}),a(W)?(y(),V("p",_o,[e[31]||(e[31]=d(" '",-1)),n("strong",null,w(a(W)),1),e[32]||(e[32]=d("'에 대한 검색 결과가 없습니다. ",-1))])):(y(),V("p",ho," 등록된 도서가 없습니다. "))]))])])]),_:1}),i($,{modelValue:a(se),"onUpdate:modelValue":e[5]||(e[5]=l=>H(se)?se.value=l:null),location:"right",temporary:"",width:a(Be),class:"side-navigation"},{default:p(()=>[n("div",wo,[i(c)])]),_:1},8,["modelValue","width"]),i(h,{modelValue:a(ee),"onUpdate:modelValue":e[8]||(e[8]=l=>H(ee)?ee.value=l:null),"max-width":"400",persistent:""},{default:p(()=>[i(N,{class:"rent-dialog-card"},{default:p(()=>[e[35]||(e[35]=n("div",{class:"rent-dialog-title text-h6"}," 대여자 정보 입력 ",-1)),n("div",ko,[n("div",Co," 대여 처리할 도서: "+w(a(Q).length)+"권 ",1),i(o,{modelValue:a(M),"onUpdate:modelValue":e[6]||(e[6]=l=>H(M)?M.value=l:null),items:de,label:"센터",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),i(s,{modelValue:a(G),"onUpdate:modelValue":e[7]||(e[7]=l=>H(G)?G.value=l:null),label:"이메일",variant:"outlined",density:"comfortable",placeholder:"example@email.com","error-messages":a(F)},null,8,["modelValue","error-messages"])]),n("div",Do,[i(C),i(v,{variant:"text",onClick:Ae},{default:p(()=>[...e[33]||(e[33]=[d(" 취소 ",-1)])]),_:1}),i(v,{color:"primary",variant:"flat",loading:a(fe),disabled:!a(M)||!a(G),onClick:yt},{default:p(()=>[...e[34]||(e[34]=[d(" 대여 처리 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1},8,["modelValue"]),i(h,{modelValue:a(ae),"onUpdate:modelValue":e[12]||(e[12]=l=>H(ae)?ae.value=l:null),"max-width":"500",persistent:""},{default:p(()=>[i(N,{class:"edit-dialog-card"},{default:p(()=>[i(L,{class:"edit-dialog-title"},{default:p(()=>[...e[36]||(e[36]=[d(" 도서 정보 수정 ",-1)])]),_:1}),i(U,{class:"edit-dialog-content"},{default:p(()=>[a(R)?(y(),V("div",Bo,[n("div",xo,[a(R).image?(y(),V("img",{key:0,src:a(R).image,alt:a(R).title,class:"book-thumbnail"},null,8,Vo)):(y(),V("div",No,[...e[37]||(e[37]=[n("span",null,"No Image",-1)])])),n("div",Eo,[n("div",Ro,w(a(R).title),1),n("div",$o,w(a(R).labelNumber||"라벨없음"),1),n("div",Ao,[i(x,{size:"small",class:"mr-1"},{default:p(()=>[...e[38]||(e[38]=[d(" mdi-map-marker ",-1)])]),_:1}),d(" "+w(a(Ue)(a(R).location)||"위치없음"),1)])])])])):ue("",!0),i(I,{modelValue:a(m).category,"onUpdate:modelValue":e[9]||(e[9]=l=>a(m).category=l),items:a(ye),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:a(be),class:"mb-3"},null,8,["modelValue","items","loading"]),n("div",Lo,[i(s,{"model-value":a(Qe),label:"센터코드",variant:"outlined",density:"comfortable",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),i(s,{modelValue:a(m).fourDigits,"onUpdate:modelValue":e[10]||(e[10]=l=>a(m).fourDigits=l),label:"4자리 번호 *",variant:"outlined",density:"comfortable",maxlength:"4","error-messages":a(J),hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:ct,onBlur:dt},null,8,["modelValue","error-messages"])]),i(o,{modelValue:a(m).location,"onUpdate:modelValue":e[11]||(e[11]=l=>a(m).location=l),items:a(We),label:"위치 *",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),_:1}),i(T,{class:"edit-dialog-actions"},{default:p(()=>[i(C),i(v,{variant:"text",onClick:Re},{default:p(()=>[...e[39]||(e[39]=[d(" 취소 ",-1)])]),_:1}),i(v,{color:"primary",variant:"flat",loading:a(ge),disabled:!a(xe),onClick:mt},{default:p(()=>[...e[40]||(e[40]=[d(" 저장 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Mo=kt(Io,[["__scopeId","data-v-d66c3cbb"]]);export{Mo as default};
