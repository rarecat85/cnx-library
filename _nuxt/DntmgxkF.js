const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CRXKbooM.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as A,D as L,a as V,r as c,Y as E,g as B,G as p,H as v,I as t,K as e,T as k,L as o,M as i,P as g,_ as I}from"./CRXKbooM.js";import{a as P}from"./BsOPCK4L.js";import{_ as R}from"./t3xIg5dx.js";import{u as S}from"./CWVCvHjs.js";const T={class:"side-navigation-menu"},F={class:"menu-header"},$={class:"menu-list"},q={class:"menu-section"},G={key:0,class:"menu-section admin-section"},H={key:1,class:"menu-section super-admin-section"},K={class:"menu-section"},M={__name:"SideNavigation",setup(O){const x=L("navigationDrawer",()=>!1),{logout:C,user:d}=S(),{$firebaseFirestore:w}=V(),_=w,u=c(!1),r=c(!1),b=async()=>{if(!d.value||!_){u.value=!1,r.value=!1;return}try{const{doc:m,getDoc:s}=await I(async()=>{const{doc:n,getDoc:D}=await import("./CRXKbooM.js").then(N=>N.aE);return{doc:n,getDoc:D}},__vite__mapDeps([0,1]),import.meta.url),f=m(_,"users",d.value.uid),l=await s(f);if(l.exists()){const n=l.data();u.value=n.role==="admin"||n.role==="manager",r.value=n.role==="admin"}else u.value=!1,r.value=!1}catch(m){console.error("사용자 권한 확인 실패:",m),u.value=!1,r.value=!1}};E(()=>d.value,async m=>{m?await b():(u.value=!1,r.value=!1)},{immediate:!0});const a=()=>{x.value=!1},y=async()=>{await C(),a()};return(m,s)=>{const f=P,l=B("v-icon"),n=R;return v(),p("div",T,[t("div",F,[e(f)]),t("nav",$,[t("div",q,[e(n,{to:"/",class:"menu-item",onClick:a},{default:o(()=>[e(l,null,{default:o(()=>[...s[0]||(s[0]=[i("mdi-home",-1)])]),_:1}),s[1]||(s[1]=t("span",null,"홈",-1))]),_:1}),e(n,{to:"/books",class:"menu-item",onClick:a},{default:o(()=>[e(l,null,{default:o(()=>[...s[2]||(s[2]=[i("mdi-book-open-variant",-1)])]),_:1}),s[3]||(s[3]=t("span",null,"도서 대여",-1))]),_:1}),e(n,{to:"/books/request",class:"menu-item",onClick:a},{default:o(()=>[e(l,null,{default:o(()=>[...s[4]||(s[4]=[i("mdi-book-plus",-1)])]),_:1}),s[5]||(s[5]=t("span",null,"도서 신청",-1))]),_:1}),e(n,{to:"/mypage",class:"menu-item",onClick:a},{default:o(()=>[e(l,null,{default:o(()=>[...s[6]||(s[6]=[i("mdi-account",-1)])]),_:1}),s[7]||(s[7]=t("span",null,"마이페이지",-1))]),_:1})]),g(u)?(v(),p("div",G,[s[12]||(s[12]=t("div",{class:"menu-section-title"}," 관리자 ",-1)),e(n,{to:"/admin/books",class:"menu-item",onClick:a},{default:o(()=>[e(l,null,{default:o(()=>[...s[8]||(s[8]=[i("mdi-book-edit",-1)])]),_:1}),s[9]||(s[9]=t("span",null,"도서 관리",-1))]),_:1}),e(n,{to:"/admin/books/register",class:"menu-item",onClick:a},{default:o(()=>[e(l,null,{default:o(()=>[...s[10]||(s[10]=[i("mdi-book-plus",-1)])]),_:1}),s[11]||(s[11]=t("span",null,"도서 등록",-1))]),_:1})])):k("",!0),g(r)?(v(),p("div",H,[s[15]||(s[15]=t("div",{class:"menu-section-title"}," 최고관리자 ",-1)),e(n,{to:"/admin/managers",class:"menu-item",onClick:a},{default:o(()=>[e(l,null,{default:o(()=>[...s[13]||(s[13]=[i("mdi-account-cog",-1)])]),_:1}),s[14]||(s[14]=t("span",null,"매니저 관리",-1))]),_:1})])):k("",!0),t("div",K,[t("div",{class:"menu-item logout-item",onClick:y},[e(l,null,{default:o(()=>[...s[16]||(s[16]=[i("mdi-logout",-1)])]),_:1}),s[17]||(s[17]=t("span",null,"로그아웃",-1))])])])])}}},J=A(M,[["__scopeId","data-v-2447e898"]]);export{J as _};
