const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./820eoStb.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{F as Ot,N as zt,a as Pt,D as Tt,r as v,k as L,o as Qe,e as Ft,_ as de,W as je,O as M,L as d,g as B,H as c,K as r,P as o,I as s,J as _,Q as q,G as b,M as u,T as H,X as Ee,Y as Re,U as Xe,S as Le}from"./820eoStb.js";import{g as Mt,C as Gt,_ as Wt}from"./Bo1do3YP.js";import{_ as Ht}from"./DkIAv4gB.js";import{u as Qt,g as Je,C as jt,c as $e,f as Ie,p as Xt}from"./cuN5Hmzw.js";import{u as Jt}from"./CToKycOr.js";import{u as Kt}from"./Lb_6DAE3.js";import"./DMWE-QkB.js";const Yt={class:"books-admin-page"},Zt={class:"center-header mb-6"},eo={class:"center-header-inner"},to={class:"page-title mb-0"},oo={class:"registered-books-section"},so={class:"registered-books-header mb-0"},lo={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},ao={class:"text-body-1"},no={class:"text-body-2 text-medium-emphasis"},ro={class:"d-flex align-center registered-search-group"},io={class:"d-flex align-center justify-space-between flex-wrap gap-4 mt-4"},uo={class:"d-flex action-buttons"},co={key:0,class:"text-center py-8"},vo={key:1,class:"registered-books-section"},mo={class:"registered-books-grid"},po=["onClick"],fo=["src","alt"],go={key:1,class:"book-thumbnail-placeholder"},yo={class:"book-meta"},_o={class:"book-title"},bo={key:0,class:"book-author"},ho={key:1,class:"book-publisher"},ko={class:"book-count"},wo={class:"book-copies-list"},Co=["onClick"],Do={class:"copy-content"},Bo={class:"copy-row-top"},xo={class:"copy-status"},Vo={key:4,class:"copy-user-info"},No=["onClick"],Eo={class:"copy-info-row"},Ro={class:"copy-label-number"},Lo={class:"copy-location"},$o={class:"copy-actions"},Io={key:0,class:"pagination-section"},qo={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},So={key:0},Ao={key:1},Uo={class:"drawer-content"},Oo={class:"rent-dialog-content"},zo={class:"mb-4 text-body-2 text-medium-emphasis"},Po={class:"rent-dialog-actions"},To={class:"rent-dialog-content"},Fo={class:"mb-4 text-body-2 text-medium-emphasis"},Mo={class:"return-book-list"},Go={class:"return-book-info"},Wo=["src","alt"],Ho={key:1,class:"return-book-thumbnail no-image-placeholder"},Qo={class:"return-book-meta"},jo={class:"return-book-title"},Xo={class:"return-book-details"},Jo={class:"detail-item"},Ko={class:"detail-item"},Yo={key:0,class:"return-book-renter"},Zo={class:"rent-dialog-actions"},es={key:0,class:"book-info-preview mb-4"},ts={class:"book-info-preview-inner"},os=["src","alt"],ss={key:1,class:"book-thumbnail-placeholder"},ls={class:"book-meta"},as={class:"book-title"},ns={class:"book-current-label"},rs={class:"book-current-location"},is={class:"label-number-inputs mb-3"},qe=10,fe=5,us={__name:"index",setup(ds){const{user:Se}=Jt(),{getBooksByCenter:Ke,rentBook:Ae,deleteBook:Ye,updateBookInfo:Ze,checkLabelNumberExists:et,getCategories:tt,calculateBookStatus:A}=Qt(),{confirm:Ue,alert:x}=zt(),{$firebaseFirestore:ot}=Pt(),U=ot,ne=Tt("navigationDrawer",()=>!1),Oe=v(280),ge=[...Gt],C=v(""),st=v(""),Q=v([]),ye=v(!1),z=v(""),S=v("label"),ee=v(""),re=v("asc"),lt=[{title:"오름차순",value:"asc"},{title:"내림차순",value:"desc"}],at=[{title:"라벨번호순",value:"label"},{title:"대여중도서",value:"rented"},{title:"연체중도서",value:"overdue"},{title:"대여신청도서",value:"requested"},{title:"위치별로 보기",value:"location"}],ce=t=>{if(!t)return 9999;const e=t.split("_");if(e.length<2)return 9999;const l=e[1];return parseInt(l.slice(-4))||9999},y=v([]),ve=v(!1),j=v(!1),ie=v(1),_e=v({}),be=v({}),te=v(!1),G=v([]),he=v(!1),P=v(""),T=v(""),O=v(""),oe=v(!1),F=v([]),ke=v(!1),ue=v(!1),V=v(null),we=v(!1),Ce=v([]),De=v(!1),X=v(""),g=v({category:"",fourDigits:"",location:""}),nt=L(()=>Je()),rt=L(()=>[{title:"전체",value:""},...Je()]),it=L(()=>jt[C.value]||"1");L(()=>!g.value.category||!g.value.fourDigits?"":$e(g.value.category,C.value,g.value.fourDigits));const ze=L(()=>g.value.category&&g.value.fourDigits&&g.value.fourDigits.length===4&&/^\d{4}$/.test(g.value.fourDigits)&&g.value.location&&!X.value);Qe(()=>{const t=()=>{Oe.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),Ft(()=>{window.removeEventListener("resize",t)})});const ut=async()=>{if(!Se.value||!U)return"";try{const{doc:t,getDoc:e}=await de(async()=>{const{doc:i,getDoc:f}=await import("./820eoStb.js").then(p=>p.aE);return{doc:i,getDoc:f}},__vite__mapDeps([0,1]),import.meta.url),l=t(U,"users",Se.value.uid),n=await e(l);if(n.exists())return n.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Qe(async()=>{const t=await ut();st.value=t,C.value=t?Mt(t):ge[0],await J()});const dt=async()=>{y.value=[],await J()},J=async()=>{try{ye.value=!0;const t=await Ke(C.value);Q.value=t,await ct(t)}catch(t){console.error("등록된 도서 로드 오류:",t),Q.value=[]}finally{ye.value=!1}},ct=async t=>{if(!U)return;const{doc:e,getDoc:l}=await de(async()=>{const{doc:p,getDoc:h}=await import("./820eoStb.js").then(D=>D.aE);return{doc:p,getDoc:h}},__vite__mapDeps([0,1]),import.meta.url),n=[...new Set(t.filter(p=>p.rentedBy).map(p=>p.rentedBy))],i=[...new Set(t.filter(p=>p.requestedBy).map(p=>p.requestedBy))],f=[...new Set([...n,...i])];for(const p of f)if(!(_e.value[p]&&be.value[p]))try{const h=e(U,"users",p),D=await l(h);if(D.exists()){const N=D.data(),$=(N.email||"").split("@")[0]||"",E=N.name||"",k=`${N.workplace||""} ${E}(${$})`;_e.value[p]=k,be.value[p]=k}}catch(h){console.error("대여자/신청자 정보 로드 오류:",h)}},me=t=>t.rentedBy&&_e.value[t.rentedBy]||"",Be=t=>t.requestedBy&&be.value[t.requestedBy]||"",vt=()=>{},Pe=L(()=>{const t=new Map;for(const e of Q.value){const l=e.isbn13||e.isbn||e.id;t.has(l)||t.set(l,{isbn:l,title:e.title,author:e.author,publisher:e.publisher,image:e.image,copies:[],totalCount:0,availableCount:0,rentedCount:0,requestedCount:0,locations:[]});const n=t.get(l);n.copies.push(e),n.totalCount++;const i=A(e);i?i==="rented"||i==="overdue"?n.rentedCount++:i==="requested"&&n.requestedCount++:n.availableCount++,e.location&&!n.locations.includes(e.location)&&n.locations.push(e.location)}for(const e of t.values())e.copies.sort((l,n)=>{const i=l.labelNumber||"",f=n.labelNumber||"";return i.localeCompare(f,"ko")});return Array.from(t.values())}),se=L(()=>{let t=[...Pe.value];if(z.value.trim()){const e=z.value.toLowerCase();t=t.filter(l=>{const n=(l.title||"").toLowerCase(),i=(l.author||"").toLowerCase(),f=(l.publisher||"").toLowerCase();return n.includes(e)||i.includes(e)||f.includes(e)?!0:l.copies.some(p=>(p.labelNumber||"").toLowerCase().includes(e))})}return S.value==="label"?t.sort((e,l)=>{const n=ce(e.copies[0]?.labelNumber),i=ce(l.copies[0]?.labelNumber);return re.value==="asc"?n-i:i-n}):S.value==="rented"?t=t.filter(e=>e.rentedCount>0):S.value==="overdue"?t=t.filter(e=>e.copies.some(l=>A(l)==="overdue")):S.value==="requested"?t=t.filter(e=>e.requestedCount>0):S.value==="location"&&(ee.value&&(t=t.filter(e=>e.copies.some(l=>l.location===ee.value))),t.sort((e,l)=>{const n=ce(e.copies[0]?.labelNumber),i=ce(l.copies[0]?.labelNumber);return re.value==="asc"?n-i:i-n})),t}),mt=L(()=>{const t=(ie.value-1)*qe,e=t+qe;return se.value.slice(t,e)}),Te=L(()=>Math.ceil(se.value.length/qe));je([()=>z.value,()=>S.value,()=>ee.value],()=>{ie.value=1});const pt=L(()=>Q.value.length),ft=L(()=>Pe.value.length),gt=L(()=>Q.value.filter(t=>A(t)==="rented").length),yt=L(()=>Q.value.filter(t=>A(t)==="overdue").length),_t=L(()=>Q.value.filter(t=>A(t)==="requested").length),le=t=>A(t),K=t=>y.value.some(e=>e.id===t.id),Fe=t=>t.copies.every(e=>K(e)),bt=t=>{const e=t.copies.filter(l=>K(l)).length;return e>0&&e<t.copies.length},ht=(t,e)=>{e?K(t)||y.value.push(t):y.value=y.value.filter(l=>l.id!==t.id),xe()},kt=(t,e)=>{if(e)for(const l of t.copies)K(l)||y.value.push(l);else{const l=t.copies.map(n=>n.id);y.value=y.value.filter(n=>!l.includes(n.id))}xe()},wt=t=>{const e=Fe(t);kt(t,!e)},Ct=t=>{ht(t,!K(t))},Dt=t=>{t?y.value=se.value.flatMap(e=>e.copies):y.value=[]},xe=()=>{const t=se.value.flatMap(e=>e.copies);ve.value=t.length>0&&t.every(e=>K(e))};je(()=>se.value,()=>{xe()});const Bt=async()=>{try{De.value=!0;const t=await tt(C.value);Ce.value=t}catch(t){console.error("카테고리 로드 오류:",t),Ce.value=[]}finally{De.value=!1}},xt=t=>{const e=t.target.value.replace(/\D/g,"").slice(0,4);g.value.fourDigits=e,X.value=""},Vt=async()=>{if(!g.value.category||!g.value.fourDigits||g.value.fourDigits.length!==4)return;const t=$e(g.value.category,C.value,g.value.fourDigits);if(V.value&&t===V.value.labelNumber){X.value="";return}try{await et(t,C.value)?X.value="이미 사용중인 라벨번호입니다.":X.value=""}catch(e){console.error("라벨번호 중복 체크 오류:",e)}},Nt=async t=>{V.value=t;const e=Xt(t.labelNumber);g.value={category:t.category||e?.category||"",fourDigits:e?.fourDigits||"",location:t.location||"구매칸"},X.value="",await Bt(),ue.value=!0},Me=()=>{ue.value=!1,V.value=null},Et=async()=>{if(!(!V.value||!ze.value))try{we.value=!0;const t=$e(g.value.category,C.value,g.value.fourDigits);await Ze(V.value.labelNumber||V.value.id.split("_")[0],C.value,{category:g.value.category,labelNumber:t,location:g.value.location}),Me(),await J(),await x("도서 정보가 수정되었습니다.",{type:"success"})}catch(t){console.error("도서 정보 수정 오류:",t),await x(t.message||"도서 정보 수정에 실패했습니다.",{type:"error"})}finally{we.value=!1}},Rt=async()=>{if(y.value.length===0)return;const t=[],e=[];for(const n of y.value){const i=A(n);i==="rented"||i==="overdue"?e.push({book:n,reason:"대여중"}):i==="requested"?e.push({book:n,reason:"대여신청중"}):t.push(n)}if(t.length===0){const n=e.map(i=>`• ${i.book.title} (${i.reason})`).join(`
`);await x(`선택한 도서를 삭제할 수 없습니다.

${n}

대여중/대여신청중인 도서는 반납 또는 신청 취소 후 삭제해주세요.`,{type:"warning"});return}let l=`선택한 ${y.value.length}권 중 ${t.length}권의 도서를 삭제하시겠습니까?`;if(e.length>0){const n=e.map(i=>`• ${i.book.title} (${i.reason})`).join(`
`);l+=`

⚠️ 다음 도서는 삭제할 수 없습니다:
${n}`}if(await Ue(l))try{j.value=!0;const n=t.map(i=>{const f=i.labelNumber||i.id.split("_")[0];return Ye(f,C.value)});await Promise.all(n),y.value=[],await J(),e.length>0?await x(`${t.length}권의 도서가 삭제되었습니다.
(${e.length}권은 대여중/대여신청중으로 삭제되지 않았습니다.)`,{type:"success"}):await x(`${t.length}권의 도서가 삭제되었습니다.`,{type:"success"})}catch(n){console.error("도서 삭제 오류:",n),await x("도서 삭제에 실패했습니다.",{type:"error"})}finally{j.value=!1}},Lt=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const l=A(e);return l!=="rented"&&l!=="overdue"});if(t.length===0){await x("선택한 도서가 모두 대여중입니다.",{type:"warning"});return}G.value=t,P.value=C.value,T.value="",O.value="",te.value=!0},Ge=async t=>{if(!U||!t)return 0;try{const{collection:e,query:l,where:n,getDocs:i}=await de(async()=>{const{collection:N,query:m,where:$,getDocs:E}=await import("./820eoStb.js").then(R=>R.aE);return{collection:N,query:m,where:$,getDocs:E}},__vite__mapDeps([0,1]),import.meta.url),f=e(U,"books"),p=l(f,n("rentedBy","==",t)),h=await i(p);let D=0;return h.forEach(N=>{const m=N.data();(m.status==="rented"||m.status==="overdue")&&D++}),D}catch(e){return console.error("대여 권수 조회 오류:",e),0}},$t=async t=>{if(A(t)==="requested"&&t.requestedBy){if(await Ge(t.requestedBy)>=fe){await x(`신청자가 이미 ${fe}권을 대여중입니다.
반납 후 대여 처리해주세요.`,{type:"warning"});return}if(!await Ue(`신청자 정보로 대여 처리하시겠습니까?

도서: ${t.title}
라벨번호: ${t.labelNumber||"-"}
신청자: ${Be(t)}`))return;try{j.value=!0;const n=t.labelNumber||t.id.split("_")[0];await Ae(n,C.value,t.requestedBy,t.isbn),await J(),await x("대여 처리가 완료되었습니다.",{type:"success"})}catch(n){console.error("대여 처리 오류:",n),await x(n.message||"대여 처리에 실패했습니다.",{type:"error"})}finally{j.value=!1}return}G.value=[t],P.value=C.value,T.value="",O.value="",te.value=!0},We=()=>{te.value=!1,G.value=[],P.value="",T.value="",O.value=""},It=async()=>{if(!(!P.value||!T.value))try{he.value=!0,O.value="";const{collection:t,query:e,where:l,getDocs:n}=await de(async()=>{const{collection:k,query:I,where:W,getDocs:Y}=await import("./820eoStb.js").then(Z=>Z.aE);return{collection:k,query:I,where:W,getDocs:Y}},__vite__mapDeps([0,1]),import.meta.url),i=t(U,"users"),f=e(i,l("email","==",T.value)),p=await n(f);if(p.empty){O.value="해당 이메일의 사용자를 찾을 수 없습니다.";return}const h=p.docs[0].data();if(h.center!==P.value){O.value=`해당 사용자는 ${h.center} 소속입니다.`;return}const N=p.docs[0].id,m=await Ge(N),$=G.value.length,E=fe-m;if(E<=0){O.value=`해당 사용자가 이미 ${fe}권을 대여중입니다.`;return}if($>E){O.value=`해당 사용자는 ${E}권까지만 추가 대여 가능합니다. (현재 ${m}권 대여중)`;return}for(const k of G.value){const I=k.labelNumber||k.id.split("_")[0];await Ae(I,C.value,N,k.isbn)}const R=G.value.length;await J(),y.value=y.value.filter(k=>!G.value.some(I=>I.id===k.id)),We(),await x(`${R}권의 도서가 대여 처리되었습니다.`,{type:"success"})}catch(t){console.error("도서 대여 오류:",t),O.value=t.message||"대여 처리에 실패했습니다."}finally{he.value=!1}},qt=async()=>{if(y.value.length===0)return;const t=y.value.filter(e=>{const l=A(e);return l==="rented"||l==="overdue"});if(t.length===0){await x("선택한 도서 중 대여중인 도서가 없습니다.",{type:"warning"});return}F.value=t,oe.value=!0},He=()=>{oe.value=!1,F.value=[]},St=async()=>{if(F.value.length!==0)try{ke.value=!0;const{doc:t,updateDoc:e,collection:l,addDoc:n,query:i,where:f,getDocs:p,serverTimestamp:h,deleteField:D}=await de(async()=>{const{doc:m,updateDoc:$,collection:E,addDoc:R,query:k,where:I,getDocs:W,serverTimestamp:Y,deleteField:Z}=await import("./820eoStb.js").then(ae=>ae.aE);return{doc:m,updateDoc:$,collection:E,addDoc:R,query:k,where:I,getDocs:W,serverTimestamp:Y,deleteField:Z}},__vite__mapDeps([0,1]),import.meta.url);for(const m of F.value){const $=m.labelNumber||m.id.split("_")[0],E=m.id,R=m.rentedBy,k=m.rentedAt,I=t(U,"books",E);if(await e(I,{status:"available",rentedBy:D(),rentedAt:D(),expectedReturnDate:D()}),R){const W=l(U,"rentalHistory"),Y=m.isbn13||m.isbn||"",Z=i(W,f("userId","==",R),f("isbn13","==",Y)),ae=await p(Z);if(ae.empty)await n(W,{bookId:E,labelNumber:$,isbn13:m.isbn13||"",isbn:m.isbn||"",title:m.title||"",author:m.author||"",publisher:m.publisher||"",cover:m.cover||m.image||"",center:m.center||"",userId:R,rentedAt:k,returnedAt:h(),rentCount:1});else{const pe=ae.docs[0],Ve=pe.data();await e(t(U,"rentalHistory",pe.id),{rentedAt:k,returnedAt:h(),rentCount:(Ve.rentCount||1)+1})}}}const N=F.value.length;y.value=y.value.filter(m=>!F.value.some($=>$.id===m.id)),He(),await J(),await x(`${N}권의 도서가 반납 처리되었습니다.`,{type:"success"})}catch(t){console.error("도서 반납 오류:",t),await x("도서 반납에 실패했습니다.",{type:"error"})}finally{ke.value=!1}},At=async t=>{const e=A(t);if(e!=="rented"&&e!=="overdue"){await x("대여중인 도서가 아닙니다.",{type:"warning"});return}F.value=[t],oe.value=!0};return Kt({title:"도서 관리 - CNX Library",meta:[{name:"description",content:"도서 검색 및 등록 관리"}]}),(t,e)=>{const l=B("v-select"),n=B("v-text-field"),i=B("v-checkbox"),f=B("v-btn"),p=B("v-progress-circular"),h=B("v-chip"),D=B("v-icon"),N=B("v-pagination"),m=Wt,$=Ht,E=B("v-navigation-drawer"),R=B("v-spacer"),k=B("v-card"),I=B("v-dialog"),W=B("v-alert"),Y=B("v-card-title"),Z=B("v-autocomplete"),ae=B("v-card-text"),pe=B("v-card-actions"),Ve=B("v-app");return c(),M(Ve,null,{default:d(()=>[r(m,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[7]||(e[7]=a=>ne.value=!o(ne))},{default:d(()=>[s("div",Yt,[s("div",Zt,[s("div",eo,[s("h1",to,_(o(C))+" 도서 관리 ",1),r(l,{modelValue:o(C),"onUpdate:modelValue":[e[0]||(e[0]=a=>q(C)?C.value=a:null),dt],items:ge,variant:"outlined",density:"comfortable","hide-details":"",class:"center-select"},null,8,["modelValue"])])]),s("div",oo,[s("div",so,[s("div",lo,[s("div",ao,[e[17]||(e[17]=u(" 총 ",-1)),s("strong",null,_(o(pt)),1),u("권 ("+_(o(ft))+"종) ",1)]),s("div",no,[e[18]||(e[18]=u(" 대여중 ",-1)),s("strong",null,_(o(gt)),1),e[19]||(e[19]=u("권, 연체중 ",-1)),s("strong",null,_(o(yt)),1),e[20]||(e[20]=u("권, 대여신청 ",-1)),s("strong",null,_(o(_t)),1),e[21]||(e[21]=u("권 ",-1))])]),s("div",ro,[r(n,{modelValue:o(z),"onUpdate:modelValue":[e[1]||(e[1]=a=>q(z)?z.value=a:null),vt],label:"도서/라벨번호 검색","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"registered-search-input"},null,8,["modelValue"]),r(l,{modelValue:o(S),"onUpdate:modelValue":e[2]||(e[2]=a=>q(S)?S.value=a:null),items:at,label:"정렬",variant:"outlined",density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),s("div",io,[r(i,{modelValue:o(ve),"onUpdate:modelValue":[e[3]||(e[3]=a=>q(ve)?ve.value=a:null),Dt],label:"전체선택","hide-details":"",class:"select-all-checkbox"},null,8,["modelValue"]),s("div",uo,[o(S)==="label"||o(S)==="location"?(c(),M(l,{key:0,modelValue:o(re),"onUpdate:modelValue":e[4]||(e[4]=a=>q(re)?re.value=a:null),items:lt,label:"정렬",variant:"outlined",density:"compact","hide-details":"",class:"sort-order-select"},null,8,["modelValue"])):H("",!0),o(S)==="location"?(c(),M(l,{key:1,modelValue:o(ee),"onUpdate:modelValue":e[5]||(e[5]=a=>q(ee)?ee.value=a:null),items:o(rt),label:"위치",variant:"outlined",density:"compact","hide-details":"",class:"location-filter-select"},null,8,["modelValue","items"])):H("",!0),r(f,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(j),onClick:Rt},{default:d(()=>[...e[22]||(e[22]=[u(" 도서 삭제 ",-1)])]),_:1},8,["disabled","loading"]),r(f,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(j),onClick:Lt},{default:d(()=>[...e[23]||(e[23]=[u(" 대여 처리 ",-1)])]),_:1},8,["disabled","loading"]),r(f,{class:"action-btn",variant:"flat",size:"small",disabled:o(y).length===0,loading:o(j),onClick:qt},{default:d(()=>[...e[24]||(e[24]=[u(" 반납 처리 ",-1)])]),_:1},8,["disabled","loading"])])])]),o(ye)?(c(),b("div",co,[r(p,{indeterminate:"",color:"primary"})])):o(se).length>0?(c(),b("div",vo,[s("div",mo,[(c(!0),b(Ee,null,Re(o(mt),(a,Ut)=>(c(),b("div",{key:`group-${Ut}`,class:Xe(["book-card",{"book-card-selected":Fe(a)||bt(a)}])},[s("div",{class:"book-card-header",onClick:w=>wt(a)},[a.image?(c(),b("img",{key:0,src:a.image,alt:a.title,class:"book-thumbnail"},null,8,fo)):(c(),b("div",go,[...e[25]||(e[25]=[s("span",null,"NO IMAGE",-1)])])),s("div",yo,[s("div",_o,_(a.title),1),a.author?(c(),b("div",bo,[e[26]||(e[26]=s("strong",null,"저자:",-1)),u(" "+_(a.author),1)])):H("",!0),a.publisher?(c(),b("div",ho,[e[27]||(e[27]=s("strong",null,"출판사:",-1)),u(" "+_(a.publisher),1)])):H("",!0),s("div",ko," 등록 "+_(a.totalCount)+"권 ",1)])],8,po),s("div",wo,[(c(!0),b(Ee,null,Re(a.copies,w=>(c(),b("div",{key:w.id,class:Xe(["book-copy-item",{selected:K(w)}]),onClick:Ne=>Ct(w)},[s("div",Do,[s("div",Bo,[s("div",xo,[le(w)==="rented"?(c(),M(h,{key:0,size:"x-small",color:"primary",variant:"flat"},{default:d(()=>[...e[28]||(e[28]=[u(" 대여중 ",-1)])]),_:1})):le(w)==="overdue"?(c(),M(h,{key:1,size:"x-small",color:"error",variant:"flat"},{default:d(()=>[...e[29]||(e[29]=[u(" 연체중 ",-1)])]),_:1})):le(w)==="requested"?(c(),M(h,{key:2,size:"x-small",color:"warning",variant:"flat"},{default:d(()=>[...e[30]||(e[30]=[u(" 대여신청 ",-1)])]),_:1})):(c(),M(h,{key:3,size:"x-small",color:"success",variant:"outlined"},{default:d(()=>[...e[31]||(e[31]=[u(" 대여가능 ",-1)])]),_:1})),me(w)||Be(w)?(c(),b("span",Vo,_(me(w)||Be(w)),1)):H("",!0)]),s("a",{href:"#",class:"copy-edit-link",onClick:Le(Ne=>Nt(w),["prevent","stop"])}," 정보수정 ",8,No)]),s("div",Eo,[s("span",Ro,_(w.labelNumber||"라벨없음"),1),e[33]||(e[33]=s("span",{class:"copy-divider"},"|",-1)),s("span",Lo,[r(D,{size:"small",class:"mr-1"},{default:d(()=>[...e[32]||(e[32]=[u(" mdi-map-marker ",-1)])]),_:1}),u(" "+_(o(Ie)(w.location)||"위치없음"),1)])]),s("div",$o,[le(w)==="rented"||le(w)==="overdue"?(c(),M(f,{key:0,color:"primary",size:"small",variant:"flat",onClick:Le(Ne=>At(w),["stop"])},{default:d(()=>[...e[34]||(e[34]=[u(" 반납처리 ",-1)])]),_:1},8,["onClick"])):(c(),M(f,{key:1,color:"primary",size:"small",variant:"flat",onClick:Le(Ne=>$t(w),["stop"])},{default:d(()=>[u(_(le(w)==="requested"?"대여승인":"대여처리"),1)]),_:2},1032,["onClick"]))])])],10,Co))),128))])],2))),128))]),o(Te)>1?(c(),b("div",Io,[r(N,{modelValue:o(ie),"onUpdate:modelValue":e[6]||(e[6]=a=>q(ie)?ie.value=a:null),length:o(Te),"total-visible":5,density:"compact",size:"small",class:"pagination"},null,8,["modelValue","length"])])):H("",!0)])):(c(),b("div",qo,[r(D,{size:"48",color:"grey-lighten-1",class:"mb-4"},{default:d(()=>[u(_(o(z)?"mdi-book-search-outline":"mdi-book-off-outline"),1)]),_:1}),o(z)?(c(),b("p",So,[e[35]||(e[35]=u(" '",-1)),s("strong",null,_(o(z)),1),e[36]||(e[36]=u("'에 대한 검색 결과가 없습니다. ",-1))])):(c(),b("p",Ao," 등록된 도서가 없습니다. "))]))])])]),_:1}),r(E,{modelValue:o(ne),"onUpdate:modelValue":e[8]||(e[8]=a=>q(ne)?ne.value=a:null),location:"right",temporary:"",width:o(Oe),class:"side-navigation"},{default:d(()=>[s("div",Uo,[r($)])]),_:1},8,["modelValue","width"]),r(I,{modelValue:o(te),"onUpdate:modelValue":e[11]||(e[11]=a=>q(te)?te.value=a:null),"max-width":"400",persistent:""},{default:d(()=>[r(k,{class:"rent-dialog-card"},{default:d(()=>[e[39]||(e[39]=s("div",{class:"rent-dialog-title text-h6"}," 대여자 정보 입력 ",-1)),s("div",Oo,[s("div",zo," 대여 처리할 도서: "+_(o(G).length)+"권 ",1),r(l,{modelValue:o(P),"onUpdate:modelValue":e[9]||(e[9]=a=>q(P)?P.value=a:null),items:ge,label:"센터",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),r(n,{modelValue:o(T),"onUpdate:modelValue":e[10]||(e[10]=a=>q(T)?T.value=a:null),label:"이메일",variant:"outlined",density:"comfortable",placeholder:"example@email.com","error-messages":o(O)},null,8,["modelValue","error-messages"])]),s("div",Po,[r(R),r(f,{variant:"text",onClick:We},{default:d(()=>[...e[37]||(e[37]=[u(" 취소 ",-1)])]),_:1}),r(f,{color:"primary",variant:"flat",loading:o(he),disabled:!o(P)||!o(T),onClick:It},{default:d(()=>[...e[38]||(e[38]=[u(" 대여 처리 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1},8,["modelValue"]),r(I,{modelValue:o(oe),"onUpdate:modelValue":e[12]||(e[12]=a=>q(oe)?oe.value=a:null),"max-width":"450",persistent:""},{default:d(()=>[r(k,{class:"rent-dialog-card"},{default:d(()=>[e[45]||(e[45]=s("div",{class:"rent-dialog-title text-h6"}," 반납 확인 ",-1)),s("div",To,[s("div",Fo," 반납 처리할 도서: "+_(o(F).length)+"권 ",1),s("div",Mo,[(c(!0),b(Ee,null,Re(o(F),a=>(c(),b("div",{key:a.id,class:"return-book-item"},[s("div",Go,[a.image?(c(),b("img",{key:0,src:a.image,alt:a.title,class:"return-book-thumbnail"},null,8,Wo)):(c(),b("div",Ho," NO IMAGE ")),s("div",Qo,[s("div",jo,_(a.title),1),s("div",Xo,[s("span",Jo,[r(D,{size:"x-small",class:"mr-1"},{default:d(()=>[...e[40]||(e[40]=[u("mdi-label",-1)])]),_:1}),u(" "+_(a.labelNumber||"라벨없음"),1)]),s("span",Ko,[r(D,{size:"x-small",class:"mr-1"},{default:d(()=>[...e[41]||(e[41]=[u("mdi-map-marker",-1)])]),_:1}),u(" "+_(o(Ie)(a.location)||"위치없음"),1)])]),me(a)?(c(),b("div",Yo," 대여자: "+_(me(a)),1)):H("",!0)])])]))),128))]),r(W,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:d(()=>[...e[42]||(e[42]=[u(" 위치와 라벨번호를 확인 후 해당 위치에 도서를 반납해주세요. ",-1)])]),_:1})]),s("div",Zo,[r(R),r(f,{variant:"text",onClick:He},{default:d(()=>[...e[43]||(e[43]=[u(" 취소 ",-1)])]),_:1}),r(f,{color:"primary",variant:"flat",loading:o(ke),onClick:St},{default:d(()=>[...e[44]||(e[44]=[u(" 반납 처리 ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),r(I,{modelValue:o(ue),"onUpdate:modelValue":e[16]||(e[16]=a=>q(ue)?ue.value=a:null),"max-width":"500",persistent:""},{default:d(()=>[r(k,{class:"edit-dialog-card"},{default:d(()=>[r(Y,{class:"edit-dialog-title"},{default:d(()=>[...e[46]||(e[46]=[u(" 도서 정보 수정 ",-1)])]),_:1}),r(ae,{class:"edit-dialog-content"},{default:d(()=>[o(V)?(c(),b("div",es,[s("div",ts,[o(V).image?(c(),b("img",{key:0,src:o(V).image,alt:o(V).title,class:"book-thumbnail"},null,8,os)):(c(),b("div",ss,[...e[47]||(e[47]=[s("span",null,"No Image",-1)])])),s("div",ls,[s("div",as,_(o(V).title),1),s("div",ns,_(o(V).labelNumber||"라벨없음"),1),s("div",rs,[r(D,{size:"small",class:"mr-1"},{default:d(()=>[...e[48]||(e[48]=[u(" mdi-map-marker ",-1)])]),_:1}),u(" "+_(o(Ie)(o(V).location)||"위치없음"),1)])])])])):H("",!0),r(Z,{modelValue:o(g).category,"onUpdate:modelValue":e[13]||(e[13]=a=>o(g).category=a),items:o(Ce),label:"카테고리 *",variant:"outlined",density:"comfortable",loading:o(De),class:"mb-3"},null,8,["modelValue","items","loading"]),s("div",is,[r(n,{"model-value":o(it),label:"센터코드",variant:"outlined",density:"comfortable",readonly:"",disabled:"",class:"center-code-input"},null,8,["model-value"]),r(n,{modelValue:o(g).fourDigits,"onUpdate:modelValue":e[14]||(e[14]=a=>o(g).fourDigits=a),label:"4자리 번호 *",variant:"outlined",density:"comfortable",maxlength:"4","error-messages":o(X),hint:"0001~9999","persistent-hint":"",class:"four-digits-input",onInput:xt,onBlur:Vt},null,8,["modelValue","error-messages"])]),r(l,{modelValue:o(g).location,"onUpdate:modelValue":e[15]||(e[15]=a=>o(g).location=a),items:o(nt),label:"위치 *",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),_:1}),r(pe,{class:"edit-dialog-actions"},{default:d(()=>[r(R),r(f,{variant:"text",onClick:Me},{default:d(()=>[...e[49]||(e[49]=[u(" 취소 ",-1)])]),_:1}),r(f,{color:"primary",variant:"flat",loading:o(we),disabled:!o(ze),onClick:Et},{default:d(()=>[...e[50]||(e[50]=[u(" 저장 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},_s=Ot(us,[["__scopeId","data-v-d76539fc"]]);export{_s as default};
