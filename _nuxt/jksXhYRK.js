const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DTWtb0Lw.js","./entry.yfGVSS21.css"])))=>i.map(i=>d[i]);
import{F as Je,N as Ke,a as Xe,r as h,k as X,o as Ve,e as Ye,Y as Ce,_ as P,O,L as _,g as q,H as l,K as i,P as o,I as a,G as v,U as E,Q as W,M as w,R as Y,S as Z,J as V,W as Ze,Z as Ee}from"./DTWtb0Lw.js";import{_ as et}from"./BkijrMp0.js";import{g as Le,C as tt,_ as st}from"./CvqOngY9.js";import{u as ot,_ as nt}from"./CPACJC3Q.js";import{u as at,h as lt,_ as rt}from"./DLpPUGWo.js";import{f as it}from"./CKGa_ErN.js";import{u as ct}from"./jE5KqEc9.js";import{u as ut}from"./DPcaaTY2.js";import"./BoyN6FXy.js";import"./C-xtXPWq.js";const dt={class:"mypage"},mt={class:"multi-rent-book-list"},vt={class:"rent-book-card-inner"},pt=["src","alt"],_t={key:1,class:"rent-book-thumbnail-placeholder"},ft={class:"rent-book-meta"},yt={class:"rent-book-title"},ht={key:0,class:"rent-book-author"},gt={key:1,class:"rent-book-publisher"},wt={class:"rent-book-details"},bt={class:"detail-item"},Dt={class:"detail-item location-item"},kt={class:"location-text"},qt={class:"page-header mb-6"},Rt={class:"page-header-inner"},xt={class:"rental-section mb-8"},At={class:"section-header-with-filter mb-4"},Bt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},Vt={class:"text-body-1"},Ct={key:0,class:"text-body-2 ml-2 text-medium-emphasis"},Et={key:0,class:"d-flex align-center gap-2"},Lt={key:0,class:"text-center py-8"},Pt={key:1,class:"rental-books-grid"},It={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},Tt={key:0,class:"rent-request-section mb-8"},Nt={class:"section-header mb-4"},St={class:"section-title"},$t={key:0,class:"book-count"},Ht={key:0,class:"text-center py-8"},Ot={key:1,class:"rent-requests-grid"},Ft={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},zt={class:"requested-section mb-8"},Mt={class:"section-header-with-filter mb-4"},Ut={class:"section-title"},Wt={key:0,class:"book-count"},jt={key:0,class:"text-center py-8"},Gt={key:1,class:"requested-books-grid"},Qt={key:0,class:"pagination-section"},Jt={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},Kt={class:"history-section"},Xt={class:"d-flex align-center justify-space-between flex-wrap gap-4 mb-4"},Yt={class:"text-body-1"},Zt={key:0,class:"text-body-2 ml-2 text-medium-emphasis"},es={key:0,class:"text-center py-8"},ts={key:1,class:"history-books-grid"},ss={key:2,class:"text-center py-8 text-medium-emphasis empty-state"},os={key:0,class:"sticky-return-bar"},ns={class:"sticky-return-info"},as={class:"selected-count"},ls={key:0,class:"sticky-delete-bar"},rs={class:"sticky-delete-info"},is={class:"selected-count"},cs={class:"drawer-content"},ye=10,us={__name:"index",setup(ds){const{user:D}=ct();at();const{confirm:ne,alert:I}=Ke(),{$firebaseFirestore:Pe}=Xe(),b=Pe,{drawer:j,drawerWidth:he}=ot(),F=h(!1),T=h([]),ae=h(!1),le=[...tt],L=h(""),ee=h(!1),ge=h(""),we=h(""),Ie=t=>t.center||"",Te=t=>{ge.value=L.value||t.center||"",we.value=t.location||"",ee.value=!0},te=h([]),re=h(!1),z=h([]),ie=h(!1),ce=h(null),N=h([]),ue=h(!1),de=h(null),me=h(""),Ne=X(()=>me.value?Le(me.value)!==L.value:!1),S=h(""),G=X(()=>S.value?z.value.filter(t=>t.center===S.value):z.value),Q=h(1),be=X(()=>Math.ceil(G.value.length/ye)),Se=X(()=>{const t=(Q.value-1)*ye,e=t+ye;return G.value.slice(t,e)}),se=X(()=>L.value?te.value.filter(t=>t.center===L.value):te.value),M=h([]),ve=h(!1),R=h([]),x=h([]),oe=h(!1),De=h(!1);Ve(()=>{const t=()=>{he.value=window.innerWidth>=769?360:280};t(),window.addEventListener("resize",t),Ye(()=>{window.removeEventListener("resize",t)})}),Ce(L,()=>{R.value=[]}),Ce(S,()=>{Q.value=1});const $e=async()=>{if(!D.value||!b)return"";try{const{doc:t,getDoc:e}=await P(async()=>{const{doc:g,getDoc:y}=await import("./DTWtb0Lw.js").then(k=>k.b2);return{doc:g,getDoc:y}},__vite__mapDeps([0,1]),import.meta.url),u=t(b,"users",D.value.uid),d=await e(u);if(d.exists())return d.data().workplace||""}catch(t){console.error("사용자 근무지 정보 가져오기 오류:",t)}return""};Ve(async()=>{const t=await $e();me.value=t;const e=t?Le(t):le[0];L.value=e,S.value=e,await Promise.all([ke(),He(),Fe(),pe()])});const He=async()=>{if(!(!D.value||!b))try{ue.value=!0;const{collection:t,query:e,where:u,getDocs:d}=await P(async()=>{const{collection:r,query:m,where:n,getDocs:p}=await import("./DTWtb0Lw.js").then(f=>f.b2);return{collection:r,query:m,where:n,getDocs:p}},__vite__mapDeps([0,1]),import.meta.url),g=t(b,"books"),y=e(g,u("requestedBy","==",D.value.uid),u("status","==","requested")),k=await d(y),c=[];k.forEach(r=>{c.push({id:r.id,...r.data()})}),c.sort((r,m)=>{const n=r.requestedAt?.toDate?.()||new Date(0);return(m.requestedAt?.toDate?.()||new Date(0))-n}),N.value=c}catch(t){console.error("대여 신청 도서 로드 오류:",t),N.value=[]}finally{ue.value=!1}},Oe=async t=>{if(!(!D.value||!t)&&await ne(`"${t.title}" 대여 신청을 취소하시겠습니까?`))try{de.value=t.id;const{doc:e,updateDoc:u,deleteField:d}=await P(async()=>{const{doc:y,updateDoc:k,deleteField:c}=await import("./DTWtb0Lw.js").then(r=>r.b2);return{doc:y,updateDoc:k,deleteField:c}},__vite__mapDeps([0,1]),import.meta.url),g=e(b,"books",t.id);await u(g,{status:"available",requestedBy:d(),requestedAt:d()}),N.value=N.value.filter(y=>y.id!==t.id),await I("대여 신청이 취소되었습니다.",{type:"success"})}catch(e){console.error("대여 신청 취소 오류:",e),await I(e.message||"대여 신청 취소에 실패했습니다.",{type:"error"})}finally{de.value=null}},Fe=async()=>{if(!(!D.value||!b))try{ie.value=!0;const{collection:t,query:e,where:u,getDocs:d}=await P(async()=>{const{collection:r,query:m,where:n,getDocs:p}=await import("./DTWtb0Lw.js").then(f=>f.b2);return{collection:r,query:m,where:n,getDocs:p}},__vite__mapDeps([0,1]),import.meta.url),g=t(b,"bookRequests"),y=e(g,u("requestedBy","==",D.value.uid),u("status","==","pending")),k=await d(y),c=[];k.forEach(r=>{c.push({id:r.id,...r.data()})}),c.sort((r,m)=>{const n=r.requestedAt?.toDate?.()||new Date(0);return(m.requestedAt?.toDate?.()||new Date(0))-n}),z.value=c}catch(t){console.error("신청 도서 로드 오류:",t),z.value=[]}finally{ie.value=!1}},ke=async()=>{if(!(!D.value||!b))try{re.value=!0;const{collection:t,query:e,where:u,getDocs:d}=await P(async()=>{const{collection:r,query:m,where:n,getDocs:p}=await import("./DTWtb0Lw.js").then(f=>f.b2);return{collection:r,query:m,where:n,getDocs:p}},__vite__mapDeps([0,1]),import.meta.url),g=t(b,"books"),y=e(g,u("rentedBy","==",D.value.uid)),k=await d(y),c=[];k.forEach(r=>{const m=r.data();m.rentedAt&&c.push({id:r.id,...m})}),c.sort((r,m)=>{const n=r.rentedAt?.toDate?.()||new Date(0);return(m.rentedAt?.toDate?.()||new Date(0))-n}),te.value=c}catch(t){console.error("대여 도서 로드 오류:",t),te.value=[]}finally{re.value=!1}},pe=async()=>{if(!(!D.value||!b))try{ve.value=!0;const{collection:t,query:e,where:u,getDocs:d}=await P(async()=>{const{collection:m,query:n,where:p,getDocs:f}=await import("./DTWtb0Lw.js").then(A=>A.b2);return{collection:m,query:n,where:p,getDocs:f}},__vite__mapDeps([0,1]),import.meta.url),g=t(b,"rentalHistory"),y=e(g,u("userId","==",D.value.uid)),k=await d(y),c=new Map;k.forEach(m=>{const n=m.data(),p=n.isbn13||n.isbn||"";if(!p){const f=n.bookId;c.has(f)||c.set(f,{id:m.id,...n});return}if(!c.has(p))c.set(p,{id:m.id,...n});else{const A=c.get(p).returnedAt?.toDate?.()||new Date(0);(n.returnedAt?.toDate?.()||new Date(0))>A&&c.set(p,{id:m.id,...n})}});const r=Array.from(c.values());r.sort((m,n)=>{const p=m.returnedAt?.toDate?.()||new Date(0);return(n.returnedAt?.toDate?.()||new Date(0))-p}),M.value=r}catch(t){console.error("대여 이력 로드 오류:",t),M.value=[]}finally{ve.value=!1}},ze=t=>{if(!t.rentedAt)return null;const e=t.rentedAt?.toDate?.()||new Date(t.rentedAt),u=new Date(e);return u.setDate(u.getDate()+7),u},qe=t=>R.value.some(e=>e.id===t.id),Me=(t,e)=>{e?qe(t)||R.value.push(t):R.value=R.value.filter(u=>u.id!==t.id)},Re=t=>x.value.some(e=>e.id===t.id),Ue=(t,e)=>{e?Re(t)||x.value.push(t):x.value=x.value.filter(u=>u.id!==t.id)},We=async t=>{if(!(!D.value||!t)&&await ne(`"${t.title}" 도서 신청을 취소하시겠습니까?`))try{ce.value=t.id;const{doc:e,deleteDoc:u}=await P(async()=>{const{doc:d,deleteDoc:g}=await import("./DTWtb0Lw.js").then(y=>y.b2);return{doc:d,deleteDoc:g}},__vite__mapDeps([0,1]),import.meta.url);await u(e(b,"bookRequests",t.id)),z.value=z.value.filter(d=>d.id!==t.id),await I("도서 신청이 취소되었습니다.",{type:"success"})}catch(e){console.error("신청 취소 오류:",e),await I(e.message||"신청 취소에 실패했습니다.",{type:"error"})}finally{ce.value=null}},xe=async()=>{if(x.value.length===0||!D.value)return;const t=x.value.map(e=>e.title).join(", ");if(await ne(`다음 도서들을 읽은 책 목록에서 삭제하시겠습니까?

${t}`))try{oe.value=!0;const{doc:e,deleteDoc:u}=await P(async()=>{const{doc:d,deleteDoc:g}=await import("./DTWtb0Lw.js").then(y=>y.b2);return{doc:d,deleteDoc:g}},__vite__mapDeps([0,1]),import.meta.url);for(const d of x.value)await u(e(b,"rentalHistory",d.id));await pe(),await I(`${x.value.length}권이 읽은 책 목록에서 삭제되었습니다.`,{type:"success"}),x.value=[]}catch(e){console.error("이력 삭제 오류:",e),await I("삭제에 실패했습니다.",{type:"error"})}finally{oe.value=!1}},Ae=()=>{R.value.length===0||!D.value||(T.value=[...R.value],F.value=!0)},Be=()=>{F.value=!1,T.value=[]},je=async t=>{if(!(!b||!t))try{const{collection:e,query:u,where:d,getDocs:g,addDoc:y,updateDoc:k,doc:c,serverTimestamp:r}=await P(async()=>{const{collection:B,query:C,where:$,getDocs:H,addDoc:J,updateDoc:K,doc:_e,serverTimestamp:fe}=await import("./DTWtb0Lw.js").then(s=>s.b2);return{collection:B,query:C,where:$,getDocs:H,addDoc:J,updateDoc:K,doc:_e,serverTimestamp:fe}},__vite__mapDeps([0,1]),import.meta.url),m=t.isbn13||t.isbn||"";if(!m)return;const n=e(b,"returnNotifySubscriptions"),p=u(n,d("isbn","==",m),d("center","==",t.center),d("notified","==",!1)),f=await g(p);if(f.empty)return;const A=e(b,"notifications");for(const B of f.docs){const C=B.data();await y(A,{userId:C.userId,type:"book_available",title:"도서 반납 알림",message:`"${t.title}" 도서가 반납되어 대여 가능합니다.`,bookInfo:{isbn:m,title:t.title,center:t.center},isRead:!1,createdAt:r()}),await k(c(b,"returnNotifySubscriptions",B.id),{notified:!0,notifiedAt:r()})}}catch(e){console.error("반납 알림 발송 오류:",e)}},Ge=async()=>{if(!(T.value.length===0||!D.value))try{ae.value=!0;const{doc:t,updateDoc:e,collection:u,addDoc:d,query:g,where:y,getDocs:k,serverTimestamp:c,deleteField:r}=await P(async()=>{const{doc:n,updateDoc:p,collection:f,addDoc:A,query:B,where:C,getDocs:$,serverTimestamp:H,deleteField:J}=await import("./DTWtb0Lw.js").then(K=>K.b2);return{doc:n,updateDoc:p,collection:f,addDoc:A,query:B,where:C,getDocs:$,serverTimestamp:H,deleteField:J}},__vite__mapDeps([0,1]),import.meta.url);for(const n of T.value){const p=t(b,"books",n.id);await e(p,{status:"available",rentedBy:r(),rentedByType:r(),rentedByEmail:r(),rentedAt:r(),expectedReturnDate:r()});const f=u(b,"rentalHistory"),A=n.isbn13||n.isbn||"",B=g(f,y("userId","==",D.value.uid),y("isbn13","==",A)),C=await k(B);if(C.empty)await d(f,{bookId:n.id,labelNumber:n.labelNumber||"",isbn13:n.isbn13||"",isbn:n.isbn||"",title:n.title||"",author:n.author||"",publisher:n.publisher||"",cover:n.cover||n.image||"",center:n.center||"",userId:D.value.uid,rentedAt:n.rentedAt,returnedAt:c(),rentCount:1});else{const $=C.docs[0],H=$.data();await e(t(b,"rentalHistory",$.id),{rentedAt:n.rentedAt,returnedAt:c(),rentCount:(H.rentCount||1)+1})}await je(n)}await Promise.all([ke(),pe()]);const m=T.value.length;R.value=R.value.filter(n=>!T.value.some(p=>p.id===n.id)),Be(),await I(`${m}권의 도서가 반납되었습니다.`,{type:"success"})}catch(t){console.error("반납 처리 오류:",t),await I("반납 처리에 실패했습니다.",{type:"error"})}finally{ae.value=!1}},Qe=t=>{!D.value||!t||(T.value=[t],F.value=!0)};return ut({title:"마이페이지 - CNX Library",meta:[{name:"description",content:"내 대여 목록 및 읽은 책 이력"}]}),(t,e)=>{const u=q("v-card-title"),d=q("v-icon"),g=q("v-alert"),y=q("v-card-text"),k=q("v-spacer"),c=q("v-btn"),r=q("v-card-actions"),m=q("v-card"),n=q("v-dialog"),p=q("v-select"),f=q("v-progress-circular"),A=et,B=q("v-col"),C=q("v-row"),$=q("v-pagination"),H=st,J=nt,K=q("v-navigation-drawer"),_e=rt,fe=q("v-app");return l(),O(fe,null,{default:_(()=>[i(H,{"header-type":"back-home","show-header-actions":!0,onToggleDrawer:e[4]||(e[4]=s=>j.value=!o(j))},{default:_(()=>[a("div",dt,[i(n,{modelValue:o(F),"onUpdate:modelValue":e[0]||(e[0]=s=>W(F)?F.value=s:null),"max-width":"500"},{default:_(()=>[i(m,{class:"rent-confirm-card"},{default:_(()=>[i(u,{class:"rent-confirm-title"},{default:_(()=>[...e[7]||(e[7]=[w(" 반납 확인 ",-1)])]),_:1}),i(y,{class:"rent-confirm-content"},{default:_(()=>[e[15]||(e[15]=a("div",{class:"rent-confirm-info mb-4"},[a("p",null,"아래 도서들을 반납하시겠습니까?")],-1)),a("div",mt,[(l(!0),v(Y,null,Z(o(T),s=>(l(),v("div",{key:s.id,class:"rent-book-card"},[a("div",vt,[s.cover||s.image?(l(),v("img",{key:0,src:s.cover||s.image,alt:s.title,class:"rent-book-thumbnail"},null,8,pt)):(l(),v("div",_t,[...e[8]||(e[8]=[a("span",null,"NO IMAGE",-1)])])),a("div",ft,[a("div",yt,V(s.title),1),s.author?(l(),v("div",ht,[e[9]||(e[9]=a("strong",null,"저자:",-1)),w(" "+V(s.author),1)])):E("",!0),s.publisher?(l(),v("div",gt,[e[10]||(e[10]=a("strong",null,"출판사:",-1)),w(" "+V(s.publisher),1)])):E("",!0),a("div",wt,[a("span",bt,[i(d,{size:"x-small",class:"mr-1"},{default:_(()=>[...e[11]||(e[11]=[w("mdi-label",-1)])]),_:1}),w(" "+V(s.labelNumber||"라벨없음"),1)]),a("span",Dt,[i(d,{size:"x-small",class:"mr-1"},{default:_(()=>[...e[12]||(e[12]=[w("mdi-map-marker",-1)])]),_:1}),a("span",kt,V(o(it)(s.location)||"위치없음"),1),o(lt)(o(L)||Ie(s),s.location)?(l(),O(d,{key:0,size:"x-small",class:"ml-1 location-info-icon",onClick:Ze(U=>Te(s),["stop"])},{default:_(()=>[...e[13]||(e[13]=[w(" mdi-information-outline ",-1)])]),_:1},8,["onClick"])):E("",!0)])])])])]))),128))]),i(g,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:_(()=>[...e[14]||(e[14]=[w(" 위치와 라벨번호를 확인 후 해당 위치에 도서를 반납해주세요. ",-1)])]),_:1})]),_:1}),i(r,{class:"rent-confirm-actions"},{default:_(()=>[i(k),i(c,{variant:"text",onClick:Be},{default:_(()=>[...e[16]||(e[16]=[w(" 취소 ",-1)])]),_:1}),i(c,{color:"primary",variant:"flat",loading:o(ae),onClick:Ge},{default:_(()=>[...e[17]||(e[17]=[w(" 반납하기 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a("div",qt,[a("div",Rt,[e[19]||(e[19]=a("h1",{class:"page-title mb-0"}," 마이페이지 ",-1)),i(c,{class:"edit-profile-btn",variant:"flat",size:"small",to:"/mypage/edit"},{default:_(()=>[...e[18]||(e[18]=[w(" 정보수정 ",-1)])]),_:1})])]),a("div",xt,[a("div",At,[e[20]||(e[20]=a("h2",{class:"section-title"}," 내 대여 목록 ",-1)),i(p,{modelValue:o(L),"onUpdate:modelValue":e[1]||(e[1]=s=>W(L)?L.value=s:null),items:le,variant:"outlined",density:"comfortable","hide-details":"",class:"center-filter-select"},null,8,["modelValue"])]),a("div",Bt,[a("div",Vt,[e[21]||(e[21]=w(" 총 ",-1)),a("strong",null,V(o(se).length),1),e[22]||(e[22]=w("권 대여중 ",-1)),o(R).length>0?(l(),v("span",Ct," ("+V(o(R).length)+"권 선택됨) ",1)):E("",!0)]),o(se).length>0?(l(),v("div",Et,[i(c,{class:"return-btn",variant:"flat",size:"small",disabled:o(R).length===0,loading:o(De),onClick:Ae},{default:_(()=>[...e[23]||(e[23]=[w(" 반납하기 ",-1)])]),_:1},8,["disabled","loading"])])):E("",!0)]),o(re)?(l(),v("div",Lt,[i(f,{indeterminate:"",color:"primary"})])):o(se).length>0?(l(),v("div",Pt,[i(C,{class:"book-list-row"},{default:_(()=>[(l(!0),v(Y,null,Z(o(se),(s,U)=>(l(),O(B,{key:`rented-${U}`,cols:"12",sm:"6",class:"book-list-col"},{default:_(()=>[i(A,{book:s,center:s.center||"","show-action":!1,selectable:!0,selected:qe(s),"show-status-flags":!1,"show-return-date":!0,"return-date":ze(s),"show-label-number":!0,"label-number":s.labelNumber,"show-location":!0,location:s.location,"location-popup-mode":"info",onSelect:Me,onReturn:Qe},null,8,["book","center","selected","return-date","label-number","location"])]),_:2},1024))),128))]),_:1})])):(l(),v("div",It," 현재 대여중인 도서가 없습니다. "))]),o(Ne)?(l(),v("div",Tt,[a("div",Nt,[a("h2",St,[e[24]||(e[24]=w(" 대여 신청 목록 ",-1)),o(N).length>0?(l(),v("span",$t," ("+V(o(N).length)+"권) ",1)):E("",!0)])]),o(ue)?(l(),v("div",Ht,[i(f,{indeterminate:"",color:"primary"})])):o(N).length>0?(l(),v("div",Ot,[i(C,{class:"book-list-row"},{default:_(()=>[(l(!0),v(Y,null,Z(o(N),(s,U)=>(l(),O(B,{key:`rent-request-${U}`,cols:"12",sm:"6",class:"book-list-col"},{default:_(()=>[i(A,{book:s,center:s.center||"","show-action":!1,selectable:!1,"show-ripple":!1,"show-status-flags":!1,"show-label-number":!0,"label-number":s.labelNumber,"show-location":!0,location:s.location,"show-rent-request-info":!0,"rent-request-date":s.requestedAt,"cancel-rent-request-loading":o(de)===s.id,class:"rent-request-book-card",onCancelRentRequest:Oe},null,8,["book","center","label-number","location","rent-request-date","cancel-rent-request-loading"])]),_:2},1024))),128))]),_:1})])):(l(),v("div",Ft," 대여 신청한 도서가 없습니다. "))])):E("",!0),a("div",zt,[a("div",Mt,[a("h2",Ut,[e[25]||(e[25]=w(" 내가 신청한 책 ",-1)),o(G).length>0?(l(),v("span",Wt," ("+V(o(G).length)+"권) ",1)):E("",!0)]),i(p,{modelValue:o(S),"onUpdate:modelValue":e[2]||(e[2]=s=>W(S)?S.value=s:null),items:le,variant:"outlined",density:"comfortable","hide-details":"",class:"center-filter-select"},null,8,["modelValue"])]),o(ie)?(l(),v("div",jt,[i(f,{indeterminate:"",color:"primary"})])):o(G).length>0?(l(),v("div",Gt,[i(C,{class:"book-list-row"},{default:_(()=>[(l(!0),v(Y,null,Z(o(Se),(s,U)=>(l(),O(B,{key:`requested-${U}`,cols:"12",sm:"6",class:"book-list-col"},{default:_(()=>[i(A,{book:s,center:s.center||"","show-action":!1,selectable:!1,"show-ripple":!1,"show-status-flags":!1,"show-label-number":!!s.labelNumber,"label-number":s.labelNumber,"show-location":!!s.location,location:s.location,"show-requested-info":!0,"requested-date":s.requestedAt,"cancel-loading":o(ce)===s.id,class:"requested-book-card",onCancelRequest:We},null,8,["book","center","show-label-number","label-number","show-location","location","requested-date","cancel-loading"])]),_:2},1024))),128))]),_:1}),o(be)>1?(l(),v("div",Qt,[i($,{modelValue:o(Q),"onUpdate:modelValue":e[3]||(e[3]=s=>W(Q)?Q.value=s:null),length:o(be),"total-visible":5,density:"compact",size:"small",class:"pagination"},null,8,["modelValue","length"])])):E("",!0)])):(l(),v("div",Jt,V(o(S))+"에 신청한 도서가 없습니다. ",1))]),a("div",Kt,[e[29]||(e[29]=a("div",{class:"section-header mb-4"},[a("h2",{class:"section-title"}," 읽은 책 목록 ")],-1)),a("div",Xt,[a("div",Yt,[e[26]||(e[26]=w(" 총 ",-1)),a("strong",null,V(o(M).length),1),e[27]||(e[27]=w("권 ",-1)),o(x).length>0?(l(),v("span",Zt," ("+V(o(x).length)+"권 선택됨) ",1)):E("",!0)]),o(M).length>0?(l(),O(c,{key:0,class:"delete-history-btn",variant:"flat",size:"small",disabled:o(x).length===0,loading:o(oe),onClick:xe},{default:_(()=>[...e[28]||(e[28]=[w(" 삭제하기 ",-1)])]),_:1},8,["disabled","loading"])):E("",!0)]),o(ve)?(l(),v("div",es,[i(f,{indeterminate:"",color:"primary"})])):o(M).length>0?(l(),v("div",ts,[i(C,{class:"book-list-row"},{default:_(()=>[(l(!0),v(Y,null,Z(o(M),s=>(l(),O(B,{key:`history-${s.id}`,cols:"12",sm:"6",class:"book-list-col"},{default:_(()=>[i(A,{book:s,center:s.center||"","show-action":!1,selectable:!0,selected:Re(s),"show-status-flags":!1,onSelect:Ue},null,8,["book","center","selected"])]),_:2},1024))),128))]),_:1})])):(l(),v("div",ss," 아직 읽은 책이 없습니다. "))])]),i(Ee,{name:"slide-up"},{default:_(()=>[o(R).length>0?(l(),v("div",os,[a("div",ns,[a("span",as,V(o(R).length)+"권 선택",1),e[30]||(e[30]=a("span",{class:"return-status"},"반납할 도서를 선택했습니다",-1))]),i(c,{class:"sticky-return-btn",variant:"flat",loading:o(De),onClick:Ae},{default:_(()=>[...e[31]||(e[31]=[w(" 반납하기 ",-1)])]),_:1},8,["loading"])])):E("",!0)]),_:1}),i(Ee,{name:"slide-up"},{default:_(()=>[o(x).length>0?(l(),v("div",ls,[a("div",rs,[a("span",is,V(o(x).length)+"권 선택",1),e[32]||(e[32]=a("span",{class:"delete-status"},"삭제할 도서를 선택했습니다",-1))]),i(c,{class:"sticky-delete-btn",variant:"flat",loading:o(oe),onClick:xe},{default:_(()=>[...e[33]||(e[33]=[w(" 삭제하기 ",-1)])]),_:1},8,["loading"])])):E("",!0)]),_:1})]),_:1}),i(K,{modelValue:o(j),"onUpdate:modelValue":e[5]||(e[5]=s=>W(j)?j.value=s:null),location:"right",temporary:"",width:o(he),class:"side-navigation"},{default:_(()=>[a("div",cs,[i(J)])]),_:1},8,["modelValue","width"]),i(_e,{modelValue:o(ee),"onUpdate:modelValue":e[6]||(e[6]=s=>W(ee)?ee.value=s:null),center:o(ge),location:o(we),mode:"return"},null,8,["modelValue","center","location"])]),_:1})}}},Ds=Je(us,[["__scopeId","data-v-db7f5455"]]);export{Ds as default};
