const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./L6FuJnzP.js","./entry.DNw42TVG.css"])))=>i.map(i=>d[i]);
import{C as y,D as h,E as i,q as r,a as P,_ as x}from"./L6FuJnzP.js";import{u as D}from"./DwMBJ7NQ.js";const z=y(async(f,g)=>{let e,t;const{isAuthenticated:_,loading:u,user:c}=D(),l=h("auth_state_ready");if(!h("auth_initialized",()=>!1).value&&l.value)try{[e,t]=i(()=>Promise.race([l.value,new Promise(a=>setTimeout(a,5e3))])),await e,t()}catch(a){console.error("인증 상태 확인 대기 중 오류:",a)}if(u.value){const n=Date.now();for(;u.value&&Date.now()-n<5e3;)[e,t]=i(()=>new Promise(o=>setTimeout(o,50))),await e,t()}if(!_.value)return r("/login");const{$firebaseFirestore:p}=P(),m=p;if(!m||!c.value)return r("/");try{const{doc:a,getDoc:n}=([e,t]=i(()=>x(()=>import("./L6FuJnzP.js").then(s=>s.aE),__vite__mapDeps([0,1]),import.meta.url)),e=await e,t(),e),o=a(m,"users",c.value.uid),d=([e,t]=i(()=>n(o)),e=await e,t(),e);if(d.exists()){const s=d.data(),v=s.role==="admin"||s.role==="manager",A=s.role==="admin";if(["/admin/managers"].some(w=>f.path.startsWith(w))&&!A)return r("/");if(!v)return r("/")}else return r("/")}catch(a){return console.error("관리자 권한 확인 오류:",a),r("/")}});export{z as default};
